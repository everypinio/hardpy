
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Everypin">
      
      
        <link rel="canonical" href="https://everypinio.github.io/hardpy/print_page/">
      
      
      
      
      <link rel="icon" href="../img/logo192.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.10">
    
    
      
        <title>Print Site - HardPy</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e359304.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/print-site-enum-headings1.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings2.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings3.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings4.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings5.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings6.css">
    
      <link rel="stylesheet" href="../css/print-site.css">
    
      <link rel="stylesheet" href="../css/print-site-material.css">
    
    <script>__md_scope=new URL("/hardpy/",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-6Z35DZJBP7"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-6Z35DZJBP7",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-6Z35DZJBP7",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  
        <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function () {
            remove_material_navigation();remove_mkdocs_theme_navigation();generate_toc();
        })
        </script>
        </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="HardPy" class="md-header__button md-logo" aria-label="HardPy" data-md-component="logo">
      
  <img src="../img/logo192.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            HardPy
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Print Site
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/everypinio/hardpy" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    everypinio/hardpy
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  HardPy

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../features/features/" class="md-tabs__link">
        
  
    
  
  Features

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../documentation/" class="md-tabs__link">
          
  
    
  
  Documentation

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../examples/" class="md-tabs__link">
          
  
    
  
  Examples

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../about/development/" class="md-tabs__link">
          
  
    
  
  About

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../changelog/" class="md-tabs__link">
        
  
    
  
  Changelog

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="HardPy" class="md-nav__button md-logo" aria-label="HardPy" data-md-component="logo">
      
  <img src="../img/logo192.png" alt="logo">

    </a>
    HardPy
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/everypinio/hardpy" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    everypinio/hardpy
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HardPy
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../features/features/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Features
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../documentation/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Documentation
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CLI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/hardpy_config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/database/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Database
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/hardpy_panel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HardPy panel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/pytest_hardpy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pytest-hardpy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/stand_cloud/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    StandCloud
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../examples/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/attempts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Attempts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/db_in_ram/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CouchDB in RAM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/couchdb_load/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CouchDB load
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/critical_test/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Critical test
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/dialog_box/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dialog box
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/dialog_box_plot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dialog box plot
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/hardpy_launch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HardPy launch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/hello_hardpy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hello HardPy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/launch_arguments/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Launch arguments
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pytest logging
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/minute_parity/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Minute parity
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/multiple_stands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multiple stands
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/operator_msg/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Operator message
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/frontend_remote_access/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Remote access
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/skip_test/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Skip test
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/stand_cloud/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    StandCloud
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/stand_cloud_reader/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    StandCloud read data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/stand_cloud_thirdparty_auth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    StandCloud third party authorization
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    About
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/development/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Development
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/fronted_sync/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Frontend data synchronization
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="Contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#" class="md-nav__link">
    <span class="md-ellipsis">
      1. HardPy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#features-features" class="md-nav__link">
    <span class="md-ellipsis">
      2. Features
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-documentation" class="md-nav__link">
    <span class="md-ellipsis">
      I. Documentation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="I. Documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#documentation" class="md-nav__link">
    <span class="md-ellipsis">
      3. Documentation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#documentation-cli" class="md-nav__link">
    <span class="md-ellipsis">
      4. CLI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#documentation-hardpy_config" class="md-nav__link">
    <span class="md-ellipsis">
      5. Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#documentation-database" class="md-nav__link">
    <span class="md-ellipsis">
      6. Database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#documentation-hardpy_panel" class="md-nav__link">
    <span class="md-ellipsis">
      7. HardPy panel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#documentation-pytest_hardpy" class="md-nav__link">
    <span class="md-ellipsis">
      8. Pytest-hardpy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#documentation-stand_cloud" class="md-nav__link">
    <span class="md-ellipsis">
      9. StandCloud
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-examples" class="md-nav__link">
    <span class="md-ellipsis">
      II. Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="II. Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      10. Examples
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-attempts" class="md-nav__link">
    <span class="md-ellipsis">
      11. Attempts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-db_in_ram" class="md-nav__link">
    <span class="md-ellipsis">
      12. CouchDB in RAM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-couchdb_load" class="md-nav__link">
    <span class="md-ellipsis">
      13. CouchDB load
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-critical_test" class="md-nav__link">
    <span class="md-ellipsis">
      14. Critical test
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-dialog_box" class="md-nav__link">
    <span class="md-ellipsis">
      15. Dialog box
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-dialog_box_plot" class="md-nav__link">
    <span class="md-ellipsis">
      16. Dialog box plot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-hardpy_launch" class="md-nav__link">
    <span class="md-ellipsis">
      17. HardPy launch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-hello_hardpy" class="md-nav__link">
    <span class="md-ellipsis">
      18. Hello HardPy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-launch_arguments" class="md-nav__link">
    <span class="md-ellipsis">
      19. Launch arguments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-logging" class="md-nav__link">
    <span class="md-ellipsis">
      20. Pytest logging
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-minute_parity" class="md-nav__link">
    <span class="md-ellipsis">
      21. Minute parity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-multiple_stands" class="md-nav__link">
    <span class="md-ellipsis">
      22. Multiple stands
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-operator_msg" class="md-nav__link">
    <span class="md-ellipsis">
      23. Operator message
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-frontend_remote_access" class="md-nav__link">
    <span class="md-ellipsis">
      24. Remote access
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-skip_test" class="md-nav__link">
    <span class="md-ellipsis">
      25. Skip test
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-stand_cloud" class="md-nav__link">
    <span class="md-ellipsis">
      26. StandCloud
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-stand_cloud_reader" class="md-nav__link">
    <span class="md-ellipsis">
      27. StandCloud read data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-stand_cloud_thirdparty_auth" class="md-nav__link">
    <span class="md-ellipsis">
      28. StandCloud third party authorization
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-about" class="md-nav__link">
    <span class="md-ellipsis">
      III. About
    </span>
  </a>
  
    <nav class="md-nav" aria-label="III. About">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#about-development" class="md-nav__link">
    <span class="md-ellipsis">
      29. Development
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#about-fronted_sync" class="md-nav__link">
    <span class="md-ellipsis">
      30. Frontend data synchronization
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#changelog" class="md-nav__link">
    <span class="md-ellipsis">
      31. Changelog
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<div id="print-site-page" class="print-site-enumerate-headings print-site-enumerate-figures">
        <section class="print-page">
            <div id="print-page-toc" data-toc-depth="3">
                <nav role='navigation' class='print-page-toc-nav'>
                <h1 class='print-page-toc-title'>Table of Contents</h1>
                </nav>
            </div>
        </section>
        <section class="print-page" id="index"><h1 align="center">
    <a class="glightbox" href="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/logo256.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/logo256.png" alt="HardPy" style="width:150px;"></a>
</h1>

<p align="center">
HardPy is a python library for creating a test bench for devices.
</p>

<hr />
<h2 id="index-overview">Overview<a class="headerlink" href="#index-overview" title="Permanent link">&para;</a></h2>
<p>HardPy allows you to:</p>
<ul>
<li>Create test benches for devices using <a href="https://docs.pytest.org/">pytest</a>;</li>
<li>Use a browser to view, start, stop, and interact with tests;</li>
<li>Store test results in the <a href="https://couchdb.apache.org/">CouchDB</a> database.</li>
</ul>
<h1 align="center">
    <a class="glightbox" href="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/hardpy_panel.gif" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/hardpy_panel.gif" alt="hardpy panel" style="width:600;"></a>
</h1>

<h2 id="index-to-install">To Install<a class="headerlink" href="#index-to-install" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>hardpy
</code></pre></div>
<h2 id="index-getting-started">Getting Started<a class="headerlink" href="#index-getting-started" title="Permanent link">&para;</a></h2>
<ol>
<li>Create your first test bench.</li>
</ol>
<div class="highlight"><pre><span></span><code>hardpy<span class="w"> </span>init
</code></pre></div>
<ol>
<li>Launch <a href="https://couchdb.apache.org/">CouchDB</a> database via <a href="https://docs.docker.com/compose/">docker compose</a> in the background.</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>tests
docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>-d
</code></pre></div>
<ol>
<li>Launch HardPy operator panel.</li>
</ol>
<div class="highlight"><pre><span></span><code>hardpy<span class="w"> </span>run
</code></pre></div>
<ol>
<li>
<p>View operator panel in browser: <a href="http://localhost:8000/">http://localhost:8000/</a>
<br />
<h1 align="center">
      <img src="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/hardpy_operator_panel_hello_hardpy.png"
      alt="hardpy operator panel" style="width:600px;">
  </h1></p>
</li>
<li>
<p>View the latest test report: <a href="http://localhost:5984/_utils">http://localhost:5984/_utils</a></p>
<p>Login and password: <strong>dev</strong>, database - <strong>runstore</strong> , document - <strong>current</strong>.</p>
</li>
</ol>
<h1 align="center">
      <img src="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/runstore_hello_hardpy.png"
      alt="hardpy runstore" style="width:500px;">
  </h1></section><section class="print-page" id="features-features"><h1 id="features-features-features">Features<a class="headerlink" href="#features-features-features" title="Permanent link">&para;</a></h1>
<h2 id="features-features-viewing-tests-in-the-operator-panel">Viewing tests in the operator panel<a class="headerlink" href="#features-features-viewing-tests-in-the-operator-panel" title="Permanent link">&para;</a></h2>
<p>The operator panel allows you to view the test hierarchy with <strong>test folder/test file/function</strong> levels.
See the <a href="#documentation-hardpy_panel">HardPy panel</a> for more information.
User can launch operator panel using <a href="#documentation-cli-hardpy-run">hardpy run</a> command.</p>
<h2 id="features-features-running-tests">Running tests<a class="headerlink" href="#features-features-running-tests" title="Permanent link">&para;</a></h2>
<p>Based on pytest <strong>HardPy</strong> allows you to run pytest tests in the browser or command line.
For running tests in browser run tests using <a href="#documentation-cli-hardpy-run">hardpy run</a> command.</p>
<div class="highlight"><pre><span></span><code>hardpy<span class="w"> </span>run
</code></pre></div>
<p>and press the <strong>Start</strong> button.
Alternatively, the user can start the operator panel with the “Start” button and run tests with pytest.</p>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>-m<span class="w"> </span>pytest
</code></pre></div>
<p>The user can also run tests without the operator panel, just using the <code>hardpy start</code> command or
using <code>pytest</code>.</p>
<h2 id="features-features-stopping-the-tests">Stopping the tests<a class="headerlink" href="#features-features-stopping-the-tests" title="Permanent link">&para;</a></h2>
<p>The user can stop the tests during execution from the operator panel by clicking on the <strong>Stop</strong> button
or using the <code>hardpy stop</code> command.
It is possible to stop tests from the console by sending an interrupt, e.g. “Ctrl-C” in Linux.</p>
<h2 id="features-features-checking-the-status-of-tests">Checking the status of tests<a class="headerlink" href="#features-features-checking-the-status-of-tests" title="Permanent link">&para;</a></h2>
<p>The user can check the status of tests using the <code>hardpy status</code> command.</p>
<h2 id="features-features-storing-test-result-in-database">Storing test result in database<a class="headerlink" href="#features-features-storing-test-result-in-database" title="Permanent link">&para;</a></h2>
<p><strong>HardPy</strong> does not allow you to run tests without a running <strong>CouchDB</strong> database.
This is a NoSQL database that ensures that the results of the current test run are committed,
even if the tests are aborted early.</p>
<p>To save the report history, the user must configure the <strong>conftest.py</strong> file using the
<a href="#documentation-pytest_hardpy-couchdbloader">CouchdbLoader</a> or another adapter to save the data.
By default, only the current report in the <a href="#documentation-database-runstore-scheme">runstore</a>
database is stored in <strong>CouchDB</strong>.</p>
<p>The test report format (database scheme) is described in the
<a href="#documentation-database-runstore-scheme">database runstore</a> section.</p>
<p>An example of configuring <strong>conftest.py</strong> to store test run history can be found in several examples,
including the <a href="#examples-couchdb_load">couchdb_load</a> and
<a href="#examples-minute_parity">minute_parity</a>.</p>
<h2 id="features-features-creating-template-project">Creating template project<a class="headerlink" href="#features-features-creating-template-project" title="Permanent link">&para;</a></h2>
<p>The <strong>HardPy</strong> can create template project using the <a href="#documentation-cli-hardpy-init">hardpy init</a>
command. An example of usage can be found in the <strong>how to init</strong> section among the examples, e.g. in
<a href="#examples-minute_parity-how-to-start">minute parity</a>.</p>
<div class="highlight"><pre><span></span><code>hardpy<span class="w"> </span>init<span class="w"> </span>minute_parity
</code></pre></div>
<h2 id="features-features-interacting-with-tests-in-the-operator-panel">Interacting with tests in the operator panel<a class="headerlink" href="#features-features-interacting-with-tests-in-the-operator-panel" title="Permanent link">&para;</a></h2>
<p>The user can interact with the tests through dialog boxes in the operator panel.
<strong>HardPy</strong> provides the ability to enter <a href="#documentation-hardpy_panel-text-input-field">text</a> or
<a href="#documentation-hardpy_panel-number-input-field">numbers</a>, make selections using
<a href="#documentation-hardpy_panel-checkbox">checkboxes</a> or
<a href="#documentation-hardpy_panel-radiobutton">radio buttons</a>,
guide the user through <a href="#documentation-hardpy_panel-multiple-steps">multiple steps</a>
in a single window, display <a href="#documentation-pytest_hardpy-imagecomponent">images</a> to the user,
and insert <a href="#documentation-pytest_hardpy-htmlcomponent">HTML components</a> into the dialog box using iframes.</p>
<p>In dialog boxes, the user must confirm their action by clicking the <strong>Confirm</strong> button.
Closing the dialog box prematurely will abort the test.</p>
<p>If the user only needs to provide information, an
<a href="#documentation-hardpy_panel-operator-message">operator message</a> can be used.
Unlike dialog boxes, the user cannot enter any information, only close the window.
User can also close the operator message from within the test code and run it in non-blocking mode,
so that displaying the window does not stop the test.</p>
<h2 id="features-features-running-multiple-test-attempts">Running multiple test attempts<a class="headerlink" href="#features-features-running-multiple-test-attempts" title="Permanent link">&para;</a></h2>
<p>The <strong>HardPy</strong> allows the user to attach an <a href="#documentation-pytest_hardpy-attempt">attempt</a>
marker to a test, which allows the test to be repeated as many times as specified in
the marker's content in the event of failure.</p>
<h2 id="features-features-skipping-the-tests">Skipping the tests<a class="headerlink" href="#features-features-skipping-the-tests" title="Permanent link">&para;</a></h2>
<p>The <strong>HardPy</strong> allows the user to skip tests on <a href="#documentation-pytest_hardpy-dependency">dependency</a>
markers.
The user can specify that a test or an entire module depends on another test.
In this way, tests can be defined whose failure will prevent the marked tests from running.
The user can also create a dependency on several test cases or modules.
If the name of the dependency does not exist, the test will be started.</p>
<div class="highlight"><pre><span></span><code><span class="c1">#test_1.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>

<span class="k">def</span> <span class="nf">test_a</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">False</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">dependency</span><span class="p">(</span><span class="s2">&quot;test_1::test_a&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_b</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">#test_2.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>

<span class="n">pytestmark</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">dependency</span><span class="p">(</span><span class="s2">&quot;test_1&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">test_a</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">False</span>

<span class="k">def</span> <span class="nf">test_b</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">dependency</span><span class="p">(</span><span class="s2">&quot;test_2::test_a&quot;</span><span class="p">)</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">dependency</span><span class="p">(</span><span class="s2">&quot;test_2::test_b&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_c</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>
</code></pre></div>
<p>See the example <a href="#examples-skip_test">skip test</a> for more information.</p>
<h2 id="features-features-critical-tests">Critical tests<a class="headerlink" href="#features-features-critical-tests" title="Permanent link">&para;</a></h2>
<p>The <strong>HardPy</strong> allows the user to skip subsequent tests marked as <a href="#documentation-pytest_hardpy-critical">critical</a>
marker, if a critical test fails or is skipped.
The user can designate individual tests or entire modules as critical.
If a test case is marked as critical, its failure will skip all remaining tests in the current and subsequent modules.<br />
If an entire module is marked as critical, the failure of any test within it will skip all remaining tests in that module and subsequent modules.  </p>
<p><strong>Example (test level):</strong></p>
<div class="highlight"><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">critical</span>
<span class="k">def</span> <span class="nf">test_a</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">False</span>

<span class="k">def</span> <span class="nf">test_b</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>
</code></pre></div>
<p><strong>Example (module level):</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">pytestmark</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">critical</span>

<span class="k">def</span> <span class="nf">test_c</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>
</code></pre></div>
<p>See the example <a href="#examples-critical_test">critical</a> for more information.</p>
<h2 id="features-features-running-some-instance-in-single-stand">Running some instance in single stand<a class="headerlink" href="#features-features-running-some-instance-in-single-stand" title="Permanent link">&para;</a></h2>
<p>A user can run multiple <strong>HardPy</strong> instances on a single stand.
The startup is described in the <a href="#examples-multiple_stands">Multiple Stand</a> example.</p>
<h2 id="features-features-storing-test-result-to-standcloud">Storing test result to StandCloud<a class="headerlink" href="#features-features-storing-test-result-to-standcloud" title="Permanent link">&para;</a></h2>
<p><strong>HardPy</strong> allows user to send test results to <strong>StandCloud</strong>, a data storage and analysis platform.
See the <a href="#documentation-stand_cloud">StandCloud</a> section and the
<a href="#examples-stand_cloud">StandCloud example</a> for more information.</p>
<h2 id="features-features-logging-approaches-in-hardpy">Logging approaches in HardPy<a class="headerlink" href="#features-features-logging-approaches-in-hardpy" title="Permanent link">&para;</a></h2>
<p><strong>HardPy</strong> provides several methods for logging and user interaction during testing.
Choose the appropriate method based on whether you need to store information in the
database or just display messages to the operator.</p>
<h3 id="features-features-database-logging-with-set_message">Database logging with set_message<a class="headerlink" href="#features-features-database-logging-with-set_message" title="Permanent link">&para;</a></h3>
<p>The <a href="#documentation-pytest_hardpy-set_message">set_message</a> function stores the log message in the report.
Messages without specified keys get auto-generated keys, while known keys update existing messages.
Perfect for tracking test progress, recording measurements, system states, and verification results.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">test_temperature_sensor</span><span class="p">():</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="n">read_temperature</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">temp</span> <span class="o">&gt;</span> <span class="mi">50</span><span class="p">:</span>
        <span class="n">set_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Warning: High temperature </span><span class="si">{</span><span class="n">temp</span><span class="si">}</span><span class="s2">°C&quot;</span><span class="p">,</span> <span class="s2">&quot;temp_warning&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">set_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Normal temperature </span><span class="si">{</span><span class="n">temp</span><span class="si">}</span><span class="s2">°C&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="features-features-interactive-dialogs-with-run_dialog_box">Interactive dialogs with run_dialog_box<a class="headerlink" href="#features-features-interactive-dialogs-with-run_dialog_box" title="Permanent link">&para;</a></h3>
<p>The <a href="#documentation-pytest_hardpy-run_dialog_box">run_dialog_box</a>
function creates dialog boxes for operator input with various widgets (text, numeric, checkboxes).
Supports titles, images, and HTML content.
Can be used to notify and interact with the user, but does not save the information in the report.
The user can save the information separately using the
<a href="#documentation-pytest_hardpy-set_case_artifact">set_case_artifact</a>,
<a href="#documentation-pytest_hardpy-set_module_artifact">set_module_artifact</a> or
<a href="#documentation-pytest_hardpy-set_run_artifact">set_run_artifact</a> functions.
Essential for manual equipment verification, test configuration confirmation, and safety checks.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">test_manual_calibration</span><span class="p">():</span>
    <span class="n">dialog</span> <span class="o">=</span> <span class="n">DialogBox</span><span class="p">(</span>
        <span class="n">dialog_text</span><span class="o">=</span><span class="s2">&quot;Connect calibration device and press Confirm&quot;</span><span class="p">,</span>
        <span class="n">title_bar</span><span class="o">=</span><span class="s2">&quot;Calibration Setup&quot;</span><span class="p">,</span>
        <span class="n">widget</span><span class="o">=</span><span class="n">RadioButtonWidget</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Ready&quot;</span><span class="p">,</span> <span class="s2">&quot;Skip&quot;</span><span class="p">,</span> <span class="s2">&quot;Abort&quot;</span><span class="p">])</span>
    <span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">run_dialog_box</span><span class="p">(</span><span class="n">dialog</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">response</span> <span class="o">==</span> <span class="s2">&quot;Ready&quot;</span><span class="p">,</span> <span class="s2">&quot;Calibration was not confirmed&quot;</span>
</code></pre></div>
<h3 id="features-features-operator-messages-with-set_operator_message">Operator messages with set_operator_message<a class="headerlink" href="#features-features-operator-messages-with-set_operator_message" title="Permanent link">&para;</a></h3>
<p>The <a href="#documentation-pytest_hardpy-set_operator_message">set_operator_message</a>
function displays non-interactive notifications without database storage.
The user can save the information separately using the
<a href="#documentation-pytest_hardpy-set_case_artifact">set_case_artifact</a>,
<a href="#documentation-pytest_hardpy-set_module_artifact">set_module_artifact</a> or
<a href="#documentation-pytest_hardpy-set_run_artifact">set_run_artifact</a> functions.
Can be used to notify and interact with the user, but does not save the information in the report.
Supports titles, images, and HTML content, with optional blocking until dismissed.
Ideal for equipment setup instructions, test phase transitions, and important warnings.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">test_system_startup</span><span class="p">():</span>
    <span class="n">set_operator_message</span><span class="p">(</span>
        <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Please power on all test equipment&quot;</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Initial Setup&quot;</span><span class="p">,</span>
        <span class="n">image</span><span class="o">=</span><span class="n">ImageComponent</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="s2">&quot;assets/power_on.png&quot;</span><span class="p">),</span>
        <span class="n">block</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>
</code></pre></div>
<h3 id="features-features-choosing-the-right-method">Choosing the right method<a class="headerlink" href="#features-features-choosing-the-right-method" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Method</th>
<th>Database Storage</th>
<th>User Interaction</th>
<th>Best For</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>set_message</code></td>
<td>Yes</td>
<td>No</td>
<td>Permanent logs</td>
</tr>
<tr>
<td><code>run_dialog_box</code></td>
<td>No</td>
<td>Yes</td>
<td>Test steps requiring input</td>
</tr>
<tr>
<td><code>set_operator_message</code></td>
<td>No</td>
<td>No</td>
<td>Important notifications</td>
</tr>
</tbody>
</table>
<h2 id="features-features-reading-test-result-from-standcloud">Reading test result from StandCloud<a class="headerlink" href="#features-features-reading-test-result-from-standcloud" title="Permanent link">&para;</a></h2>
<p><strong>HardPy</strong> allows user to read test result from <strong>StandCloud</strong>.
See the <a href="#examples-stand_cloud_reader">StandCloud reader</a> for more information.</p>
<h2 id="features-features-operator-panel-language">Operator panel language<a class="headerlink" href="#features-features-operator-panel-language" title="Permanent link">&para;</a></h2>
<p>The user can set one of the following operator panel languages ​​via the <em>hardpy.toml</em>.
Available languages are <a href="#documentation-hardpy_panel-languages">there</a>.</p>
<p>The example of file:</p>
<div class="highlight"><pre><span></span><code><span class="k">[frontend]</span>
<span class="n">language</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;zh&quot;</span>
</code></pre></div></section>
                        <h1 class='nav-section-title' id='section-documentation'>
                            Documentation <a class='headerlink' href='#section-documentation' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="documentation"><h1 id="documentation-documentation">Documentation<a class="headerlink" href="#documentation-documentation" title="Permanent link">&para;</a></h1>
<h2 id="documentation-python-version">Python version<a class="headerlink" href="#documentation-python-version" title="Permanent link">&para;</a></h2>
<p><strong>HardPy</strong> is based on the <strong>python 3.10</strong> and supports versions <strong>3.11</strong>, <strong>3.12</strong>, <strong>3.13</strong>.</p>
<h2 id="documentation-hardpy-structure">HardPy structure<a class="headerlink" href="#documentation-hardpy-structure" title="Permanent link">&para;</a></h2>
<p><strong>HardPy</strong> includes several parts.</p>
<h3 id="documentation-hardpy-cli">HardPy CLI<a class="headerlink" href="#documentation-hardpy-cli" title="Permanent link">&para;</a></h3>
<p><strong>HardPy CLI</strong> on a <a href="#documentation-structural-scheme">structural scheme</a>.</p>
<ul>
<li>Entry point for <strong>HardPy</strong>.</li>
<li><strong>HardPy</strong> test bench creator.</li>
<li>Launcher for <a href="#documentation-hardpy-operator-panel">operator panel</a>.</li>
<li><strong>StandCloud</strong> <a href="#documentation-cli-sc-login">authorization</a> tool.</li>
</ul>
<p>For more info, read <a href="#documentation-cli">CLI</a>.</p>
<h3 id="documentation-hardpy-pytest-plugin">HardPy pytest plugin<a class="headerlink" href="#documentation-hardpy-pytest-plugin" title="Permanent link">&para;</a></h3>
<p><strong>HardPy</strong> includes the pytest-hardpy plugin for <strong>pytest</strong>.
Compatible with pytest versions above 7.
You can run tests not only through the operator panel but also through the <strong>pytest</strong> itself.</p>
<p><strong>pytest-hardpy</strong> on a <a href="#documentation-structural-scheme">structural scheme</a>.</p>
<ul>
<li>The pytest wrapper for running pytest from the <strong>HardPy</strong> operator panel.</li>
<li>The pytest plugin with API for storing data in a database.</li>
</ul>
<p>For more info, read <a href="#documentation-pytest_hardpy">pytest-hardpy</a>.</p>
<h3 id="documentation-hardpy-operator-panel">HardPy operator panel<a class="headerlink" href="#documentation-hardpy-operator-panel" title="Permanent link">&para;</a></h3>
<p><strong>HardPy</strong> includes a <strong>React</strong> application - <strong>HardPy operator panel</strong>.
It allows you to use a browser to view and interact with your tests and write test results to a database.</p>
<p><strong>hardpy-panel</strong> on a <a href="#documentation-structural-scheme">structural scheme</a>.</p>
<ul>
<li>Web interface for viewing tests and starting/stopping tests.</li>
<li>FastAPI application for processing frontend commands.</li>
<li>PouchDB - web database for synchronizing data from CouchDB and the hardpy operator panel.</li>
</ul>
<p>For more info, read <a href="#documentation-hardpy_panel">hardpy-panel</a>.</p>
<h3 id="documentation-couchdb">CouchDB<a class="headerlink" href="#documentation-couchdb" title="Permanent link">&para;</a></h3>
<p><strong>HardPy</strong> uses <a href="https://couchdb.apache.org/">CouchDB</a> as its database but you can write
final result to any database because <strong>CouchDB</strong> stores data in a simple document.
Developers can create their adapter for any database and store the test report in a way that suits them.
By default <strong>HardPy</strong> allows you to store all reports in <strong>CouchDB</strong>.
<strong>HardPy</strong> is compatible with <strong>CouchDB</strong> versions above 3.2.</p>
<ul>
<li>Database to store current test data and store all test results.</li>
</ul>
<p>For more info, read <a href="#documentation-database">database</a>.</p>
<h3 id="documentation-database-adapter">Database adapter<a class="headerlink" href="#documentation-database-adapter" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>HardPy</strong> allows you to use a simple database adapter to store test results in CouchDB
  using the <a href="#documentation-pytest_hardpy-couchdbloader">CouchdbLoader</a>.</li>
<li><strong>HardPy</strong> allows you to use a <a href="#documentation-stand_cloud">StandCloud</a> database adapter to store test results in <strong>StandCloud</strong>
  using the <a href="#documentation-pytest_hardpy-standcloudloader">StandCloudLoader</a>.</li>
<li>A developer can create a database adapter to store test results in any database.</li>
</ul>
<h3 id="documentation-structural-scheme">Structural scheme<a class="headerlink" href="#documentation-structural-scheme" title="Permanent link">&para;</a></h3>
<figure align="left" width="800">
    <a class="glightbox" href="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/hardpy_struct.drawio.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/hardpy_struct.drawio.png" alt="hardpy structure"></a>
    <figcaption align="center">
        HardPy structure
    </figcaption>
</figure></section><section class="print-page" id="documentation-cli"><h1 id="documentation-cli-command-line-interface">Command line interface<a class="headerlink" href="#documentation-cli-command-line-interface" title="Permanent link">&para;</a></h1>
<p><strong>HardPy</strong> uses the CLI (command line interface) as an entry point.</p>
<p>For more information use:</p>
<div class="highlight"><pre><span></span><code>hardpy<span class="w"> </span>--help
</code></pre></div>
<h2 id="documentation-cli-hardpy-init">hardpy init<a class="headerlink" href="#documentation-cli-hardpy-init" title="Permanent link">&para;</a></h2>
<p>The <code>hardpy init</code> command is used to create a test bench.
By default, it creates the <code>tests</code> directory.</p>
<p>It consists of:</p>
<ul>
<li><code>test_1.py</code> - a pytest file with a simple test;</li>
<li><code>conftest.py</code> - the pytest conftest file;</li>
<li><code>pytest.ini</code> - pytest configuration .ini file for pytest;</li>
<li><code>hardpy.toml</code> - <strong>HardPy</strong> configuration file;</li>
<li><code>docker-compose.yaml</code> - docker-compose file for running the database;</li>
<li><code>database</code> - CouchDB database directory;</li>
<li><code>couchdb.ini</code> - the couchdb configuration .ini file in the database directory;</li>
</ul>
<p>You can run <code>hardpy init &lt;test_bench_name&gt;</code>, where <code>&lt;test_bench_name&gt;</code> is the name of your test bench.</p>
<p>The <code>hardpy init</code> command allows you to change the initial <strong>HardPy</strong> settings.
More info in <a href="#documentation-hardpy_config">hardpy config</a>.</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span>Usage:<span class="w"> </span>hardpy<span class="w"> </span>init<span class="w"> </span><span class="o">[</span>OPTIONS<span class="o">]</span><span class="w"> </span><span class="o">[</span>TESTS_DIR<span class="o">]</span>

<span class="w"> </span>Initialize<span class="w"> </span>HardPy<span class="w"> </span>tests<span class="w"> </span>directory.

╭─<span class="w"> </span>Arguments<span class="w"> </span>────────────────────────────────────────────────────────────────────────────────────────────────╮
│<span class="w">   </span>tests_dir<span class="w">      </span><span class="o">[</span>TESTS_DIR<span class="o">]</span><span class="w">  </span><span class="o">[</span>default:<span class="w"> </span>None<span class="o">]</span><span class="w">                                                              </span>│
╰────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─<span class="w"> </span>Options<span class="w"> </span>──────────────────────────────────────────────────────────────────────────────────────────────────╮
│<span class="w"> </span>--tests-name<span class="w">                                   </span>TEXT<span class="w">     </span>Specify<span class="w"> </span>a<span class="w"> </span>tests<span class="w"> </span>suite<span class="w"> </span>name.<span class="w">                        </span>│
│<span class="w"> </span>--create-database<span class="w">      </span>--no-create-database<span class="w">             </span>Create<span class="w"> </span>CouchDB<span class="w"> </span>database.<span class="w">                           </span>│
│<span class="w">                                                         </span><span class="o">[</span>default:<span class="w"> </span>create-database<span class="o">]</span><span class="w">                         </span>│
│<span class="w"> </span>--database-user<span class="w">                                </span>TEXT<span class="w">     </span>Specify<span class="w"> </span>a<span class="w"> </span>database<span class="w"> </span>user.<span class="w"> </span><span class="o">[</span>default:<span class="w"> </span>dev<span class="o">]</span><span class="w">            </span>│
│<span class="w"> </span>--database-password<span class="w">                            </span>TEXT<span class="w">     </span>Specify<span class="w"> </span>a<span class="w"> </span>database<span class="w"> </span>user<span class="w"> </span>password.<span class="w"> </span><span class="o">[</span>default:<span class="w"> </span>dev<span class="o">]</span><span class="w">   </span>│
│<span class="w"> </span>--database-host<span class="w">                                </span>TEXT<span class="w">     </span>Specify<span class="w"> </span>a<span class="w"> </span>database<span class="w"> </span>host.<span class="w"> </span><span class="o">[</span>default:<span class="w"> </span>localhost<span class="o">]</span><span class="w">      </span>│
│<span class="w"> </span>--database-port<span class="w">                                </span>INTEGER<span class="w">  </span>Specify<span class="w"> </span>a<span class="w"> </span>database<span class="w"> </span>port.<span class="w"> </span><span class="o">[</span>default:<span class="w"> </span><span class="m">5984</span><span class="o">]</span><span class="w">           </span>│
│<span class="w"> </span>--frontend-port<span class="w">                                </span>INTEGER<span class="w">  </span>Specify<span class="w"> </span>a<span class="w"> </span>frontend<span class="w"> </span>port.<span class="w"> </span><span class="o">[</span>default:<span class="w"> </span><span class="m">8000</span><span class="o">]</span><span class="w">           </span>│
│<span class="w"> </span>--frontend-host<span class="w">                                </span>TEXT<span class="w">     </span>Specify<span class="w"> </span>a<span class="w"> </span>frontend<span class="w"> </span>host.<span class="w"> </span><span class="o">[</span>default:<span class="w"> </span>localhost<span class="o">]</span><span class="w">      </span>│
│<span class="w"> </span>--sc-address<span class="w">                                   </span>TEXT<span class="w">     </span>Specify<span class="w"> </span>a<span class="w"> </span>StandCloud<span class="w"> </span>address.<span class="w">                      </span>│
│<span class="w"> </span>--sc-connection-only<span class="w"> </span>--no-sc-connection-only<span class="w">            </span>Check<span class="w"> </span>StandCloud<span class="w"> </span>service<span class="w"> </span>availability<span class="w"> </span>before<span class="w"> </span>start.│
<span class="p">|</span><span class="w">                                                         </span><span class="o">[</span>default:<span class="w"> </span>check-stand-cloud<span class="o">]</span><span class="w">                       </span>│
│<span class="w"> </span>--help<span class="w">                                                  </span>Show<span class="w"> </span>this<span class="w"> </span>message<span class="w"> </span>and<span class="w"> </span>exit.<span class="w">                        </span>│
╰────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</code></pre></div>
<p>To obtain this information, use:</p>
<div class="highlight"><pre><span></span><code>hardpy<span class="w"> </span>init<span class="w"> </span>--help
</code></pre></div>
<h2 id="documentation-cli-hardpy-run">hardpy run<a class="headerlink" href="#documentation-cli-hardpy-run" title="Permanent link">&para;</a></h2>
<p>The <code>hardpy run</code> command is used to start the operator panel server.
By default, it starts <strong>HardPy</strong> in the current directory.</p>
<p>You can run the <code>hardpy run &lt;tests_directory&gt;</code> command, where <code>&lt;tests_directory&gt;</code>
is the path to the directory with your tests.</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span>Usage:<span class="w"> </span>hardpy<span class="w"> </span>run<span class="w"> </span><span class="o">[</span>OPTIONS<span class="o">]</span><span class="w"> </span><span class="o">[</span>TESTS_DIR<span class="o">]</span>

<span class="w"> </span>Run<span class="w"> </span>HardPy<span class="w"> </span>server.

╭─<span class="w"> </span>Arguments<span class="w"> </span>────────────────────────────────────────────────────────────────────────────────────────────────╮
│<span class="w">   </span>tests_dir<span class="w">      </span><span class="o">[</span>TESTS_DIR<span class="o">]</span><span class="w">  </span><span class="o">[</span>default:<span class="w"> </span>None<span class="o">]</span><span class="w">                                                              </span>│
╰────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─<span class="w"> </span>Options<span class="w"> </span>──────────────────────────────────────────────────────────────────────────────────────────────────╮
│<span class="w"> </span>--help<span class="w">          </span>Show<span class="w"> </span>this<span class="w"> </span>message<span class="w"> </span>and<span class="w"> </span>exit.<span class="w">                                                                </span>│
╰────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</code></pre></div>
<p>To obtain this information, use:</p>
<div class="highlight"><pre><span></span><code>hardpy<span class="w"> </span>run<span class="w"> </span>--help
</code></pre></div>
<h2 id="documentation-cli-hardpy-start">hardpy start<a class="headerlink" href="#documentation-cli-hardpy-start" title="Permanent link">&para;</a></h2>
<p>The <code>hardpy start</code> command is used to launch <strong>HardPy</strong> tests while the <strong>HardPy</strong> opener panel is running.
By default, it starts tests in the current directory.</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span>Usage:<span class="w"> </span>hardpy<span class="w"> </span>start<span class="w"> </span><span class="o">[</span>OPTIONS<span class="o">]</span><span class="w"> </span><span class="o">[</span>TESTS_DIR<span class="o">]</span>

<span class="w"> </span>Start<span class="w"> </span>HardPy<span class="w"> </span>tests.

╭─<span class="w"> </span>Arguments<span class="w"> </span>────────────────────────────────────────────────────────────────────────────────────────────────╮
│<span class="w">   </span>tests_dir<span class="w">      </span><span class="o">[</span>TESTS_DIR<span class="o">]</span><span class="w">  </span><span class="o">[</span>default:<span class="w"> </span>None<span class="o">]</span><span class="w">                                                              </span>│
╰────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─<span class="w"> </span>Options<span class="w"> </span>──────────────────────────────────────────────────────────────────────────────────────────────────╮
│<span class="w"> </span>--help<span class="w">          </span>Show<span class="w"> </span>this<span class="w"> </span>message<span class="w"> </span>and<span class="w"> </span>exit.<span class="w">                                                                </span>│
╰────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</code></pre></div>
<h2 id="documentation-cli-hardpy-stop">hardpy stop<a class="headerlink" href="#documentation-cli-hardpy-stop" title="Permanent link">&para;</a></h2>
<p>The <code>hardpy stop</code> command is used to stop <strong>HardPy</strong> tests while the <strong>HardPy</strong> opener panel is running.
By default, it stops tests in the current directory.</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span>Usage:<span class="w"> </span>hardpy<span class="w"> </span>stop<span class="w"> </span><span class="o">[</span>OPTIONS<span class="o">]</span><span class="w"> </span><span class="o">[</span>TESTS_DIR<span class="o">]</span>

<span class="w"> </span>Stop<span class="w"> </span>HardPy<span class="w"> </span>tests.

╭─<span class="w"> </span>Arguments<span class="w"> </span>────────────────────────────────────────────────────────────────────────────────────────────────╮
│<span class="w">   </span>tests_dir<span class="w">      </span><span class="o">[</span>TESTS_DIR<span class="o">]</span><span class="w">  </span><span class="o">[</span>default:<span class="w"> </span>None<span class="o">]</span><span class="w">                                                              </span>│
╰────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─<span class="w"> </span>Options<span class="w"> </span>──────────────────────────────────────────────────────────────────────────────────────────────────╮
│<span class="w"> </span>--help<span class="w">          </span>Show<span class="w"> </span>this<span class="w"> </span>message<span class="w"> </span>and<span class="w"> </span>exit.<span class="w">                                                                </span>│
╰────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</code></pre></div>
<h2 id="documentation-cli-hardpy-status">hardpy status<a class="headerlink" href="#documentation-cli-hardpy-status" title="Permanent link">&para;</a></h2>
<p>The <code>hardpy status</code> command is used to get <strong>HardPy</strong> tests launch status.</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span>Usage:<span class="w"> </span>hardpy<span class="w"> </span>status<span class="w"> </span><span class="o">[</span>OPTIONS<span class="o">]</span><span class="w"> </span><span class="o">[</span>TESTS_DIR<span class="o">]</span>

<span class="w"> </span>Get<span class="w"> </span>HardPy<span class="w"> </span><span class="nb">test</span><span class="w"> </span>launch<span class="w"> </span>status.

╭─<span class="w"> </span>Arguments<span class="w"> </span>────────────────────────────────────────────────────────────────────────────────────────────────╮
│<span class="w">   </span>tests_dir<span class="w">      </span><span class="o">[</span>TESTS_DIR<span class="o">]</span><span class="w">  </span><span class="o">[</span>default:<span class="w"> </span>None<span class="o">]</span><span class="w">                                                              </span>│
╰────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─<span class="w"> </span>Options<span class="w"> </span>──────────────────────────────────────────────────────────────────────────────────────────────────╮
│<span class="w"> </span>--help<span class="w">          </span>Show<span class="w"> </span>this<span class="w"> </span>message<span class="w"> </span>and<span class="w"> </span>exit.<span class="w">                                                                </span>│
╰────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</code></pre></div>
<h2 id="documentation-cli-sc-login">sc-login<a class="headerlink" href="#documentation-cli-sc-login" title="Permanent link">&para;</a></h2>
<p>The <code>hardpy sc-login</code> command is used to login in <strong>StandCloud</strong>.</p>
<p>You can run the <code>hardpy sc-login &lt;stand_cloud_address&gt;</code> command, where <code>&lt;stand_cloud_address&gt;</code>
is the <strong>StandCloud</strong> service address.</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span>Usage:<span class="w"> </span>hardpy<span class="w"> </span>sc-login<span class="w"> </span><span class="o">[</span>OPTIONS<span class="o">]</span><span class="w"> </span><span class="o">[</span>TESTS_DIR<span class="o">]</span>

<span class="w"> </span>Login<span class="w"> </span>HardPy<span class="w"> </span><span class="k">in</span><span class="w"> </span>StandCloud.

╭─<span class="w"> </span>Arguments<span class="w"> </span>────────────────────────────────────────────────────────────────────────────────────────────────╮
│<span class="w">   </span>address<span class="w">   </span>TEXT<span class="w">  </span><span class="o">[</span>default:<span class="w"> </span>None<span class="o">]</span><span class="w"> </span><span class="o">[</span>required<span class="o">]</span><span class="w">                                                               </span>│
╰────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─<span class="w"> </span>Options<span class="w"> </span>──────────────────────────────────────────────────────────────────────────────────────────────────╮
│<span class="w"> </span>--check<span class="w">         </span>--no-check<span class="w">           </span>Check<span class="w"> </span>StandCloud<span class="w"> </span>connection.<span class="w"> </span><span class="o">[</span>default:<span class="w"> </span>no-check<span class="o">]</span><span class="w">                      </span>│
│<span class="w"> </span>--help<span class="w">                               </span>Show<span class="w"> </span>this<span class="w"> </span>message<span class="w"> </span>and<span class="w"> </span>exit.<span class="w">                                           </span>│
╰────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</code></pre></div>
<p>To obtain this information, use:</p>
<div class="highlight"><pre><span></span><code>hardpy<span class="w"> </span>sc-login<span class="w"> </span>--help
</code></pre></div>
<h2 id="documentation-cli-sc-logout">sc-logout<a class="headerlink" href="#documentation-cli-sc-logout" title="Permanent link">&para;</a></h2>
<p>The <code>hardpy sc-logout</code> command is used to logout from <strong>StandCloud</strong>.</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span>Usage:<span class="w"> </span>hardpy<span class="w"> </span>sc-logout<span class="w"> </span><span class="o">[</span>OPTIONS<span class="o">]</span>

<span class="w"> </span>Logout<span class="w"> </span>HardPy<span class="w"> </span>from<span class="w"> </span>StandCloud.
╭─<span class="w"> </span>Arguments<span class="w"> </span>────────────────────────────────────────────────────────────────────────────────────────────────╮
│<span class="w">   </span>address<span class="w">   </span>TEXT<span class="w">  </span><span class="o">[</span>default:<span class="w"> </span>None<span class="o">]</span><span class="w"> </span><span class="o">[</span>required<span class="o">]</span><span class="w">                                                               </span>│
╰────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─<span class="w"> </span>Options<span class="w"> </span>──────────────────────────────────────────────────────────────────────────────────────────────────╮
│<span class="w"> </span>--help<span class="w">          </span>Show<span class="w"> </span>this<span class="w"> </span>message<span class="w"> </span>and<span class="w"> </span>exit.<span class="w">                                                                </span>│
╰────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</code></pre></div>
<div class="highlight"><pre><span></span><code>hardpy<span class="w"> </span>sc-logout<span class="w"> </span>--help
</code></pre></div></section><section class="print-page" id="documentation-hardpy_config"><h1 id="documentation-hardpy_config-hardpy-config">HardPy config<a class="headerlink" href="#documentation-hardpy_config-hardpy-config" title="Permanent link">&para;</a></h1>
<p><strong>HardPy</strong> uses the <code>hardpy.toml</code> file for configuration.
The user can change the fields at creation by using <a href="#documentation-cli-hardpy-init">hardpy init</a>.</p>
<details class="note" open="open">
<summary>Note</summary>
<p>All <strong>HardPy</strong> project must have <code>hardpy.toml</code> file.</p>
</details>
<h2 id="documentation-hardpy_config-default-config">Default config<a class="headerlink" href="#documentation-hardpy_config-default-config" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;HardPy TOML config&quot;</span>
<span class="n">tests_dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;tests&quot;</span>

<span class="k">[database]</span>
<span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;dev&quot;</span>
<span class="n">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;dev&quot;</span>
<span class="n">host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;localhost&quot;</span>
<span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5984</span>

<span class="k">[frontend]</span>
<span class="n">host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;localhost&quot;</span>
<span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8000</span>
</code></pre></div>
<h2 id="documentation-hardpy_config-maximum-configuration-file">Maximum configuration file<a class="headerlink" href="#documentation-hardpy_config-maximum-configuration-file" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;HardPy TOML config&quot;</span>
<span class="n">tests_dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;tests&quot;</span>
<span class="n">tests_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;My tests&quot;</span>

<span class="k">[database]</span>
<span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;dev&quot;</span>
<span class="n">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;dev&quot;</span>
<span class="n">host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;localhost&quot;</span>
<span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5984</span>

<span class="k">[frontend]</span>
<span class="n">host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;localhost&quot;</span>
<span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8000</span>
<span class="n">language</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;en&quot;</span>

<span class="k">[stand_cloud]</span>
<span class="n">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;demo.standcloud.io&quot;</span>
<span class="n">connection_only</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</code></pre></div>
<h2 id="documentation-hardpy_config-configuration-fields-description">Configuration fields description<a class="headerlink" href="#documentation-hardpy_config-configuration-fields-description" title="Permanent link">&para;</a></h2>
<h3 id="documentation-hardpy_config-common">common<a class="headerlink" href="#documentation-hardpy_config-common" title="Permanent link">&para;</a></h3>
<p>Common settings.</p>
<h4 id="documentation-hardpy_config-title">title<a class="headerlink" href="#documentation-hardpy_config-title" title="Permanent link">&para;</a></h4>
<p>Configuration file header.
The value is always <code>HardPy TOML config</code>.</p>
<h4 id="documentation-hardpy_config-tests_dir">tests_dir<a class="headerlink" href="#documentation-hardpy_config-tests_dir" title="Permanent link">&para;</a></h4>
<p>Tests directory. The default is <code>tests</code>.
The user can change this value with the <code>hardpy init</code> argument.</p>
<h4 id="documentation-hardpy_config-tests_name">tests_name<a class="headerlink" href="#documentation-hardpy_config-tests_name" title="Permanent link">&para;</a></h4>
<p>Tests name. The default is <a href="#documentation-hardpy_config-tests_dir">tests_dir</a>.
The user can change this value with the <code>hardpy init --tests-name</code> argument.</p>
<h3 id="documentation-hardpy_config-database">database<a class="headerlink" href="#documentation-hardpy_config-database" title="Permanent link">&para;</a></h3>
<p>Database settings.</p>
<h4 id="documentation-hardpy_config-user">user<a class="headerlink" href="#documentation-hardpy_config-user" title="Permanent link">&para;</a></h4>
<p>Database user name. The default is <code>dev</code>.
The user can change this value with the <code>hardpy init --database-user</code> option.</p>
<h4 id="documentation-hardpy_config-password">password<a class="headerlink" href="#documentation-hardpy_config-password" title="Permanent link">&para;</a></h4>
<p>Database password. The default is <code>dev</code>.
The user can change this value with the <code>hardpy init --database-password</code> option.</p>
<h4 id="documentation-hardpy_config-host">host<a class="headerlink" href="#documentation-hardpy_config-host" title="Permanent link">&para;</a></h4>
<p>Database host name. The default is <code>localhost</code>.
The user can change this value with the <code>hardpy init --database-host</code> option.</p>
<h4 id="documentation-hardpy_config-port">port<a class="headerlink" href="#documentation-hardpy_config-port" title="Permanent link">&para;</a></h4>
<p>Database port number. The default is <code>5984</code>.
The user can change this value with the <code>hardpy init --database-port</code> option.</p>
<h3 id="documentation-hardpy_config-frontend">frontend<a class="headerlink" href="#documentation-hardpy_config-frontend" title="Permanent link">&para;</a></h3>
<p>Frontend (operator panel) settings.</p>
<h4 id="documentation-hardpy_config-host_1">host<a class="headerlink" href="#documentation-hardpy_config-host_1" title="Permanent link">&para;</a></h4>
<p>Operator panel host name. The default is <code>localhost</code>.
The user can change this value with the <code>hardpy init --frontend-host</code> option.</p>
<h4 id="documentation-hardpy_config-port_1">port<a class="headerlink" href="#documentation-hardpy_config-port_1" title="Permanent link">&para;</a></h4>
<p>Operator panel port number. The default is <code>8000</code>.
The user can change this value with the <code>hardpy init --frontend-port</code> option.</p>
<h4 id="documentation-hardpy_config-language">language<a class="headerlink" href="#documentation-hardpy_config-language" title="Permanent link">&para;</a></h4>
<p>Language of operator panel. The default is <code>en</code>.
Available languages are <a href="#documentation-hardpy_panel-languages">there</a>.</p>
<h3 id="documentation-hardpy_config-stand_cloud">stand_cloud<a class="headerlink" href="#documentation-hardpy_config-stand_cloud" title="Permanent link">&para;</a></h3>
<p><a href="#documentation-stand_cloud">StandCloud</a> settings.</p>
<div class="highlight"><pre><span></span><code><span class="k">[stand_cloud]</span>
<span class="n">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;demo.standcloud.localhost&quot;</span>
<span class="n">connection_only</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</code></pre></div>
<h4 id="documentation-hardpy_config-address">address<a class="headerlink" href="#documentation-hardpy_config-address" title="Permanent link">&para;</a></h4>
<p><strong>StandCloud</strong> service address.
To obtain one, contact <strong><a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#105;&#110;&#102;&#111;&#64;&#101;&#118;&#101;&#114;&#121;&#112;&#105;&#110;&#46;&#105;&#111;">&#105;&#110;&#102;&#111;&#64;&#101;&#118;&#101;&#114;&#121;&#112;&#105;&#110;&#46;&#105;&#111;</a></strong>.</p>
<h4 id="documentation-hardpy_config-connection_only">connection_only<a class="headerlink" href="#documentation-hardpy_config-connection_only" title="Permanent link">&para;</a></h4>
<p>Boolean variable, if set to <code>true</code>, <strong>HardPy</strong> will check the connection
to the <strong>StandCloud</strong> service at each startup before running tests.
The default value is <code>false</code>.</p>
<p>If the connection fails, the tests will not run.</p></section><section class="print-page" id="documentation-database"><h1 id="documentation-database-database">Database<a class="headerlink" href="#documentation-database-database" title="Permanent link">&para;</a></h1>
<h2 id="documentation-database-about">About<a class="headerlink" href="#documentation-database-about" title="Permanent link">&para;</a></h2>
<p>We use CouchDB because it's a simple document-oriented NoSQL database.
The database has two main purposes:</p>
<ul>
<li>Saving test report;</li>
<li><a href="#about-fronted_sync">Data synchronization</a> with the web interface.</li>
</ul>
<p>The CouchDB version must be equal to or greater than the 3.2 version.</p>
<h2 id="documentation-database-database-in-pytest-hardpy">Database in pytest-hardpy<a class="headerlink" href="#documentation-database-database-in-pytest-hardpy" title="Permanent link">&para;</a></h2>
<h3 id="documentation-database-description-of-databases">Description of databases<a class="headerlink" href="#documentation-database-description-of-databases" title="Permanent link">&para;</a></h3>
<p>The pytest plugin has 2 databases: <strong>statestore</strong> and <strong>runstore</strong>.</p>
<ul>
<li>The <strong>statestore</strong> database uses for frontend <a href="#about-fronted_sync">data synchronization</a>.</li>
<li>The <strong>runstore</strong> database contains the document <strong>current</strong>, which is a JSON object
that stores the current state of the test run.</li>
</ul>
<p>A separate database is required to store the list of reports.
The <strong>report</strong> database is used as an example of storing reports on past testing runs.
It can be launched in the same instance as the <strong>statestore</strong>, <strong>runstore</strong> database, or in a different one.
The database is accessed through the <strong>CouchdbLoader</strong> class, which can be called at the end of each launch.
To read the current report, use the <code>get_current_report()</code> function.</p>
<p>Sample code for saving a report at the end of testing:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># conftest.py</span>
<span class="k">def</span> <span class="nf">save_report_to_couchdb</span><span class="p">():</span>
    <span class="n">report</span> <span class="o">=</span> <span class="n">get_current_report</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">report</span><span class="p">:</span>
        <span class="n">loader</span> <span class="o">=</span> <span class="n">CouchdbLoader</span><span class="p">(</span><span class="n">CouchdbConfig</span><span class="p">())</span>
        <span class="n">loader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">report</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">,</span> <span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fill_actions_after_test</span><span class="p">(</span><span class="n">post_run_functions</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
    <span class="n">post_run_functions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">save_report_to_couchdb</span><span class="p">)</span>
    <span class="k">yield</span>
</code></pre></div>
<p><strong>HardPy</strong> users have the flexibility to choose their preferred database.
They can write custom classes to record reports at the end of testing.</p>
<h3 id="documentation-database-runstore-scheme">Runstore scheme<a class="headerlink" href="#documentation-database-runstore-scheme" title="Permanent link">&para;</a></h3>
<p>The <strong>runstore</strong> and <strong>report</strong> databases have the same schema, as <strong>runstore</strong>
stores the current report and <strong>report</strong> stores reports.</p>
<h1 align="center">
    <a class="glightbox" href="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/database/runstore.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/database/runstore.png" alt="runstore_scheme"></a>
</h1>

<p>The <strong>current</strong> document of <strong>runstore</strong> database contains some section.</p>
<h4 id="documentation-database-main">main<a class="headerlink" href="#documentation-database-main" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>_rev</strong>: a CouchDB <a href="https://docs.couchdb.org/en/stable/api/document/common.html">revision MVCC</a> token;
  The variable is assigned automatically.</li>
<li><strong>_id</strong>: unique document identifier.
  The variable is assigned automatically.</li>
<li><strong>stop_time</strong>: the end time of the test in Unix seconds. The variable is assigned automatically.</li>
<li><strong>start_time</strong>: the start time of the test in Unix seconds. The variable is assigned automatically.</li>
<li><strong>status</strong>: test execution status from <strong>pytest</strong>: <strong>passed</strong>, <strong>failed</strong>, <strong>skipped</strong>, <strong>stopped</strong>.
  The variable is assigned automatically.</li>
<li><strong>name</strong>: the name of the test suite. It is displayed in the header of the operator panel.
  The user can specify the name using the <code>tests_name</code> variable in the <strong>hardpy.toml</strong> file.
  If this variable is not set, the name will be taken from the directory name containing the tests.</li>
<li><strong>dut</strong>: DUT information. See the <a href="#documentation-database-dut">dut</a> section for more information.</li>
<li><strong>test_stand</strong>: test stand information. See the <a href="#documentation-database-test_stand">test_stand</a> section for more information.</li>
<li><strong>artifact</strong>: an object that contains information about the artifacts created during the test run.
  The user can specify the run artifact by using <a href="#documentation-pytest_hardpy-set_run_artifact">set_run_artifact</a> function.
  The artifact contains a dictionary where the user can store any data at the test run level.
  The artifacts are not displayed on the operator panel.</li>
<li><strong>modules</strong>: module (pytest files) information. See the <a href="#documentation-database-modules">modules</a> section for more information.</li>
</ul>
<h4 id="documentation-database-test_stand">test_stand<a class="headerlink" href="#documentation-database-test_stand" title="Permanent link">&para;</a></h4>
<p>The <strong>test_stand</strong> section contains information about the test stand.
It is a computer on which <strong>HardPy</strong> is running and to which the DUT test equipment is connected.</p>
<ul>
<li><strong>name</strong> - test stand name. It can only be set once per test run.
  The user can specify the stand name by using <a href="#documentation-pytest_hardpy-set_stand_name">set_stand_name</a> function.</li>
<li><strong>drivers</strong>: information about drivers in the form of a dictionary, including test equipment and test equipment software.
  The user can specify the driver info by using <a href="#documentation-pytest_hardpy-set_driver_info">set_driver_info</a> function.</li>
<li><strong>info</strong>: dictionary containing additional information about the test stand.
  The user can specify the additional info by using <a href="#documentation-pytest_hardpy-set_stand_info">set_stand_info</a> function.</li>
<li><strong>timezone</strong>: timezone of test stand as a string. The variable is assigned automatically.</li>
<li><strong>location</strong>: the location of the test stand, e.g., the country, city, or laboratory number.
  It can only be set once per test run. The user can specify the location by using
  <a href="#documentation-pytest_hardpy-set_stand_location">set_stand_location</a> function.</li>
<li><strong>number</strong>: test stand number. Some stands may have the same name and
  run on the same computer but have different numbers. It can only be set once per test run.
  The user can specify the stand number by using <a href="#documentation-pytest_hardpy-set_stand_number">set_stand_number</a> function.</li>
<li><strong>hw_id</strong>: test stand machine id (GUID) or host name. The variable is assigned automatically by
  the <a href="https://pypi.org/project/py-machineid/">py-machineid</a> package.</li>
</ul>
<h5 id="documentation-database-test_stand-examples">test_stand examples<a class="headerlink" href="#documentation-database-test_stand-examples" title="Permanent link">&para;</a></h5>
<p><strong>Two stands on one computer</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// test stand 1</span>
<span class="nt">&quot;test_stand&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;hw_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;840982098ca2459a7b22cc608eff65d4&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Test stand A&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">  </span><span class="nt">&quot;timezone&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Europe/Helsinki&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;drivers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;driver_1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;state&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;active&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;port&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3000</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;location&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Helsinki&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;number&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="p">},</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">// test stand 2</span>
<span class="nt">&quot;test_stand&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;hw_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;840982098ca2459a7b22cc608eff65d4&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Test stand A&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">  </span><span class="nt">&quot;timezone&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Europe/Helsinki&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;drivers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;driver_1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;state&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;active&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;port&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3000</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;location&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Helsinki&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;number&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span>
<span class="p">},</span>
</code></pre></div>
<p><strong>Two different stands</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// test stand 1</span>
<span class="nt">&quot;test_stand&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;hw_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;840982098ca2459a7b22cc608eff65d4&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ABC&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">  </span><span class="nt">&quot;timezone&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Europe/Helsinki&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;drivers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;voltmeter&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;sw_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.1.3&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;hw_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0.1&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;location&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Laboratory 1&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;number&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span>
<span class="p">},</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">// test stand 2</span>
<span class="nt">&quot;test_stand&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;hw_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;156731093ab759a7b11ac108eaf69d2&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DEF&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">  </span><span class="nt">&quot;timezone&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Europe/Helsinki&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;drivers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">  </span><span class="nt">&quot;location&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Laboratory 2&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;number&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span>
<span class="p">},</span>
</code></pre></div>
<h4 id="documentation-database-dut">dut<a class="headerlink" href="#documentation-database-dut" title="Permanent link">&para;</a></h4>
<p>The device under test section contains information about the DUT.</p>
<ul>
<li><strong>serial_number</strong>: DUT serial number. This identifier is unique to the testing device or board.
  It can only be set once per test run.
  The user can specify the DUT serial number by using <a href="#documentation-pytest_hardpy-set_dut_serial_number">set_dut_serial_number</a> function.</li>
<li><strong>part_number</strong>: DUT part number. This identifier of a particular part design, board or device.
  It can only be set once per test run.
  The user can specify the DUT part number by using <a href="#documentation-pytest_hardpy-set_dut_part_number">set_dut_part_number</a> function.</li>
<li><strong>info</strong>: dictionary containing additional information about the the DUT, such as batch, board revision, etc.
  The user can specify the additional info by using <a href="#documentation-pytest_hardpy-set_dut_info">set_dut_info</a> function.</li>
</ul>
<h5 id="documentation-database-dut-examples">dut examples<a class="headerlink" href="#documentation-database-dut-examples" title="Permanent link">&para;</a></h5>
<p><strong>Testing of two devices of the same type (same part number)</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// dut 1</span>
<span class="nt">&quot;dut&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;serial_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1000-10&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;part_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ABC11&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;board_rev&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;rev_1&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">// dut 2</span>
<span class="nt">&quot;dut&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;serial_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1000-11&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;part_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ABC11&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;board_rev&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;rev_1&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="documentation-database-modules">modules<a class="headerlink" href="#documentation-database-modules" title="Permanent link">&para;</a></h4>
<p>The <strong>modules</strong> section contains the information about tests.
Each module contains information from a single test file.
The module's name is the same as the file's name.</p>
<ul>
<li><strong>test_{module_name}</strong>: an object containing information about a specific module.
  The <code>{module_name}</code> variable is assigned automatically.
  Contains the following fields:</li>
<li><strong>status</strong>: module test execution status. The variable is assigned automatically.</li>
<li><strong>name</strong>: module name, by default the same as module_id.
    The user can specify the module name by using <a href="#documentation-pytest_hardpy-module_name">module_name</a> marker.</li>
<li><strong>start_time</strong>: start time of module testing in Unix seconds. The variable is assigned automatically.</li>
<li><strong>stop_time</strong>: end time of module testing in Unix seconds. The variable is assigned automatically.</li>
<li><strong>artifact</strong>: an object that contains information about the artifacts created during the test module.
    The user can specify the module artifact by using <a href="#documentation-pytest_hardpy-set_module_artifact">set_module_artifact</a> function.
    The artifact contains a dictionary where the user can store any data at the test module level.
    The artifacts are not displayed on the operator panel.</li>
<li><strong>cases</strong>: an object that contains information about each test case within the module.<ul>
<li><strong>test_{case_name}</strong>: an object containing information about a specific case.
  The <code>{case_name}</code> variable is assigned automatically.
  Contains the following fields:</li>
<li><strong>status</strong>: test case execution status. The variable is assigned automatically.</li>
<li><strong>name</strong>: case name, by default the same as case_id.
    The user can specify the case name by using <a href="#documentation-pytest_hardpy-case_name">case_name</a> marker.</li>
<li><strong>start_time</strong>: start time of case testing in Unix seconds. The variable is assigned automatically.</li>
<li><strong>stop_time</strong>: end time of case testing in Unix seconds. The variable is assigned automatically.</li>
<li><strong>assertion_msg</strong>: assert or error message if the test case fails. The variable is assigned automatically.
    However, the user can write their own message in case of an assertion, which will be written to this variable.
    For example:
    <div class="highlight"><pre><span></span><code><span class="k">assert</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;This is an example&quot;</span>
</code></pre></div>
    The <strong>assertion_msg</strong> is displayed in the operator panel next to the test case in which it was called.</li>
<li><strong>msg</strong>: the log message is displayed in the operator panel next to the test case in which it was called.
    The user can specify and update current message by using <a href="#documentation-pytest_hardpy-set_message">set_message</a> function.</li>
<li><strong>artifact</strong>: an object that contains information about the artifacts created during the test case.
    The user can specify the case artifact by using <a href="#documentation-pytest_hardpy-set_case_artifact">set_case_artifact</a> function.
    The artifact contains a dictionary where the user can store any data at the test case level.
    The artifacts are not displayed on the operator panel.</li>
</ul>
</li>
</ul>
<h3 id="documentation-database-report-example">Report example<a class="headerlink" href="#documentation-database-report-example" title="Permanent link">&para;</a></h3>
<p>Example of a <strong>current</strong> document:</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;_rev&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;44867-3888ae85c19c428cc46685845953b483&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;current&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;stop_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1695817266</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;start_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1695817263</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;failed&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;hardpy-stand&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;dut&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;serial_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;92c5a4bb-ecb0-42c5-89ac-e0caca0919fd&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;part_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;part_1&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;batch&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;test_batch&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;board_rev&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;rev_1&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;test_stand&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;hw_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;840982098ca2459a7b22cc608eff65d4&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;test_stand_1&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;geo&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Belgrade&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;timezone&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Europe/Belgrade&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;drivers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;driver_1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;driver info&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;driver_2&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;state&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;active&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;port&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">8000</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;location&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Belgrade_1&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;number&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;artifact&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nt">&quot;modules&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;test_1_a&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;failed&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Module 1&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;start_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1695816884</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;stop_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1695817265</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;artifact&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">          </span><span class="nt">&quot;cases&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;test_dut_info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;passed&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DUT info&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;start_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1695817263</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;stop_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1695817264</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;assertion_msg&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;msg&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;artifact&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;test_minute_parity&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;failed&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Test 1&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;start_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1695817264</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;stop_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1695817264</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;assertion_msg&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The test failed because minute 21 is odd! Try again!&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;msg&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="s2">&quot;Current minute 21&quot;</span>
<span class="w">              </span><span class="p">],</span>
<span class="w">              </span><span class="nt">&quot;artifact&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;data_str&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;123DATA&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;data_int&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">12345</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;data_dict&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;test_key&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;456DATA&quot;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">              </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div>
<h2 id="documentation-database-couchdb-instance">CouchDB instance<a class="headerlink" href="#documentation-database-couchdb-instance" title="Permanent link">&para;</a></h2>
<p>This section explains how to launch and manage a CouchDB instance.
After launching the database, it becomes available at the following address:</p>
<blockquote>
<p><a href="http://localhost:5984/_utils/">http://localhost:5984/_utils/</a></p>
</blockquote>
<p>The internal settings of the database are contained in the <strong>couchDB.ini</strong> configuration file.
It contains settings that define the behavior and operating parameters of the database.</p>
<h3 id="documentation-database-running-couchdb-with-docker-compose">Running CouchDB with Docker Compose<a class="headerlink" href="#documentation-database-running-couchdb-with-docker-compose" title="Permanent link">&para;</a></h3>
<p>An example configuration for running CouchDB via Docker Compose is located in
the <code>example/database/couchdb</code> folder.
A shortened version of the instructions is described below.</p>
<ol>
<li>Create a <code>docker</code> directory in the project's root directory.</li>
<li>Create a <code>couchdb.ini</code> file in the <code>docker</code> directory.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><span class="k">[chttpd]</span>
<span class="na">enable_cors</span><span class="o">=</span><span class="s">true</span>

<span class="k">[cors]</span>
<span class="na">origins</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">*</span>
<span class="na">methods</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">GET, PUT, POST, HEAD, DELETE</span>
<span class="na">credentials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">true</span>
<span class="na">headers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">accept, authorization, content-type, origin, referer, x-csrf-token</span>
</code></pre></div>
3. Create a <code>docker-compose.yaml</code> file in project's root directory.</p>
<p><div class="highlight"><pre><span></span><code><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3.8&quot;</span>

<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">couchserver</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">couchdb:3.4</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;5984:5984&quot;</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">COUCHDB_USER</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dev</span>
<span class="w">      </span><span class="nt">COUCHDB_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dev</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./docker/dbdata:/opt/couchdb/data</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./docker/couchdb.ini:/opt/couchdb/etc/local.ini</span>
</code></pre></div>
4. Run <strong>docker compose</strong> in the root directory.</p>
<p><div class="highlight"><pre><span></span><code>docker<span class="w"> </span>compose<span class="w"> </span>up
</code></pre></div>
5. To stop the database, run the command:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>compose<span class="w"> </span>down
</code></pre></div>
<h3 id="documentation-database-running-couchdb-with-docker">Running CouchDB with Docker<a class="headerlink" href="#documentation-database-running-couchdb-with-docker" title="Permanent link">&para;</a></h3>
<ol>
<li>Create <code>couchdb.ini</code> file.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><span class="k">[chttpd]</span>
<span class="na">enable_cors</span><span class="o">=</span><span class="s">true</span>

<span class="k">[cors]</span>
<span class="na">origins</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">*</span>
<span class="na">methods</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">GET, PUT, POST, HEAD, DELETE</span>
<span class="na">credentials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">true</span>
<span class="na">headers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">accept, authorization, content-type, origin, referer, x-csrf-token</span>
</code></pre></div>
2. The Docker version must be 24.0.0 or higher. Run the Docker container (from the folder with the couchdb.ini file):</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>--name<span class="w"> </span>couchdb<span class="w"> </span>-p<span class="w"> </span><span class="m">5984</span>:5984<span class="w"> </span>-e<span class="w"> </span><span class="nv">COUCHDB_USER</span><span class="o">=</span>dev<span class="w"> </span>-e<span class="w"> </span><span class="nv">COUCHDB_PASSWORD</span><span class="o">=</span>dev<span class="w"> </span>-v<span class="w"> </span>./couchdb.ini:/opt/couchdb/etc/local.ini<span class="w"> </span>couchdb:3.4
</code></pre></div>
<p>Command for Windows:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>--name<span class="w"> </span>couchdb<span class="w"> </span>-p<span class="w"> </span><span class="m">5984</span>:5984<span class="w"> </span>-e<span class="w"> </span><span class="nv">COUCHDB_USER</span><span class="o">=</span>dev<span class="w"> </span>-e<span class="w"> </span><span class="nv">COUCHDB_PASSWORD</span><span class="o">=</span>dev<span class="w"> </span>-v<span class="w"> </span>.<span class="se">\c</span>ouchdb.ini:/opt/couchdb/etc/local.ini<span class="w"> </span>couchdb:3.4
</code></pre></div>
<p>The container will be deleted after use.</p>
<h3 id="documentation-database-running-couchdb-with-binary-packages-in-linux">Running CouchDB with binary packages in Linux<a class="headerlink" href="#documentation-database-running-couchdb-with-binary-packages-in-linux" title="Permanent link">&para;</a></h3>
<ol>
<li>Use this <a href="https://docs.couchdb.org/en/stable/install/unix.html#installation-using-the-apache-couchdb-convenience-binary-packages">instruction</a> to install CouchDB.</li>
<li>The installer asks you if you want to install CouchDB as a standalone
application or in a clustered configuration.
Select <code>Standalone</code> and press Enter.</li>
<li>You are prompted to enter the Erlang Node Name.
You can ask it in Terminal with the command <code>hostname -f</code>.</li>
<li>Set the Erlang Magic Cookie.
This is a unique identifier, for example, <code>test1234</code>.</li>
<li>Configure the network interfaces on which CouchDB will be bound
<code>localhost</code> is fine.</li>
<li>Enter an admin password of your choice for CouchDB, press <code>Enter</code>, re-type the password
and press <code>Enter</code> again to continue the installation.</li>
<li>After launching the database, it becomes available at the following
address <a href="http://localhost:5984/_utils/">http://localhost:5984/_utils/</a>.
Open it.</li>
<li>First of all, in the <code>User Management</code> section in the <code>Create Admins</code> tab,
create a user with the login <code>dev</code> and password <code>dev</code>.</li>
<li>In the <code>Config</code> choose <code>CORS</code> and appoint <code>Enable CORS</code> with <code>All domains</code>.</li>
</ol>
<h4 id="documentation-database-to-disable-the-couchdb-service">To disable the CouchDB service:<a class="headerlink" href="#documentation-database-to-disable-the-couchdb-service" title="Permanent link">&para;</a></h4>
<p>Remove packages:
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>remove<span class="w"> </span>--purge<span class="w"> </span>couchdb
</code></pre></div>
Remove GPG keys and repository:
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>rm<span class="w"> </span>/usr/share/keyrings/couchdb-archive-keyring.gpg
sudo<span class="w"> </span>rm<span class="w"> </span>/etc/apt/sources.list.d/couchdb.list
</code></pre></div>
Clean APT cache:
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>clean
</code></pre></div>
Disable service:
<div class="highlight"><pre><span></span><code>systemctl<span class="w"> </span>stop<span class="w"> </span>couchdb.service
systemctl<span class="w"> </span>disable<span class="w"> </span>couchdb.service
systemctl<span class="w"> </span>daemon-reload
systemctl<span class="w"> </span>reset-failed
</code></pre></div></p>
<h3 id="documentation-database-running-couchdb-with-binary-packages-in-windows">Running CouchDB with binary packages in Windows<a class="headerlink" href="#documentation-database-running-couchdb-with-binary-packages-in-windows" title="Permanent link">&para;</a></h3>
<ol>
<li>Use this <a href="https://docs.couchdb.org/en/stable/install/windows.html#installation-on-windows">instruction</a> to install CouchDB.</li>
<li>Be sure to install CouchDB to a path with no spaces, such as <code>C:\CouchDB</code>.</li>
<li>Create a user with the login <code>dev</code> and password <code>dev</code> during the installation steps. Validate Credentials.</li>
<li>Generate Random Cookie.</li>
<li>After launching the database, it becomes available at the following address <a href="http://localhost:5984/_utils/">http://localhost:5984/_utils/</a>.
Open it.</li>
<li>In the <code>Config</code> choose <code>CORS</code> and appoint <code>Enable CORS</code> with <code>All domains</code>.</li>
</ol></section><section class="print-page" id="documentation-hardpy_panel"><h1 id="documentation-hardpy_panel-hardpy-panel">HardPy panel<a class="headerlink" href="#documentation-hardpy_panel-hardpy-panel" title="Permanent link">&para;</a></h1>
<p>The <strong>hardpy panel</strong> or operator panel is a web interface that displays and controls the testing process in <strong>HardPy</strong>.</p>
<h2 id="documentation-hardpy_panel-capability">Capability<a class="headerlink" href="#documentation-hardpy_panel-capability" title="Permanent link">&para;</a></h2>
<p><strong>HardPy panel</strong> allows you to:</p>
<ul>
<li>Start and stop testing;</li>
<li>Interact with <a href="#documentation-hardpy_panel-dialog-box">dialog box</a> during testing;</li>
<li>Browse:<ul>
<li>Test suite name.</li>
<li>Last test run status.</li>
<li>Test module name.</li>
<li>Duration of test modules execution.</li>
<li>Test module status.</li>
<li>Test case name.</li>
<li>Test case message.</li>
<li>Test case status.</li>
</ul>
</li>
<li>Browse current <a href="#documentation-database-statestore-scheme">statestore</a> state in debug mode.</li>
</ul>
<h3 id="documentation-hardpy_panel-languages">Languages<a class="headerlink" href="#documentation-hardpy_panel-languages" title="Permanent link">&para;</a></h3>
<p>You can set one of the following operator panel languages ​​via the <a href="#documentation-hardpy_config-language">configuration file</a>:</p>
<ul>
<li>English ("en")</li>
<li>German ("de")</li>
<li>French ("fr")</li>
<li>Spanish ("es")</li>
<li>Chinese ("zh")</li>
<li>Japanese ("ja")</li>
<li>Russian ("ru")</li>
</ul>
<h2 id="documentation-hardpy_panel-usage">Usage<a class="headerlink" href="#documentation-hardpy_panel-usage" title="Permanent link">&para;</a></h2>
<h3 id="documentation-hardpy_panel-launch-operator-panel">Launch operator panel<a class="headerlink" href="#documentation-hardpy_panel-launch-operator-panel" title="Permanent link">&para;</a></h3>
<p>Use the <a href="#documentation-cli-hardpy-run">hardpy run</a> command to start the web server.
After this open page <a href="http://localhost:8000/">http://localhost:8000/</a> in the browser.</p>
<p>When the operator panel is running, you can run tests through the web interface or through
the pytest launcher (in a terminal or from another application).</p>
<h3 id="documentation-hardpy_panel-start-and-stop-tests">Start and stop tests<a class="headerlink" href="#documentation-hardpy_panel-start-and-stop-tests" title="Permanent link">&para;</a></h3>
<p>The operator panel contains a test start/stop button in the lower right corner of the screen.
The user can start/stop tests using the space key.</p>
<h3 id="documentation-hardpy_panel-operator-panel-bar">Operator panel bar<a class="headerlink" href="#documentation-hardpy_panel-operator-panel-bar" title="Permanent link">&para;</a></h3>
<p>Operator panel bar displays key system status information in a compact tag-based format.</p>
<p><strong>Fields:</strong></p>
<ul>
<li><strong>Stand name</strong> - name of the test stand;</li>
<li><strong>Status</strong> - current system status;</li>
<li><strong>Start time</strong> - test/operation start timestamp with timezone;</li>
<li><strong>Finish time</strong> - completion timestamp with timezone;</li>
<li><strong>Alert</strong> - active warning or error message;</li>
<li><strong>Test stand info</strong> - additional test stand parameters
  from <a href="#documentation-pytest_hardpy-set_dut_info">set_dut_info</a> info;</li>
</ul>
<p>All fields appear as minimal tags and only display when data is available.</p>
<h3 id="documentation-hardpy_panel-settings">Settings<a class="headerlink" href="#documentation-hardpy_panel-settings" title="Permanent link">&para;</a></h3>
<p>The operator panel contains a setting button in the top right corner.</p>
<h4 id="documentation-hardpy_panel-debug-mode">debug mode<a class="headerlink" href="#documentation-hardpy_panel-debug-mode" title="Permanent link">&para;</a></h4>
<p>The user can view the <strong>statestore</strong> database online by clicking on
the <strong>Turn on the debug mode</strong> button.</p>
<p>Debug mode is disabled by default.</p>
<h4 id="documentation-hardpy_panel-sound">sound<a class="headerlink" href="#documentation-hardpy_panel-sound" title="Permanent link">&para;</a></h4>
<p>The user can turn on the sound of the end of the test by clicking on
the <strong>Turn on the sound</strong> button.</p>
<p>Sound is disabled by default.</p>
<h3 id="documentation-hardpy_panel-dialog-box">Dialog box<a class="headerlink" href="#documentation-hardpy_panel-dialog-box" title="Permanent link">&para;</a></h3>
<p>For user interaction with the test, it is possible to use dialog boxes.
An example of usage can be seen in the example <a href="#examples-dialog_box">dialog box</a> and in <a href="#documentation-pytest_hardpy-run_dialog_box">dialog box documentation</a>.
Currently, there are some types of dialog boxes.</p>
<p>Each dialog box can contain an image.</p>
<ul>
<li>Allows the width to be changed using the <code>width</code> parameter.</li>
<li>Allows changing the border thickness with the <code>border</code> parameter.</li>
<li>Allow the following image types: gif, jpeg, pjpeg, png, svg+xml, tiff, vnd.microsoft.icon, vnd.wap.wbmp, webp.</li>
</ul>
<h4 id="documentation-hardpy_panel-basic-dialog-box">basic dialog box<a class="headerlink" href="#documentation-hardpy_panel-basic-dialog-box" title="Permanent link">&para;</a></h4>
<p>Contains an instruction or question and a <code>confirm</code> button for confirmation.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:4"><input checked="checked" id="documentation-hardpy_panel-__tabbed_1_1" name="documentation-hardpy_panel-__tabbed_1" type="radio" /><input id="documentation-hardpy_panel-__tabbed_1_2" name="documentation-hardpy_panel-__tabbed_1" type="radio" /><input id="documentation-hardpy_panel-__tabbed_1_3" name="documentation-hardpy_panel-__tabbed_1" type="radio" /><input id="documentation-hardpy_panel-__tabbed_1_4" name="documentation-hardpy_panel-__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="documentation-hardpy_panel-__tabbed_1_1">Widget</label><label for="documentation-hardpy_panel-__tabbed_1_2">Widget with image</label><label for="documentation-hardpy_panel-__tabbed_1_3">Widget with HTML with link</label><label for="documentation-hardpy_panel-__tabbed_1_4">Widget with HTML with raw code</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><h1 align="center">
    <a class="glightbox" href="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/base_dialog_box.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/base_dialog_box.png" alt="base_dialog_box"></a>
</h1></p>
</div>
<div class="tabbed-block">
<p><h1 align="center">
    <a class="glightbox" href="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/base_dbx_with_image.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/base_dbx_with_image.png" alt="base_dialog_box_with_image"></a>
</h1></p>
</div>
<div class="tabbed-block">
<p><h1 align="center">
    <a class="glightbox" href="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dbx_with_html_link.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dbx_with_html_link.png" alt="base_dialog_box_with_html_link"></a>
</h1></p>
</div>
<div class="tabbed-block">
<p><h1 align="center">
    <a class="glightbox" href="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dbx_with_html_raw_code.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dbx_with_html_raw_code.png" alt="base_dialog_box_with_html_raw_code"></a>
</h1></p>
</div>
</div>
</div>
<h4 id="documentation-hardpy_panel-text-input-field">text input field<a class="headerlink" href="#documentation-hardpy_panel-text-input-field" title="Permanent link">&para;</a></h4>
<p>Contains an instruction or question, a text input field, and a <code>confirm</code> button for confirmation.
The text is transmitted in UTF-8 encoding.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:3"><input checked="checked" id="documentation-hardpy_panel-__tabbed_2_1" name="documentation-hardpy_panel-__tabbed_2" type="radio" /><input id="documentation-hardpy_panel-__tabbed_2_2" name="documentation-hardpy_panel-__tabbed_2" type="radio" /><input id="documentation-hardpy_panel-__tabbed_2_3" name="documentation-hardpy_panel-__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="documentation-hardpy_panel-__tabbed_2_1">Widget</label><label for="documentation-hardpy_panel-__tabbed_2_2">Widget with image</label><label for="documentation-hardpy_panel-__tabbed_2_3">Widget with HTML</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><h1 align="center">
    <a class="glightbox" href="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/text_input_dialog_box.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/text_input_dialog_box.png" alt="text_input_dialog_box"></a>
</h1></p>
</div>
<div class="tabbed-block">
<p><h1 align="center">
    <a class="glightbox" href="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dbx_with_text_input_and_image.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dbx_with_text_input_and_image.png" alt="text_input_dialog_box_with_image"></a>
</h1></p>
</div>
<div class="tabbed-block">
<p><h1 align="center">
    <a class="glightbox" href="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dbx_with_text_input_and_html.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dbx_with_text_input_and_html.png" alt="text_input_dialog_box_with_html"></a>
</h1></p>
</div>
</div>
</div>
<h4 id="documentation-hardpy_panel-number-input-field">number input field<a class="headerlink" href="#documentation-hardpy_panel-number-input-field" title="Permanent link">&para;</a></h4>
<p>Contains an instruction or question, a number input field, and a <code>confirm</code> button for confirmation.</p>
<ul>
<li>Allows float numbers with a dot separator.</li>
<li>Allows negative numbers.</li>
<li>Allows numbers to be entered using <strong>E notation</strong> with <code>e</code>, e.g. <code>2e3</code>.</li>
<li>The entered numbers will be converted to float.</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="3:3"><input checked="checked" id="documentation-hardpy_panel-__tabbed_3_1" name="documentation-hardpy_panel-__tabbed_3" type="radio" /><input id="documentation-hardpy_panel-__tabbed_3_2" name="documentation-hardpy_panel-__tabbed_3" type="radio" /><input id="documentation-hardpy_panel-__tabbed_3_3" name="documentation-hardpy_panel-__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="documentation-hardpy_panel-__tabbed_3_1">Widget</label><label for="documentation-hardpy_panel-__tabbed_3_2">Widget with image</label><label for="documentation-hardpy_panel-__tabbed_3_3">Widget with html</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><h1 align="center">
    <a class="glightbox" href="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/num_input_dialog_box.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/num_input_dialog_box.png" alt="num_input_dialog_box"></a>
</h1></p>
</div>
<div class="tabbed-block">
<p><h1 align="center">
    <a class="glightbox" href="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dbx_with_num_input_and_image.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dbx_with_num_input_and_image.png" alt="num_input_dialog_box_with_image"></a>
</h1></p>
</div>
<div class="tabbed-block">
<p><h1 align="center">
    <a class="glightbox" href="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dbx_with_num_input_and_html.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dbx_with_num_input_and_html.png" alt="num_input_dialog_box_with_html"></a>
</h1></p>
</div>
</div>
</div>
<h4 id="documentation-hardpy_panel-radiobutton">radiobutton<a class="headerlink" href="#documentation-hardpy_panel-radiobutton" title="Permanent link">&para;</a></h4>
<p>Contains radiobutton widget.</p>
<ul>
<li>The user selects one option from several possible ones.</li>
<li>Returns the contents of the selected item as a string.</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="4:3"><input checked="checked" id="documentation-hardpy_panel-__tabbed_4_1" name="documentation-hardpy_panel-__tabbed_4" type="radio" /><input id="documentation-hardpy_panel-__tabbed_4_2" name="documentation-hardpy_panel-__tabbed_4" type="radio" /><input id="documentation-hardpy_panel-__tabbed_4_3" name="documentation-hardpy_panel-__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="documentation-hardpy_panel-__tabbed_4_1">Widget</label><label for="documentation-hardpy_panel-__tabbed_4_2">Widget with image</label><label for="documentation-hardpy_panel-__tabbed_4_3">Widget with html</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><h1 align="center">
    <a class="glightbox" href="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/radiobutton_dialog_box.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/radiobutton_dialog_box.png" alt="radiobutton_dialog_box"></a>
</h1></p>
</div>
<div class="tabbed-block">
<p><h1 align="center">
    <a class="glightbox" href="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dbx_with_radio_and_image.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dbx_with_radio_and_image.png" alt="radiobutton_dialog_box_with_image"></a>
</h1></p>
</div>
<div class="tabbed-block">
<p><h1 align="center">
    <a class="glightbox" href="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dbx_with_radio_and_html.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dbx_with_radio_and_html.png" alt="radiobutton_dialog_box_with_html"></a>
</h1></p>
</div>
</div>
</div>
<h4 id="documentation-hardpy_panel-checkbox">checkbox<a class="headerlink" href="#documentation-hardpy_panel-checkbox" title="Permanent link">&para;</a></h4>
<p>Contains checkbox widget.</p>
<ul>
<li>The user selects several options from several possible ones.</li>
<li>Returns a list with the contents of the selected items.</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="5:3"><input checked="checked" id="documentation-hardpy_panel-__tabbed_5_1" name="documentation-hardpy_panel-__tabbed_5" type="radio" /><input id="documentation-hardpy_panel-__tabbed_5_2" name="documentation-hardpy_panel-__tabbed_5" type="radio" /><input id="documentation-hardpy_panel-__tabbed_5_3" name="documentation-hardpy_panel-__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="documentation-hardpy_panel-__tabbed_5_1">Widget</label><label for="documentation-hardpy_panel-__tabbed_5_2">Widget with image</label><label for="documentation-hardpy_panel-__tabbed_5_3">Widget with html</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><h1 align="center">
    <a class="glightbox" href="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/checkbox_dialog_box.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/checkbox_dialog_box.png" alt="checkbox_dialog_box"></a>
</h1></p>
</div>
<div class="tabbed-block">
<p><h1 align="center">
    <a class="glightbox" href="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dbx_with_checkbox_and_image.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dbx_with_checkbox_and_image.png" alt="checkbox_dialog_box_with_image"></a>
</h1></p>
</div>
<div class="tabbed-block">
<p><h1 align="center">
    <a class="glightbox" href="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dbx_with_checkbox_and_html.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dbx_with_checkbox_and_html.png" alt="checkbox_dialog_box_with_html"></a>
</h1></p>
</div>
</div>
</div>
<h4 id="documentation-hardpy_panel-multiple-steps">multiple steps<a class="headerlink" href="#documentation-hardpy_panel-multiple-steps" title="Permanent link">&para;</a></h4>
<p>Contains an instruction with multiple steps and <code>confirm</code> button for confirmation.
Allows steps with text and image.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:3"><input checked="checked" id="documentation-hardpy_panel-__tabbed_6_1" name="documentation-hardpy_panel-__tabbed_6" type="radio" /><input id="documentation-hardpy_panel-__tabbed_6_2" name="documentation-hardpy_panel-__tabbed_6" type="radio" /><input id="documentation-hardpy_panel-__tabbed_6_3" name="documentation-hardpy_panel-__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="documentation-hardpy_panel-__tabbed_6_1">Step 1</label><label for="documentation-hardpy_panel-__tabbed_6_2">Step 2</label><label for="documentation-hardpy_panel-__tabbed_6_3">Step 3</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><h1 align="center">
    <a class="glightbox" href="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dialog_box_with_steps.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dialog_box_with_steps.png" alt="dialog_box_with_steps"></a>
</h1></p>
</div>
<div class="tabbed-block">
<p><h1 align="center">
    <a class="glightbox" href="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dialog_box_with_step_with_image.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dialog_box_with_step_with_image.png" alt="dialog_box_with_step_with_image"></a>
</h1></p>
</div>
<div class="tabbed-block">
<p><h1 align="center">
    <a class="glightbox" href="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dialog_box_with_step_with_html.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dialog_box_with_step_with_html.png" alt="dialog_box_with_step_with_html"></a>
</h1></p>
</div>
</div>
</div>
<h3 id="documentation-hardpy_panel-operator-message">Operator message<a class="headerlink" href="#documentation-hardpy_panel-operator-message" title="Permanent link">&para;</a></h3>
<p>The messages to the operator are similar to <a href="#documentation-hardpy_panel-dialog-box">dialog boxes</a>,
but do not contain a <strong>Confirm</strong> button and can be called outside
the execution of the test plan, for example in case of exception
catching in the <code>conftest.py</code> file.
For more information, see the example <a href="#examples-operator_msg">operator message</a>
or in the function description <a href="#documentation-pytest_hardpy-set_operator_message">set_operator_message</a>.</p>
<h4 id="documentation-hardpy_panel-warning-window">warning window<a class="headerlink" href="#documentation-hardpy_panel-warning-window" title="Permanent link">&para;</a></h4>
<p>If the user clicks <code>confirm</code> without entering anything, a warning window will be displayed.</p>
<h1 align="center">
    <a class="glightbox" href="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dialog_box_alert.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dialog_box_alert.png" alt="alert"></a>
</h1>

<h4 id="documentation-hardpy_panel-error-notification">error notification<a class="headerlink" href="#documentation-hardpy_panel-error-notification" title="Permanent link">&para;</a></h4>
<p>If the user closes the dialog box (using the cross in the upper right corner),
the tests will be stopped, an error message will be displayed.</p>
<h1 align="center">
    <a class="glightbox" href="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dialog_box_notification.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dialog_box_notification.png" alt="notification"></a>
</h1></section><section class="print-page" id="documentation-pytest_hardpy"><h1 id="documentation-pytest_hardpy-pytest-hardpy">pytest-hardpy<a class="headerlink" href="#documentation-pytest_hardpy-pytest-hardpy" title="Permanent link">&para;</a></h1>
<p><strong>pytest-hardpy</strong> is a pytest plugin that helps you save test data in a
database for test reporting and viewing test data in the web interface.</p>
<h2 id="documentation-pytest_hardpy-plugin-registration">Plugin registration<a class="headerlink" href="#documentation-pytest_hardpy-plugin-registration" title="Permanent link">&para;</a></h2>
<p>To use the <strong>pytest-hardpy</strong> you need to enable it.
You can do this via the <code>pytest.ini</code> file.</p>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># pytest.ini</span>
<span class="k">[pytest]</span>
<span class="na">addopts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">--hardpy-pt</span>
</code></pre></div>
<p>Another way to enable a plugin without <code>pytest.ini</code> file is to run tests with the option <code>--hardpy-pt</code>.</p>
<div class="highlight"><pre><span></span><code>pytest<span class="w"> </span>--hardpy-pt<span class="w"> </span>tests
</code></pre></div>
<p>If tests are run via <a href="#documentation-hardpy_panel">hardpy panel</a>, then the pytest-hardpy plugin will be enabled for tests by default.</p>
<h2 id="documentation-pytest_hardpy-functions">Functions<a class="headerlink" href="#documentation-pytest_hardpy-functions" title="Permanent link">&para;</a></h2>
<h4 id="documentation-pytest_hardpy-set_dut_info">set_dut_info<a class="headerlink" href="#documentation-pytest_hardpy-set_dut_info" title="Permanent link">&para;</a></h4>
<p>This function records a dictionary containing information about the test stand.
When called again, the information will be added to DB.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li><code>info</code> <em>(dict)</em>: DUT info</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">test_dut_info</span><span class="p">():</span>
    <span class="n">set_dut_info</span><span class="p">({</span><span class="s2">&quot;batch&quot;</span><span class="p">:</span> <span class="s2">&quot;test_batch&quot;</span><span class="p">,</span> <span class="s2">&quot;board_rev&quot;</span><span class="p">:</span> <span class="s2">&quot;rev_1&quot;</span><span class="p">})</span>
</code></pre></div>
<h4 id="documentation-pytest_hardpy-set_dut_serial_number">set_dut_serial_number<a class="headerlink" href="#documentation-pytest_hardpy-set_dut_serial_number" title="Permanent link">&para;</a></h4>
<p>Writes a string with a serial number.
When called again, the exception <code>DuplicateSerialNumberError</code> will be caused.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li><code>serial_number</code> <em>(str)</em>: DUT serial number</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">test_serial_number</span><span class="p">():</span>
    <span class="n">set_dut_serial_number</span><span class="p">(</span><span class="s2">&quot;1234&quot;</span><span class="p">)</span>
</code></pre></div>
<h4 id="documentation-pytest_hardpy-set_dut_part_number">set_dut_part_number<a class="headerlink" href="#documentation-pytest_hardpy-set_dut_part_number" title="Permanent link">&para;</a></h4>
<p>Writes a string with a part number.
When called again, the exception <code>DuplicatePartNumberError</code> will be caused.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li><code>part_number</code> <em>(str)</em>: DUT part number</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">test_part_number</span><span class="p">():</span>
    <span class="n">set_dut_part_number</span><span class="p">(</span><span class="s2">&quot;part_1&quot;</span><span class="p">)</span>
</code></pre></div>
<h4 id="documentation-pytest_hardpy-set_stand_name">set_stand_name<a class="headerlink" href="#documentation-pytest_hardpy-set_stand_name" title="Permanent link">&para;</a></h4>
<p>Writes a string with a test stand name.
When called again, the exception <code>DuplicateTestStandNameError</code> will be caused.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li><code>name</code> <em>(str)</em>: test stand name</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">test_stand_name</span><span class="p">():</span>
    <span class="n">set_stand_name</span><span class="p">(</span><span class="s2">&quot;name 1&quot;</span><span class="p">)</span>
</code></pre></div>
<h4 id="documentation-pytest_hardpy-set_stand_info">set_stand_info<a class="headerlink" href="#documentation-pytest_hardpy-set_stand_info" title="Permanent link">&para;</a></h4>
<p>Writes a dictionary with information about the test stand.
When called again, the information will be added to DB.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li><code>info</code> <em>(dict)</em>: test stand info</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">test_stand_info</span><span class="p">():</span>
    <span class="n">set_stand_info</span><span class="p">({</span><span class="s2">&quot;some_info&quot;</span><span class="p">:</span> <span class="s2">&quot;123&quot;</span><span class="p">})</span>
</code></pre></div>
<h4 id="documentation-pytest_hardpy-set_stand_location">set_stand_location<a class="headerlink" href="#documentation-pytest_hardpy-set_stand_location" title="Permanent link">&para;</a></h4>
<p>Writes a string with a test stand location.
When called again, the exception <code>DuplicateTestStandLocationError</code> will be caused.</p>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">test_stand_info</span><span class="p">():</span>
    <span class="n">set_stand_location</span><span class="p">(</span><span class="s2">&quot;Moon&quot;</span><span class="p">)</span>
</code></pre></div>
<h4 id="documentation-pytest_hardpy-set_stand_number">set_stand_number<a class="headerlink" href="#documentation-pytest_hardpy-set_stand_number" title="Permanent link">&para;</a></h4>
<p>Writes a integer number with a test stand number.
When called again, the exception <code>DuplicateTestStandNumberError</code> will be caused.
When called with negative or non-integer number, the exception <code>TestStandNumberError</code> will be caused.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li><code>number</code> <em>(int)</em>: test stand number</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">test_stand_number</span><span class="p">():</span>
    <span class="n">set_stand_number</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</code></pre></div>
<h4 id="documentation-pytest_hardpy-set_driver_info">set_driver_info<a class="headerlink" href="#documentation-pytest_hardpy-set_driver_info" title="Permanent link">&para;</a></h4>
<p>The function records a dictionary containing information about the test stand driver.
The data is updated with new information each time the function is called.</p>
<p>Driver data is stored in both <strong>statestore</strong> and <strong>runstore</strong> databases.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li><code>drivers</code> <em>(dict)</em>: A dictionary of drivers, where keys are driver names and values are driver-specific data.</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">test_driver_info</span><span class="p">():</span>
    <span class="n">drivers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;driver_1&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Driver A&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;network&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">set_driver_info</span><span class="p">(</span><span class="n">drivers</span><span class="p">)</span>
</code></pre></div>
<h4 id="documentation-pytest_hardpy-set_case_artifact">set_case_artifact<a class="headerlink" href="#documentation-pytest_hardpy-set_case_artifact" title="Permanent link">&para;</a></h4>
<p>Writes a dictionary with a test case artifact.
When called again, the data will be added to DB.</p>
<p>Artifacts are saved only in the <strong>runstore</strong> database
because the state in <strong>statestore</strong> and case artifact must be separated.</p>
<p>The <code>set_case_artifact</code> function must be called from a test case.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li><code>data</code> <em>(dict)</em>: data</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">test_case_artifact</span><span class="p">():</span>
    <span class="n">set_case_artifact</span><span class="p">({</span><span class="s2">&quot;data_str&quot;</span><span class="p">:</span> <span class="s2">&quot;123DATA&quot;</span><span class="p">})</span>
</code></pre></div>
<h4 id="documentation-pytest_hardpy-set_module_artifact">set_module_artifact<a class="headerlink" href="#documentation-pytest_hardpy-set_module_artifact" title="Permanent link">&para;</a></h4>
<p>Writes a dictionary with a module test artifact.
When called again, the data will be added to DB.</p>
<p>Artifacts are saved only in the <strong>runstore</strong> database
because the state in <strong>statestore</strong> and module artifact must be separated.</p>
<p>The <code>set_module_artifact</code> function must be called from a test case.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li><code>data</code> <em>(dict)</em>: data</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">test_module_artifact</span><span class="p">():</span>
    <span class="n">set_module_artifact</span><span class="p">({</span><span class="s2">&quot;data_str&quot;</span><span class="p">:</span> <span class="s2">&quot;456DATA&quot;</span><span class="p">})</span>
</code></pre></div>
<h4 id="documentation-pytest_hardpy-set_run_artifact">set_run_artifact<a class="headerlink" href="#documentation-pytest_hardpy-set_run_artifact" title="Permanent link">&para;</a></h4>
<p>Writes a dictionary with a test run artifact.
When called again, the data will be added to DB.</p>
<p>Artifacts are saved only in the <strong>runstore</strong> database
because the state in <strong>statestore</strong> and run artifact must be separated.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li><code>data</code> <em>(dict)</em>: data</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">test_run_artifact</span><span class="p">():</span>
    <span class="n">set_run_artifact</span><span class="p">({</span><span class="s2">&quot;data_str&quot;</span><span class="p">:</span> <span class="s2">&quot;789DATA&quot;</span><span class="p">})</span>
</code></pre></div>
<h4 id="documentation-pytest_hardpy-set_message">set_message<a class="headerlink" href="#documentation-pytest_hardpy-set_message" title="Permanent link">&para;</a></h4>
<p>Writes a string with a message.
If a message is sent without a key, the key will be generated
automatically and the messages will be appended.
If the message is sent with a known key, it will be updated.</p>
<p>The <code>set_message</code> function must be called from a test case.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li><code>msg</code> <em>(str)</em>: Message content.</li>
<li><code>msg_key</code> <em>(Optional[str])</em>: Message ID. If not specified, a random ID will be generated.</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">test_message</span><span class="p">():</span>
    <span class="n">set_message</span><span class="p">(</span><span class="s2">&quot;Test message&quot;</span><span class="p">)</span>
    <span class="n">set_message</span><span class="p">(</span><span class="s2">&quot;Update message 1&quot;</span><span class="p">,</span> <span class="s2">&quot;msg_upd&quot;</span><span class="p">)</span>
    <span class="n">set_message</span><span class="p">(</span><span class="s2">&quot;Update message 2&quot;</span><span class="p">,</span> <span class="s2">&quot;msg_upd&quot;</span><span class="p">)</span>
</code></pre></div>
<h4 id="documentation-pytest_hardpy-set_operator_message">set_operator_message<a class="headerlink" href="#documentation-pytest_hardpy-set_operator_message" title="Permanent link">&para;</a></h4>
<p>Sets an operator message in the <strong>statestore</strong> database and updates the database.
Does not provide user interaction unlike the <a href="#documentation-pytest_hardpy-run_dialog_box">run_dialog_box</a> function.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li><code>msg</code> <em>(str)</em>: The message to be displayed.</li>
<li><code>title</code> <em>(str | None)</em>: The optional title for the message.</li>
<li><code>block</code> <em>(bool=True)</em>: If True, the function will block until the message is closed.</li>
<li><code>image</code> <em>(<a href="#documentation-pytest_hardpy-imagecomponent">ImageComponent</a> | None)</em>: Image information.</li>
<li><code>html</code> <em>(<a href="#documentation-pytest_hardpy-htmlcomponent">HTMLComponent</a> | None)</em>: HTML information.</li>
<li><code>font_size</code>: <em>(int=14)</em>: Text font size.</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">hardpy</span> <span class="kn">import</span> <span class="n">set_operator_message</span>

<span class="k">def</span> <span class="nf">test_set_operator_msg</span><span class="p">():</span>
    <span class="n">set_operator_message</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="s2">&quot;This is a sample operator message.&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Important Notice&quot;</span><span class="p">)</span>
</code></pre></div>
<h4 id="documentation-pytest_hardpy-clear_operator_message">clear_operator_message<a class="headerlink" href="#documentation-pytest_hardpy-clear_operator_message" title="Permanent link">&para;</a></h4>
<p>Clears the current message to the operator if it exists, otherwise does nothing.</p>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>
<span class="kn">from</span> <span class="nn">hardpy</span> <span class="kn">import</span> <span class="n">set_operator_message</span><span class="p">,</span> <span class="n">clear_operator_message</span>

<span class="k">def</span> <span class="nf">test_clear_operator_msg</span><span class="p">():</span>
    <span class="n">hardpy</span><span class="o">.</span><span class="n">set_operator_message</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Clearing operator message.&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Operator message&quot;</span><span class="p">,</span> <span class="n">block</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">clear_operator_message</span><span class="p">()</span>
</code></pre></div>
<h4 id="documentation-pytest_hardpy-run_dialog_box">run_dialog_box<a class="headerlink" href="#documentation-pytest_hardpy-run_dialog_box" title="Permanent link">&para;</a></h4>
<p>Displays a dialog box and updates the <code>dialog_box</code> field in the <strong>statestore</strong> database.</p>
<p>The <code>run_dialog_box</code> function must be called from a test case.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li><code>dialog_box_data</code> <em>(DialogBox)</em>: Data for the dialog box.</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><em>(Any)</em>: An object containing the user's response.</li>
</ul>
<p>The type of the return value depends on the widget type:</p>
<ul>
<li>Without widget (BASE): bool.</li>
<li>NUMERIC_INPUT: float.</li>
<li>TEXT_INPUT: str.</li>
<li>RADIOBUTTON: str.</li>
<li>CHECKBOX: List(str).</li>
<li>MULTISTEP: bool.</li>
</ul>
<p><strong>Raises</strong></p>
<ul>
<li><code>ValueError</code>: If the <code>message</code> argument is empty.</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">hardpy</span> <span class="kn">import</span> <span class="n">dialog_box</span>
<span class="k">def</span> <span class="nf">test_text_input</span><span class="p">():</span>
    <span class="n">dbx</span> <span class="o">=</span> <span class="n">DialogBox</span><span class="p">(</span>
        <span class="n">dialog_text</span><span class="o">=</span><span class="s2">&quot;Type &#39;ok&#39; and press the Confirm button&quot;</span><span class="p">,</span>
        <span class="n">title_bar</span><span class="o">=</span><span class="s2">&quot;Example of text input&quot;</span><span class="p">,</span>
        <span class="n">widget</span><span class="o">=</span><span class="n">TextInputWidget</span><span class="p">(),</span>
        <span class="n">image</span><span class="o">=</span><span class="n">ImageComponent</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="s2">&quot;assets/test.png&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">50</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">run_dialog_box</span><span class="p">(</span><span class="n">dbx</span><span class="p">)</span>
    <span class="n">set_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Entered text </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">response</span> <span class="o">==</span> <span class="s2">&quot;ok&quot;</span><span class="p">,</span> <span class="s2">&quot;The entered text is not correct&quot;</span>
</code></pre></div>
<h4 id="documentation-pytest_hardpy-get_current_report">get_current_report<a class="headerlink" href="#documentation-pytest_hardpy-get_current_report" title="Permanent link">&para;</a></h4>
<p>Returns the current report from the database <strong>runstore</strong>.</p>
<p><strong>Returns:</strong></p>
<ul>
<li><em>(ResultRunStore | None)</em>: report, or None if not found or invalid</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">test_current_report</span><span class="p">():</span>
    <span class="n">report</span> <span class="o">=</span> <span class="n">get_current_report</span><span class="p">()</span>
</code></pre></div>
<h4 id="documentation-pytest_hardpy-get_current_attempt">get_current_attempt<a class="headerlink" href="#documentation-pytest_hardpy-get_current_attempt" title="Permanent link">&para;</a></h4>
<p>Returns the num of current attempt.</p>
<p>The <code>get_current_attempt</code> function must be called from a test case.</p>
<p><strong>Returns:</strong></p>
<ul>
<li><em>(int)</em>: num of current attempt</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">attempt</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_attempt_message</span><span class="p">():</span>
    <span class="n">attempt</span> <span class="o">=</span> <span class="n">hardpy</span><span class="o">.</span><span class="n">get_current_attempt</span><span class="p">()</span>
    <span class="n">hardpy</span><span class="o">.</span><span class="n">set_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Current attempt </span><span class="si">{</span><span class="n">attempt</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">attempt</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">:</span>
        <span class="k">assert</span> <span class="kc">False</span>
</code></pre></div>
<h2 id="documentation-pytest_hardpy-class">Class<a class="headerlink" href="#documentation-pytest_hardpy-class" title="Permanent link">&para;</a></h2>
<h4 id="documentation-pytest_hardpy-dialogbox">DialogBox<a class="headerlink" href="#documentation-pytest_hardpy-dialogbox" title="Permanent link">&para;</a></h4>
<p>The class is used to configure the dialogue box and is used with
the <a href="#documentation-pytest_hardpy-run_dialog_box">run_dialog_box</a> function.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li><code>dialog_text</code> <em>(str)</em>: The text of the dialog box.</li>
<li><code>title_bar</code> <em>(str | None)</em>: The title bar of the dialog box.
If the title_bar field is missing, it is the case name.</li>
<li><code>widget</code> <em>(IWidget | None)</em>: Widget information.</li>
<li><code>image</code> <em>(<a href="#documentation-pytest_hardpy-imagecomponent">ImageComponent</a> | None)</em>: Image information.</li>
<li><code>html</code> <em>(<a href="#documentation-pytest_hardpy-htmlcomponent">HTMLComponent</a> | None)</em>: HTML information.</li>
<li><code>font_size</code>: <em>(int=14)</em>: Text font size.</li>
</ul>
<p>Widget list:</p>
<ul>
<li>Base, only dialog text;</li>
<li>Text input, <a href="#documentation-pytest_hardpy-textinputwidget">TextInputWidget</a>;</li>
<li>Numeric input, <a href="#documentation-pytest_hardpy-numericinputwidget">NumericInputWidget</a>;</li>
<li>Radiobutton, <a href="#documentation-pytest_hardpy-radiobuttonwidget">RadiobuttonWidget</a>;</li>
<li>Checkbox, <a href="#documentation-pytest_hardpy-checkboxwidget">CheckboxWidget</a>;</li>
<li>Multistep, <a href="#documentation-pytest_hardpy-multistepwidget">MultistepWidget</a>.</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code>    <span class="n">DialogBox</span><span class="p">(</span><span class="n">title_bar</span><span class="o">=</span><span class="s2">&quot;Example title&quot;</span><span class="p">,</span> <span class="n">dialog_text</span><span class="o">=</span><span class="s2">&quot;Example text&quot;</span><span class="p">)</span>
</code></pre></div>
<h4 id="documentation-pytest_hardpy-textinputwidget">TextInputWidget<a class="headerlink" href="#documentation-pytest_hardpy-textinputwidget" title="Permanent link">&para;</a></h4>
<p>The class is used to configure text input widget in <a href="#documentation-pytest_hardpy-dialogbox">dialog box</a>.
Further information can be found in section
<a href="#documentation-hardpy_panel-text-input-field">text input field</a>.
Widget returns a string when using <a href="#documentation-pytest_hardpy-run_dialog_box">run_dialog_box</a>.</p>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code>    <span class="n">dbx</span> <span class="o">=</span> <span class="n">DialogBox</span><span class="p">(</span>
        <span class="n">dialog_text</span><span class="o">=</span><span class="s2">&quot;Type &#39;ok&#39; and press the Confirm button&quot;</span><span class="p">,</span>
        <span class="n">title_bar</span><span class="o">=</span><span class="s2">&quot;Example of text input&quot;</span><span class="p">,</span>
        <span class="n">widget</span><span class="o">=</span><span class="n">TextInputWidget</span><span class="p">(),</span>
    <span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">run_dialog_box</span><span class="p">(</span><span class="n">dbx</span><span class="p">)</span>
</code></pre></div>
<h4 id="documentation-pytest_hardpy-numericinputwidget">NumericInputWidget<a class="headerlink" href="#documentation-pytest_hardpy-numericinputwidget" title="Permanent link">&para;</a></h4>
<p>The class is used to configure numeric input widget in <a href="#documentation-pytest_hardpy-dialogbox">dialog box</a>.
Further information can be found in section
<a href="#documentation-hardpy_panel-number-input-field">numeric input field</a>.
Widget returns a float when using <a href="#documentation-pytest_hardpy-run_dialog_box">run_dialog_box</a>.</p>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code>    <span class="n">dbx</span> <span class="o">=</span> <span class="n">DialogBox</span><span class="p">(</span>
        <span class="n">dialog_text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Enter the number </span><span class="si">{</span><span class="n">test_num</span><span class="si">}</span><span class="s2"> and press the Confirm button&quot;</span><span class="p">,</span>
        <span class="n">title_bar</span><span class="o">=</span><span class="s2">&quot;Example of entering a number&quot;</span><span class="p">,</span>
        <span class="n">widget</span><span class="o">=</span><span class="n">NumericInputWidget</span><span class="p">(),</span>
    <span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">run_dialog_box</span><span class="p">(</span><span class="n">dbx</span><span class="p">))</span>
</code></pre></div>
<h4 id="documentation-pytest_hardpy-radiobuttonwidget">RadiobuttonWidget<a class="headerlink" href="#documentation-pytest_hardpy-radiobuttonwidget" title="Permanent link">&para;</a></h4>
<p>The class is used to configure radiobutton widget in <a href="#documentation-pytest_hardpy-dialogbox">dialog box</a>.
Further information can be found in section
<a href="#documentation-hardpy_panel-radiobutton">radiobutton</a>.
Widget returns a string with the selected radiobutton value
<a href="#documentation-pytest_hardpy-run_dialog_box">run_dialog_box</a>.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li><code>fields</code> <em>(list[str])</em>: Radiobutton fields.</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code>    <span class="n">dbx</span> <span class="o">=</span> <span class="n">DialogBox</span><span class="p">(</span>
        <span class="n">dialog_text</span><span class="o">=</span><span class="s1">&#39;Select item &quot;one&quot; out of several and click Confirm.&#39;</span><span class="p">,</span>
        <span class="n">title_bar</span><span class="o">=</span><span class="s2">&quot;Radiobutton example&quot;</span><span class="p">,</span>
        <span class="n">widget</span><span class="o">=</span><span class="n">RadiobuttonWidget</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="s2">&quot;three&quot;</span><span class="p">]),</span>
    <span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">run_dialog_box</span><span class="p">(</span><span class="n">dbx</span><span class="p">)</span>
</code></pre></div>
<h4 id="documentation-pytest_hardpy-checkboxwidget">CheckboxWidget<a class="headerlink" href="#documentation-pytest_hardpy-checkboxwidget" title="Permanent link">&para;</a></h4>
<p>The class is used to configure checkbox widget in <a href="#documentation-pytest_hardpy-dialogbox">dialog box</a>.
Further information can be found in section
<a href="#documentation-hardpy_panel-checkbox">checkbox</a>.
Widget returns a list of string with the selected checkbox value
<a href="#documentation-pytest_hardpy-run_dialog_box">run_dialog_box</a>.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li><code>fields</code> <em>(list[str])</em>: Checkbox fields.</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code>    <span class="n">dbx</span> <span class="o">=</span> <span class="n">DialogBox</span><span class="p">(</span>
        <span class="n">dialog_text</span><span class="o">=</span><span class="s1">&#39;Select items &quot;one&quot; and &quot;two&quot; and click the Confirm button&#39;</span><span class="p">,</span>
        <span class="n">title_bar</span><span class="o">=</span><span class="s2">&quot;Checkbox example&quot;</span><span class="p">,</span>
        <span class="n">widget</span><span class="o">=</span><span class="n">CheckboxWidget</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="s2">&quot;three&quot;</span><span class="p">]),</span>
    <span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">run_dialog_box</span><span class="p">(</span><span class="n">dbx</span><span class="p">)</span>
</code></pre></div>
<h4 id="documentation-pytest_hardpy-stepwidget">StepWidget<a class="headerlink" href="#documentation-pytest_hardpy-stepwidget" title="Permanent link">&para;</a></h4>
<p>The class is used to configure the step for the
<a href="#documentation-pytest_hardpy-multistepwidget">multistep</a> widget in <a href="#documentation-pytest_hardpy-dialogbox">dialog box</a>.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li><code>title</code> <em>(str)</em>: Step title.</li>
<li><code>text</code> <em>(str | None)</em>: Step text.</li>
<li><code>image</code> <em>(<a href="#documentation-pytest_hardpy-imagecomponent">ImageComponent</a> | None)</em>: Step image.</li>
<li><code>html</code> <em>(<a href="#documentation-pytest_hardpy-htmlcomponent">HTMLComponent</a> | None)</em>: Step HTML.</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code>    <span class="n">StepWidget</span><span class="p">(</span><span class="s2">&quot;Step 1&quot;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Content for step&quot;</span><span class="p">)</span>
</code></pre></div>
<h4 id="documentation-pytest_hardpy-multistepwidget">MultistepWidget<a class="headerlink" href="#documentation-pytest_hardpy-multistepwidget" title="Permanent link">&para;</a></h4>
<p>The class is used to configure multistep widget in <a href="#documentation-pytest_hardpy-dialogbox">dialog box</a>.
Further information can be found in section
<a href="#documentation-hardpy_panel-multiple-steps">multiple steps</a>.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li><code>steps</code> <em>(list[<a href="#documentation-pytest_hardpy-stepwidget">StepWidget</a>])</em>: A list with info about the steps.</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code>    <span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">StepWidget</span><span class="p">(</span><span class="s2">&quot;Step 1&quot;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Content for step&quot;</span><span class="p">),</span>
        <span class="n">StepWidget</span><span class="p">(</span><span class="s2">&quot;Step 2&quot;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Content for step 2&quot;</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="n">ImageComponent</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="s2">&quot;assets/test.png&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">)),</span>
        <span class="n">StepWidget</span><span class="p">(</span><span class="s2">&quot;Step 3&quot;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Content for step 3&quot;</span><span class="p">,</span> <span class="n">html</span><span class="o">=</span><span class="n">HTMLComponent</span><span class="p">(</span><span class="n">html</span><span class="o">=</span><span class="s2">&quot;https://everypinio.github.io/hardpy/&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">50</span><span class="p">)),</span>
    <span class="p">]</span>
    <span class="n">dbx</span> <span class="o">=</span> <span class="n">DialogBox</span><span class="p">(</span><span class="n">dialog_text</span><span class="o">=</span><span class="s2">&quot;Follow the steps and click Confirm&quot;</span><span class="p">,</span> <span class="n">widget</span><span class="o">=</span><span class="n">MultistepWidget</span><span class="p">(</span><span class="n">steps</span><span class="p">))</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">run_dialog_box</span><span class="p">(</span><span class="n">dbx</span><span class="p">)</span>
</code></pre></div>
<h4 id="documentation-pytest_hardpy-imagecomponent">ImageComponent<a class="headerlink" href="#documentation-pytest_hardpy-imagecomponent" title="Permanent link">&para;</a></h4>
<p>A class for configuring an image for a dialogue box or operator message box and is used with
the <a href="#documentation-pytest_hardpy-run_dialog_box">run_dialog_box</a> and <a href="#documentation-pytest_hardpy-set_operator_message">set_operator_message</a> functions.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li><code>address</code> <em>(str)</em>: Image address.</li>
<li><code>width</code> <em>(int | None)</em>: Image width in %.</li>
<li><code>border</code> <em>(int | None)</em>: Image border width.</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code>    <span class="n">ImageComponent</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="s2">&quot;assets/test.png&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</code></pre></div>
<h4 id="documentation-pytest_hardpy-htmlcomponent">HTMLComponent<a class="headerlink" href="#documentation-pytest_hardpy-htmlcomponent" title="Permanent link">&para;</a></h4>
<p>A class for configurating HTML for a dialogue box or operator message box and is used with
the <a href="#documentation-pytest_hardpy-run_dialog_box">run_dialog_box</a> and <a href="#documentation-pytest_hardpy-set_operator_message">set_operator_message</a> functions.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li><code>code_or_url</code> <em>(str)</em>: HTML code or link.</li>
<li><code>width</code> <em>(int | None)</em>: HTML width in %.</li>
<li><code>border</code> <em>(int | None)</em>: HTML border width.</li>
<li><code>is_raw_html</code> <em>(bool)</em>: Is HTML code is raw.</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code>    <span class="n">HTMLComponent</span><span class="p">(</span><span class="n">code_or_url</span><span class="o">=</span><span class="s2">&quot;https://everypinio.github.io/hardpy/&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">is_raw_html</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div>
<h4 id="documentation-pytest_hardpy-couchdbloader">CouchdbLoader<a class="headerlink" href="#documentation-pytest_hardpy-couchdbloader" title="Permanent link">&para;</a></h4>
<p>Used to write reports to the database <strong>CouchDB</strong>.</p>
<p>Report names (revision id) are automatically generated based on the test
completion date and the device serial number.
If the serial number dut is empty, a random identifier with
prefix <code>no_serial</code> is used.
The random identifier is a unique string generated using the <code>uuid4()</code>
function from the <code>uuid</code> module in Python.
This allows for easy identification and sorting of reports.</p>
<ul>
<li>Valid report name: <code>report_1726496218_1234567890</code></li>
<li>Valid report name (no serial number): <code>report_1726496218_no_serial_808007</code></li>
</ul>
<p><strong>Functions:</strong></p>
<ul>
<li><code>load</code> <em>(ResultRunStore)</em>: Load report to the CouchDB <strong>report</strong> database.</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># conftest</span>
<span class="k">def</span> <span class="nf">finish_executing</span><span class="p">():</span>
    <span class="n">report</span> <span class="o">=</span> <span class="n">get_current_report</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">report</span><span class="p">:</span>
        <span class="n">loader</span> <span class="o">=</span> <span class="n">CouchdbLoader</span><span class="p">(</span><span class="n">CouchdbConfig</span><span class="p">())</span>
        <span class="n">loader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">report</span><span class="p">)</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">,</span> <span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fill_actions_after_test</span><span class="p">(</span><span class="n">post_run_functions</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
    <span class="n">post_run_functions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">finish_executing</span><span class="p">)</span>
    <span class="k">yield</span>
</code></pre></div>
<h4 id="documentation-pytest_hardpy-standcloudloader">StandCloudLoader<a class="headerlink" href="#documentation-pytest_hardpy-standcloudloader" title="Permanent link">&para;</a></h4>
<p>Used to write reports to the <strong>StandCloud</strong>.
A login to <strong>StandCloud</strong> is required to work.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li><code>address</code> <em>(str | None)</em>: StandCloud address. Defaults to None
  (the value is taken from <a href="#documentation-hardpy_config">hardpy.toml</a>). Can be used outside of <strong>HardPy</strong> applications.</li>
</ul>
<p><strong>Functions:</strong></p>
<ul>
<li><code>healthcheck</code>: Healthcheck of StandCloud API.
  Returns the <code>requests.Response</code> object.</li>
<li><code>load</code> <em>(ResultRunStore)</em>: Load report to the StandCloud.
  Returns the <code>requests.Response</code> object.
  Status code 201 is considered a successful status.</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># conftest</span>
<span class="k">def</span> <span class="nf">finish_executing</span><span class="p">():</span>
    <span class="n">report</span> <span class="o">=</span> <span class="n">get_current_report</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">report</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">loader</span> <span class="o">=</span> <span class="n">StandCloudLoader</span><span class="p">()</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">report</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="n">HTTPStatus</span><span class="o">.</span><span class="n">CREATED</span><span class="p">:</span>
                <span class="n">set_operator_message</span><span class="p">(</span>
                    <span class="s2">&quot;Report not uploaded to StandCloud, &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;status code: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">, text: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="p">)</span>
        <span class="k">except</span> <span class="n">StandCloudError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
            <span class="n">set_operator_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">exc</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">,</span> <span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fill_actions_after_test</span><span class="p">(</span><span class="n">post_run_functions</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
    <span class="n">post_run_functions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">finish_executing</span><span class="p">)</span>
    <span class="k">yield</span>
</code></pre></div>
<h4 id="documentation-pytest_hardpy-standcloudconnector">StandCloudConnector<a class="headerlink" href="#documentation-pytest_hardpy-standcloudconnector" title="Permanent link">&para;</a></h4>
<p>Used to create the <strong>StandCloud</strong> connection addresses.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li><code>addr</code> <em>(str)</em>: StandCloud service name.
  For example: <strong>demo.standcloud.io</strong></li>
<li><code>api_mode</code> <em>(StandCloudAPIMode)</em>: StandCloud API mode:
  <strong>hardpy</strong> for test stand, <strong>integration</strong> for third-party service.
  Default: <code>StandCloudAPIMode.HARDPY</code></li>
<li><code>api_version</code> <em>(int)</em>: StandCloud API version.
  Default: 1.</li>
</ul>
<h4 id="documentation-pytest_hardpy-standcloudreader">StandCloudReader<a class="headerlink" href="#documentation-pytest_hardpy-standcloudreader" title="Permanent link">&para;</a></h4>
<p>Used to read data from the <strong>StandCloud</strong>.
A login to <strong>StandCloud</strong> is required to work.
For more information, see the example <a href="#examples-stand_cloud_reader">StandCloud reader</a></p>
<p><strong>Arguments:</strong></p>
<ul>
<li><code>sc_connector</code> (<a href="#documentation-pytest_hardpy-standcloudconnector">StandCloudConnector</a>): <strong>StandCloud</strong> connection data.</li>
</ul>
<p><strong>Functions:</strong></p>
<ul>
<li><code>test_run</code> <em>(run_id: str, params: dict[str, Any])</em> - get run data from <code>/test_run</code> endpoint.
  All test run filters can view in REST documentation.
  Return <code>requests.Response</code> class with test run data.</li>
<li><code>tested_dut</code> <em>(params: dict[str, Any])</em> - get last tested DUT's data from <code>/tested_dut</code> endpoint.
  All tested dut's filters can view in REST documentation.
  Return <code>requests.Response</code> class with tested DUT's data.</li>
</ul>
<p>In terms of filters, the difference between <code>test_run</code> and <code>tested_dut</code> in terms of filters
is that in test_run allows you to request a filter for the number of runs - <code>number_of_attempt</code>,
while tested_dut allows you to request a filter for the number of runs - <code>attempt_count</code>.
In other words, <code>tested_dut</code> will return the last run with the specified number of runs specified in <code>attempt_count</code>,
and <code>test_run</code> will return the runs whose start number is equal to the <code>number_of_attempt</code> specified in the filter.</p>
<p><strong>Examples:</strong></p>
<div class="highlight"><pre><span></span><code>    <span class="n">reader</span> <span class="o">=</span> <span class="n">StandCloudReader</span><span class="p">(</span><span class="n">StandCloudConnector</span><span class="p">(</span><span class="n">addr</span><span class="o">=</span><span class="s2">&quot;demo.standcloud.io&quot;</span><span class="p">))</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">test_run</span><span class="p">(</span><span class="n">run_id</span><span class="o">=</span><span class="s2">&quot;0196434d-e8f7-7ce1-81f7-e16f20487494&quot;</span><span class="p">)</span>
    <span class="n">status_code</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
    <span class="n">response_data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">response_data</span><span class="p">)</span>

    <span class="n">param</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;part_number&quot;</span><span class="p">:</span> <span class="s2">&quot;part_number_1&quot;</span><span class="p">,</span> <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;pass&quot;</span><span class="p">,</span> <span class="s2">&quot;firmware_version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.3&quot;</span><span class="p">}</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">test_run</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="n">param</span><span class="p">)</span>
    <span class="n">status_code</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
    <span class="n">response_data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">response_data</span><span class="p">)</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">tested_dut</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>
    <span class="n">status_code</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
    <span class="n">response_data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">response_data</span><span class="p">)</span>
</code></pre></div>
<h2 id="documentation-pytest_hardpy-fixture">Fixture<a class="headerlink" href="#documentation-pytest_hardpy-fixture" title="Permanent link">&para;</a></h2>
<h4 id="documentation-pytest_hardpy-post_run_functions">post_run_functions<a class="headerlink" href="#documentation-pytest_hardpy-post_run_functions" title="Permanent link">&para;</a></h4>
<p>To execute actions at the end of testing, you can use the fixture <strong>post_run_functions</strong>.
This fixture is a <code>list[Callable]</code> and you can write functions into it that must be executed at the end of testing.</p>
<p>Fill this list in conftest.py and functions from this list will be called after tests run (at the end of pytest_sessionfinish).</p>
<p><strong>Returns:</strong></p>
<ul>
<li><em>(list[Callable])</em>: list of post run methods</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># conftest.py file</span>
<span class="k">def</span> <span class="nf">finish_executing</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Pytest finished&quot;</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">,</span> <span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fill_actions_after_test</span><span class="p">(</span><span class="n">post_run_functions</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
    <span class="n">post_run_functions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">finish_executing</span><span class="p">)</span>
    <span class="k">yield</span>
</code></pre></div>
<h2 id="documentation-pytest_hardpy-marker">Marker<a class="headerlink" href="#documentation-pytest_hardpy-marker" title="Permanent link">&para;</a></h2>
<h4 id="documentation-pytest_hardpy-case_name">case_name<a class="headerlink" href="#documentation-pytest_hardpy-case_name" title="Permanent link">&para;</a></h4>
<p>Sets a text name for the test case (default: function name)</p>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">case_name</span><span class="p">(</span><span class="s2">&quot;Simple case 1&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_one</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>
</code></pre></div>
<h4 id="documentation-pytest_hardpy-module_name">module_name<a class="headerlink" href="#documentation-pytest_hardpy-module_name" title="Permanent link">&para;</a></h4>
<p>Sets a text name for the test module (file) (default: module name)</p>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">pytestmark</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">module_name</span><span class="p">(</span><span class="s2">&quot;Module 1&quot;</span><span class="p">)</span>
</code></pre></div>
<h4 id="documentation-pytest_hardpy-dependency">dependency<a class="headerlink" href="#documentation-pytest_hardpy-dependency" title="Permanent link">&para;</a></h4>
<p>Skips the test case/module if the main test fails/skipped/errored.
For more information, see the example <a href="#examples-skip_test">skip test</a>
and <a href="#features-features-skipping-the-tests">skip feature description</a>.</p>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">#test_1.py</span>
<span class="k">def</span> <span class="nf">test_one</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">False</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">dependency</span><span class="p">(</span><span class="s2">&quot;test_1::test_one&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_two</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>
</code></pre></div>
<h4 id="documentation-pytest_hardpy-attempt">attempt<a class="headerlink" href="#documentation-pytest_hardpy-attempt" title="Permanent link">&para;</a></h4>
<p>If a test is marked <code>attempt</code>, it will be repeated if it fails the number of
attempts specified by the mark.
The test will be repeated until it is passed.
There is a 1 second pause between attempts.
For more information, see the example <a href="#examples-attempts">attempts</a>.</p>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">attempt</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_attempts</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">False</span>
</code></pre></div>
<h4 id="documentation-pytest_hardpy-critical">critical<a class="headerlink" href="#documentation-pytest_hardpy-critical" title="Permanent link">&para;</a></h4>
<p>Marks test or module as critical.
Failing/skipped critical tests skip all subsequent tests.
For implementation details see <a href="#examples-critical_test">critical tests example</a>.</p>
<p><strong>Example (test level):</strong></p>
<div class="highlight"><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">critical</span>
<span class="k">def</span> <span class="nf">test_core_feature</span><span class="p">():</span>
    <span class="k">assert</span> <span class="n">check_core_functionality</span><span class="p">()</span>
</code></pre></div>
<p><strong>Example (module level):</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">pytestmark</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">critical</span>

<span class="k">def</span> <span class="nf">test_db_connection</span><span class="p">():</span>
    <span class="k">assert</span> <span class="n">connect_to_database</span><span class="p">()</span>
</code></pre></div>
<p><strong>Behavior:</strong></p>
<ul>
<li>Critical test passes - Continue normally</li>
<li>Critical test fails/skips - Skip all remaining tests</li>
<li>Any test fails in critical module - Skip all remaining tests</li>
</ul>
<h2 id="documentation-pytest_hardpy-options">Options<a class="headerlink" href="#documentation-pytest_hardpy-options" title="Permanent link">&para;</a></h2>
<p><strong>pytest-hardpy</strong> has several options to run:</p>
<h4 id="documentation-pytest_hardpy-hardpy-pt">hardpy-pt<a class="headerlink" href="#documentation-pytest_hardpy-hardpy-pt" title="Permanent link">&para;</a></h4>
<p>Option to enable the <strong>pytest-hardpy</strong> plugin.</p>
<div class="highlight"><pre><span></span><code>--hardpy-pt
</code></pre></div>
<h4 id="documentation-pytest_hardpy-hardpy-db-url">hardpy-db-url<a class="headerlink" href="#documentation-pytest_hardpy-hardpy-db-url" title="Permanent link">&para;</a></h4>
<p>The CouchDB instance url for the <strong>statestore</strong> and <strong>runstore</strong> databases.
The default is <code>http://dev:dev@localhost:5984/</code>.</p>
<div class="highlight"><pre><span></span><code>--hardpy-db-url
</code></pre></div>
<h4 id="documentation-pytest_hardpy-hardpy-tests-name">hardpy-tests-name<a class="headerlink" href="#documentation-pytest_hardpy-hardpy-tests-name" title="Permanent link">&para;</a></h4>
<p>The <strong>HardPy</strong> tests name.
The default value is <strong>Tests</strong>.</p>
<div class="highlight"><pre><span></span><code>--hardpy-tests-name
</code></pre></div>
<h4 id="documentation-pytest_hardpy-hardpy-clear-database">hardpy-clear-database<a class="headerlink" href="#documentation-pytest_hardpy-hardpy-clear-database" title="Permanent link">&para;</a></h4>
<p>Option to clean <strong>statestore</strong> and <strong>runstore</strong> databases before running pytest.</p>
<div class="highlight"><pre><span></span><code>--hardpy-clear-database
</code></pre></div>
<h4 id="documentation-pytest_hardpy-sc-address">sc-address<a class="headerlink" href="#documentation-pytest_hardpy-sc-address" title="Permanent link">&para;</a></h4>
<p><strong>StandCloud</strong> address.
The default is empty string.</p>
<div class="highlight"><pre><span></span><code>--sc-address
</code></pre></div>
<h4 id="documentation-pytest_hardpy-sc-connection-only">sc-connection-only<a class="headerlink" href="#documentation-pytest_hardpy-sc-connection-only" title="Permanent link">&para;</a></h4>
<p>Check <strong>StandCloud</strong> service availability.
The default is <em>False</em>.</p>
<div class="highlight"><pre><span></span><code>--sc-connection-only
</code></pre></div></section><section class="print-page" id="documentation-stand_cloud"><h1 id="documentation-stand_cloud-standcloud">StandCloud<a class="headerlink" href="#documentation-stand_cloud-standcloud" title="Permanent link">&para;</a></h1>
<h2 id="documentation-stand_cloud-about-standcloud">About StandCloud<a class="headerlink" href="#documentation-stand_cloud-about-standcloud" title="Permanent link">&para;</a></h2>
<p><strong>StandCloud</strong> is a cloud management tool for electronics manufacturing.
Test data is crucial for evaluating performance.
StandCloud allows you to explore data patterns, create visualizations, and gain insights.
This helps in identifying potential trends and opportunities.
It allows you to identify potential limitations.</p>
<p>For more information, visit the <strong>StandCloud</strong> <a href="https://everypin.io/standcloud">website</a>.</p>
<h2 id="documentation-stand_cloud-standcloud-and-hardpy-integration">StandCloud and HardPy integration<a class="headerlink" href="#documentation-stand_cloud-standcloud-and-hardpy-integration" title="Permanent link">&para;</a></h2>
<p><strong>HardPy</strong> allows test result data to be stored in the <strong>StandCloud</strong> and
read them from the <strong>StandCloud</strong>.
For an example of StandCloud and HardPy integration,
see <a href="#examples-stand_cloud">StandCloud example</a> and
<a href="#examples-stand_cloud_reader">StandCloud readed example</a>.</p>
<p>To authorize in <strong>StandCloud</strong> you need to know the address of your <strong>StandCloud</strong> service.
To obtain one, contact <strong><a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#105;&#110;&#102;&#111;&#64;&#101;&#118;&#101;&#114;&#121;&#112;&#105;&#110;&#46;&#105;&#111;">&#105;&#110;&#102;&#111;&#64;&#101;&#118;&#101;&#114;&#121;&#112;&#105;&#110;&#46;&#105;&#111;</a></strong>.</p>
<p>Address must be added to <strong>hardpy.toml</strong> in <code>stand_cloud</code> section:</p>
<div class="highlight"><pre><span></span><code><span class="k">[stand_cloud]</span>
<span class="n">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;demo.standcloud.io&quot;</span>
</code></pre></div>
<p>You need to run the command:</p>
<p><div class="highlight"><pre><span></span><code>hardpy<span class="w"> </span>sc-login<span class="w"> </span>&lt;stand_cloud_address&gt;
</code></pre></div>
where <stand_cloud_address> is the <strong>StandCloud</strong> service address.
StandCloud uses OAuth2 device authorization grant -
<a href="https://datatracker.ietf.org/doc/html/rfc8628">RFC8628</a>.
Then go to the authorization link in the terminal and open the link to the browser.
You will need to enter your StandCloud login and password.
After successful authorization, you should press the <code>Accept</code> button.</p>
<h1 align="center">
    <a class="glightbox" href="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/stand_cloud/stand_cloud_auth.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/stand_cloud/stand_cloud_auth.png" alt="stand_cloud_auth" style="width:300px;"></a>
</h1>

<p>To check the <strong>StandCloud</strong> connection status, run the command:</p>
<div class="highlight"><pre><span></span><code>hardpy<span class="w"> </span>sc-login<span class="w"> </span>--check<span class="w"> </span>&lt;stand_cloud_address&gt;
</code></pre></div>
<p>The <strong>StandCloud</strong> authentication time is updated each time you interact with <strong>StandCloud</strong>.
If you do not use StandCloud services, the authentication will be canceled and the
<code>hardpy sc-login</code> function must be called again.
To clarify and edit your authentication time case, you can contact <strong><a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#105;&#110;&#102;&#111;&#64;&#101;&#118;&#101;&#114;&#121;&#112;&#105;&#110;&#46;&#105;&#111;">&#105;&#110;&#102;&#111;&#64;&#101;&#118;&#101;&#114;&#121;&#112;&#105;&#110;&#46;&#105;&#111;</a></strong>.</p>
<p>To logout from <strong>StandCloud</strong> service run the command:</p>
<div class="highlight"><pre><span></span><code>hardpy<span class="w"> </span>sc-logout<span class="w"> </span>&lt;stand_cloud_address&gt;
</code></pre></div>
<p>Third party applications can authorize in <strong>StandCloud</strong>.
This process is described in the
<a href="#examples-stand_cloud_thirdparty_auth">StandCloud third party authorization example</a>.</p>
<h2 id="documentation-stand_cloud-hardpy-rules">HardPy rules<a class="headerlink" href="#documentation-stand_cloud-hardpy-rules" title="Permanent link">&para;</a></h2>
<h3 id="documentation-stand_cloud-database-mandatory-fields">Database mandatory fields<a class="headerlink" href="#documentation-stand_cloud-database-mandatory-fields" title="Permanent link">&para;</a></h3>
<p>In order to populate the <strong>StandCloud</strong> database,
it is mandatory to populate some fields in the HardPy database.</p>
<ol>
<li>DUT part number. Fills with the
   <a href="#documentation-pytest_hardpy-set_dut_part_number">set_dut_part_number</a> function.</li>
<li>Test stand name. Fills with the
   <a href="#documentation-pytest_hardpy-set_stand_name">set_stand_name</a> function.</li>
</ol>
<p>So, a minimal example of a test plan for successfully filling a <strong>StandCloud</strong> database:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">hardpy</span>

<span class="k">def</span> <span class="nf">test_example</span><span class="p">():</span>
    <span class="n">hardpy</span><span class="o">.</span><span class="n">set_dut_part_number</span><span class="p">(</span><span class="s2">&quot;part_number_example&quot;</span><span class="p">)</span>
    <span class="n">hardpy</span><span class="o">.</span><span class="n">set_stand_name</span><span class="p">(</span><span class="s2">&quot;stand_name_example&quot;</span><span class="p">)</span>
</code></pre></div>
<p>These database fields are required for minimal <strong>StandCloud</strong> analytics.
The <code>StandCloudLoader.load()</code> function will return a code <strong>422</strong> if these fields are not filled in.
Other required database fields are automatically filled by HardPy.
See <strong>HardPy</strong> database specification in <a href="#documentation-database-runstore-scheme">Runstore</a> section.</p>
<h3 id="documentation-stand_cloud-general-guidelines">General guidelines<a class="headerlink" href="#documentation-stand_cloud-general-guidelines" title="Permanent link">&para;</a></h3>
<p>Some tips for getting the best analytics in <strong>StandCloud</strong>.</p>
<ol>
<li>Use the <a href="#documentation-pytest_hardpy-set_dut_serial_number">set_dut_serial_number</a>
   to store DUT serial number.
   The serial number allows you to distinguish between units with
   the same part number. It also allows you to analyze the
   number of attempts to test a device.</li>
<li>Use the <a href="#documentation-pytest_hardpy-set_case_artifact">set_case_artifact</a>,
   <a href="#documentation-pytest_hardpy-set_module_artifact">set_module_artifact</a>,
   and <a href="#documentation-pytest_hardpy-set_run_artifact">set_run_artifact</a>
   to store important information, such as measurement results or case attempt.
   Artifacts are not displayed in the operator panel.
   They can contain more complex data structures and can be used
   for data analysis, unlike <a href="#documentation-pytest_hardpy-set_message">set_message</a>
   which only stores strings.</li>
<li>Use the <a href="#documentation-pytest_hardpy-set_stand_info">set_stand_info</a>,
   <a href="#documentation-pytest_hardpy-set_dut_info">set_dut_info</a> and
   <a href="#documentation-pytest_hardpy-set_driver_info">set_driver_info</a>
   to store important information about DUT or test stand.
   Don't store DUT or test stand information such as hardware/software
   revisions or stand components in artifacts.</li>
<li>Use the <a href="#documentation-pytest_hardpy-case_name">case_name</a>
   and <a href="#documentation-pytest_hardpy-module_name">module_name</a>
   markers for human-readable names.
   They make it easier to analyze the tests.</li>
</ol></section><h1 class='nav-section-title-end'>Ended: Documentation</h1>
                        <h1 class='nav-section-title' id='section-examples'>
                            Examples <a class='headerlink' href='#section-examples' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="examples"><h1 id="examples-examples">Examples<a class="headerlink" href="#examples-examples" title="Permanent link">&para;</a></h1>
<p>HardPy includes working examples directly in the package in
the <a href="https://github.com/everypinio/hardpy/tree/main/examples">examples</a> folder.
However, the documentation contains more examples, which you can explore in this section.</p></section><section class="print-page" id="examples-attempts"><h1 id="examples-attempts-attempts">Attempts<a class="headerlink" href="#examples-attempts-attempts" title="Permanent link">&para;</a></h1>
<p>In <strong>HardPy</strong> library, the <a href="#documentation-pytest_hardpy-attempt">@pytest.mark.attempt(n)</a>
marker allows you to configure a test to be retried a specified number of
times <code>(n)</code> if it initially fails.
This functionality is particularly useful for tests that might encounter transient errors or
require multiple attempts to succeed due to external factors.
The code for this example can be seen inside the hardpy package
<a href="https://github.com/everypinio/hardpy/tree/main/examples/attempts">Attempts</a>.</p>
<p>Contains some examples of valid tests with attempts.</p>
<h3 id="examples-attempts-how-to-start">how to start<a class="headerlink" href="#examples-attempts-how-to-start" title="Permanent link">&para;</a></h3>
<ol>
<li>Launch <code>hardpy init attempts</code>.</li>
<li>Launch <a href="#documentation-database-couchdb-instance">CouchDH instance</a>.</li>
<li>Modify the files described below.</li>
<li>Launch <code>hardpy run attempts</code>.</li>
</ol>
<h3 id="examples-attempts-conftestpy">conftest.py<a class="headerlink" href="#examples-attempts-conftestpy" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">pytest</span>

<span class="k">class</span> <span class="nc">CurrentMinute</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">get_minute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">current_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">current_time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%M&quot;</span><span class="p">))</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">current_minute</span><span class="p">():</span>
    <span class="n">current_time</span> <span class="o">=</span> <span class="n">CurrentMinute</span><span class="p">()</span>
    <span class="k">yield</span> <span class="n">current_time</span>
</code></pre></div>
<h3 id="examples-attempts-test_1py">test_1.py<a class="headerlink" href="#examples-attempts-test_1py" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>
<span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">import</span> <span class="nn">hardpy</span>
<span class="kn">from</span> <span class="nn">hardpy</span> <span class="kn">import</span> <span class="n">DialogBox</span><span class="p">,</span> <span class="n">TextInputWidget</span><span class="p">,</span> <span class="n">run_dialog_box</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">attempt</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_minute_parity</span><span class="p">(</span><span class="n">current_minute</span><span class="p">):</span>
    <span class="n">attempt</span> <span class="o">=</span> <span class="n">hardpy</span><span class="o">.</span><span class="n">get_current_attempt</span><span class="p">()</span>
    <span class="n">hardpy</span><span class="o">.</span><span class="n">set_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Current attempt </span><span class="si">{</span><span class="n">attempt</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;updated_status&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">attempt</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>

    <span class="n">minute</span> <span class="o">=</span> <span class="n">current_minute</span><span class="o">.</span><span class="n">get_minute</span><span class="p">()</span>
    <span class="n">hardpy</span><span class="o">.</span><span class="n">set_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Current minute </span><span class="si">{</span><span class="n">minute</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">hardpy</span><span class="o">.</span><span class="n">set_case_artifact</span><span class="p">({</span><span class="s2">&quot;minute&quot;</span><span class="p">:</span> <span class="n">minute</span><span class="p">})</span>

    <span class="k">assert</span> <span class="n">minute</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;The test failed because </span><span class="si">{</span><span class="n">minute</span><span class="si">}</span><span class="s2"> is odd! Try again!&quot;</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">attempt</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_dialog_box</span><span class="p">():</span>
    <span class="n">dbx</span> <span class="o">=</span> <span class="n">DialogBox</span><span class="p">(</span>
        <span class="n">dialog_text</span><span class="o">=</span><span class="s2">&quot;Print &#39;ok&#39;, if you want to pass attempt.&quot;</span><span class="p">,</span>
        <span class="n">title_bar</span><span class="o">=</span><span class="s2">&quot;Example of text input&quot;</span><span class="p">,</span>
        <span class="n">widget</span><span class="o">=</span><span class="n">TextInputWidget</span><span class="p">(),</span>
    <span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">run_dialog_box</span><span class="p">(</span><span class="n">dbx</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">response</span> <span class="o">!=</span> <span class="s2">&quot;ok&quot;</span><span class="p">:</span>
        <span class="n">dbx</span> <span class="o">=</span> <span class="n">DialogBox</span><span class="p">(</span>
            <span class="n">dialog_text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Test attempt </span><span class="si">{</span><span class="n">hardpy</span><span class="o">.</span><span class="n">get_current_attempt</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">title_bar</span><span class="o">=</span><span class="s2">&quot;Attempt message&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">run_dialog_box</span><span class="p">(</span><span class="n">dbx</span><span class="p">)</span>

    <span class="k">assert</span> <span class="n">response</span> <span class="o">==</span> <span class="s2">&quot;ok&quot;</span><span class="p">,</span> <span class="s2">&quot;The entered text is not correct&quot;</span>
</code></pre></div></section><section class="print-page" id="examples-db_in_ram"><h1 id="examples-db_in_ram-storing-couchdb-database-in-ram">Storing CouchDB database in RAM<a class="headerlink" href="#examples-db_in_ram-storing-couchdb-database-in-ram" title="Permanent link">&para;</a></h1>
<p>When using one of the methods below, the database data will be saved to a 
folder in temporary storage, and after the computer is turned off, the data will be deleted.</p>
<p>Here are instructions for saving the database in RAM for different 
methods of launching the database:</p>
<ul>
<li>in linux with binary packages</li>
<li>in linux with docker-compose.yaml</li>
<li>in windows with binary packages</li>
<li>in windows with docker-compose.yaml</li>
</ul>
<h2 id="examples-db_in_ram-linux">linux<a class="headerlink" href="#examples-db_in_ram-linux" title="Permanent link">&para;</a></h2>
<h3 id="examples-db_in_ram-binary-packages">binary packages<a class="headerlink" href="#examples-db_in_ram-binary-packages" title="Permanent link">&para;</a></h3>
<p>Start the database according to the 
<a href="https://everypinio.github.io/hardpy/documentation/database/#running-couchdb-with-binary-packages-in-linux">instructions</a></p>
<ul>
<li>Create a CouchDB folder in the temporary file storage:</li>
</ul>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>mkdir<span class="w"> </span>/dev/shm/couchdb
</code></pre></div>
<ul>
<li>Add editing rights to this folder:</li>
</ul>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>chmod<span class="w"> </span><span class="m">777</span><span class="w"> </span>/dev/shm/couchdb
</code></pre></div>
<ul>
<li>Edit the database_dir parameter in the database configuration 
file <code>/opt/couchdb/etc/default.ini</code>:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">[couchdb]</span>
<span class="na">database_dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">./../../dev/shm/couchdb</span>
</code></pre></div>
<ul>
<li>Restart the couchdb service:</li>
</ul>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>service<span class="w"> </span>couchdb<span class="w"> </span>restart
</code></pre></div>
<h3 id="examples-db_in_ram-docker">docker<a class="headerlink" href="#examples-db_in_ram-docker" title="Permanent link">&para;</a></h3>
<p>Start the database according to the 
<a href="https://everypinio.github.io/hardpy/documentation/database/#running-couchdb-with-docker-compose">instructions</a> (steps 1-3)</p>
<p>Example of <code>docker-compose.yaml</code> file with saving files in RAM:</p>
<div class="highlight"><pre><span></span><code><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3.8&quot;</span>

<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">couchserver</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">couchdb:3.4</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;5984:5984&quot;</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">COUCHDB_USER</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dev</span>
<span class="w">      </span><span class="nt">COUCHDB_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dev</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/dev/shm/couchdb:/opt/couchdb/data</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./docker/couchdb.ini:/opt/couchdb/etc/local.ini</span>
</code></pre></div>
<p>Run <strong>docker compose</strong> in the root directory to launch DB.</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>compose<span class="w"> </span>up
</code></pre></div>
<p>To stop the database, run the command:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>compose<span class="w"> </span>down
</code></pre></div>
<h2 id="examples-db_in_ram-windows">windows<a class="headerlink" href="#examples-db_in_ram-windows" title="Permanent link">&para;</a></h2>
<h3 id="examples-db_in_ram-virtual-hard-disk">virtual hard disk<a class="headerlink" href="#examples-db_in_ram-virtual-hard-disk" title="Permanent link">&para;</a></h3>
<p>You need to create a virtual hard disk on which the database will be saved.</p>
<ul>
<li>Open the command prompt using <code>Win+R</code>, type <code>diskmgmt.msc</code>, and press <code>Enter</code>.</li>
<li>Click Action &gt; Create Virtual Hard Disk.</li>
<li>Specify any Location, set Size (e.g., 30 MB), choose VHD type and Fixed size.</li>
<li>Right-click the created disk (left pane), select Initialize Disk, choose GUID Partition Table.</li>
<li>Right-click the created disk (right pane), select New Simple Volume, Assign drive 
letter (e.g., <code>K</code>), click Next twice, then Finish.</li>
<li>Create a folder named <code>couchdb</code> in the created drive (<code>K</code> in our case) using File Explorer.</li>
</ul>
<h3 id="examples-db_in_ram-binary-packages_1">binary packages<a class="headerlink" href="#examples-db_in_ram-binary-packages_1" title="Permanent link">&para;</a></h3>
<p>Start the database according to the 
<a href="https://everypinio.github.io/hardpy/documentation/database/#running-couchdb-with-binary-packages-in-windows">instructions</a></p>
<ul>
<li>Open the file located at <code>C:/CouchDB/etc/default.ini</code> as administrator.</li>
<li>Set the value of the database_dir parameter to <code>K:/couchdb</code>.</li>
<li>Save and close the file.</li>
<li>Open the Services console using <code>Win+R</code>, type <code>services.msc</code>, and press <code>Enter</code>.</li>
<li>Locate the Apache CouchDB service and restart it.</li>
</ul>
<h3 id="examples-db_in_ram-docker_1">docker<a class="headerlink" href="#examples-db_in_ram-docker_1" title="Permanent link">&para;</a></h3>
<p>Start the database according to the 
<a href="https://everypinio.github.io/hardpy/documentation/database/#running-couchdb-with-docker-compose">instructions</a> (steps 1-3)</p>
<p>In <code>docker-compose.yaml</code> file in <code>volumes</code> find the string:</p>
<div class="highlight"><pre><span></span><code><span class="l l-Scalar l-Scalar-Plain">./docker/dbdata:/opt/couchdb/data</span>
</code></pre></div>
<p>Replace this string with next value:</p>
<div class="highlight"><pre><span></span><code><span class="l l-Scalar l-Scalar-Plain">K:/couchdb:/opt/couchdb/data</span>
</code></pre></div>
<p>Run <strong>docker compose</strong> in the root directory to launch DB.</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>compose<span class="w"> </span>up
</code></pre></div>
<p>To stop the database, run the command:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>compose<span class="w"> </span>down
</code></pre></div></section><section class="print-page" id="examples-couchdb_load"><h1 id="examples-couchdb_load-couchdb-load">Couchdb load<a class="headerlink" href="#examples-couchdb_load-couchdb-load" title="Permanent link">&para;</a></h1>
<p>This is an example of storing the test result in CouchDB.
Test reports are written to the <strong>report</strong> database at the end of 
the testing process via <strong>CouchdbLoader</strong>.
The code for this example can be seen inside the hardpy package 
<a href="https://github.com/everypinio/hardpy/tree/main/examples/couchdb_load">CouchDB Load</a>.</p>
<h3 id="examples-couchdb_load-how-to-start">how to start<a class="headerlink" href="#examples-couchdb_load-how-to-start" title="Permanent link">&para;</a></h3>
<ol>
<li>Launch <code>hardpy init couchdb_load</code>.</li>
<li>Launch <a href="#documentation-database-couchdb-instance">CouchDH instance</a>.</li>
<li>Modify the files described below.</li>
<li>Launch <code>hardpy run couchdb_load</code>.</li>
</ol>
<h3 id="examples-couchdb_load-conftestpy">conftest.py<a class="headerlink" href="#examples-couchdb_load-conftestpy" title="Permanent link">&para;</a></h3>
<p>Contains settings and fixtures for all tests:</p>
<ul>
<li>The function of generating a report and recording it in the database <code>save_report_to_couchdb</code>;</li>
<li>The list of actions that will be performed after testing is filled in function <code>fill_actions_after_test</code>;</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">from</span> <span class="nn">hardpy</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">CouchdbLoader</span><span class="p">,</span>
    <span class="n">CouchdbConfig</span><span class="p">,</span>
    <span class="n">get_current_report</span><span class="p">,</span>
<span class="p">)</span>

<span class="k">def</span> <span class="nf">save_report_to_couchdb</span><span class="p">():</span>
    <span class="n">report</span> <span class="o">=</span> <span class="n">get_current_report</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">report</span><span class="p">:</span>
        <span class="n">loader</span> <span class="o">=</span> <span class="n">CouchdbLoader</span><span class="p">(</span><span class="n">CouchdbConfig</span><span class="p">())</span>
        <span class="n">loader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">report</span><span class="p">)</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">,</span> <span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fill_actions_after_test</span><span class="p">(</span><span class="n">post_run_functions</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
    <span class="n">post_run_functions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">save_report_to_couchdb</span><span class="p">)</span>
    <span class="k">yield</span>
</code></pre></div>
<h3 id="examples-couchdb_load-test_1py">test_1.py<a class="headerlink" href="#examples-couchdb_load-test_1py" title="Permanent link">&para;</a></h3>
<p>Contains two simple examples of a valid test.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">test_one</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="k">def</span> <span class="nf">test_two</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>
</code></pre></div>
<h3 id="examples-couchdb_load-test_2py">test_2.py<a class="headerlink" href="#examples-couchdb_load-test_2py" title="Permanent link">&para;</a></h3>
<p>Contains two simple examples: a valid test and an invalid test.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">test_three</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="k">def</span> <span class="nf">test_four</span><span class="p">():</span>
    <span class="k">raise</span> <span class="ne">AssertionError</span>
</code></pre></div></section><section class="print-page" id="examples-critical_test"><h1 id="examples-critical_test-critical-test-marker">Critical test marker<a class="headerlink" href="#examples-critical_test-critical-test-marker" title="Permanent link">&para;</a></h1>
<p>This is example of using the <strong>critical</strong> marker in <strong>pytest-hardpy</strong> to control test execution flow.</p>
<p>The <code>@pytest.mark.critical</code> marker allows to designate tests or entire modules as critical.
If a critical test fails or is skipped, all subsequent tests in the current and following modules will be skipped.</p>
<h3 id="examples-critical_test-how-to-start">how to start<a class="headerlink" href="#examples-critical_test-how-to-start" title="Permanent link">&para;</a></h3>
<ol>
<li>Launch <code>hardpy init critical_test</code>.</li>
<li>Launch <a href="#documentation-database-couchdb-instance">CouchDH instance</a>.</li>
<li>Modify the files described below.</li>
<li>Launch <code>hardpy run critical_test</code>.</li>
</ol>
<h3 id="examples-critical_test-test_criticalpy">test_critical.py<a class="headerlink" href="#examples-critical_test-test_criticalpy" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pytest</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">critical</span>
<span class="k">def</span> <span class="nf">test_core_feature</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">False</span>  <span class="c1"># This will fail</span>

<span class="k">def</span> <span class="nf">test_secondary_feature</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>  <span class="c1"># This will be skipped</span>
</code></pre></div>
<p>Output:</p>
<ul>
<li><code>test_core_feature</code>: Failed</li>
<li><code>test_secondary_feature</code>: Skipped</li>
</ul>
<h3 id="examples-critical_test-test_module_apy">test_module_a.py<a class="headerlink" href="#examples-critical_test-test_module_apy" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pytest</span>

<span class="n">pytestmark</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">critical</span>

<span class="k">def</span> <span class="nf">test_a1</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">False</span>  <span class="c1"># Fails</span>

<span class="k">def</span> <span class="nf">test_a2</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>  <span class="c1"># Skipped</span>
</code></pre></div>
<h3 id="examples-critical_test-test_module_bpy">test_module_b.py<a class="headerlink" href="#examples-critical_test-test_module_bpy" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">test_b1</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>  <span class="c1"># Skipped because module_a failed</span>
</code></pre></div>
<p>Output:</p>
<ul>
<li><code>test_a1</code>: Failed</li>
<li><code>test_a2</code>: Skipped</li>
<li><code>test_b1</code>: Skipped</li>
</ul></section><section class="print-page" id="examples-dialog_box"><h1 id="examples-dialog_box-dialog-box">Dialog box<a class="headerlink" href="#examples-dialog_box-dialog-box" title="Permanent link">&para;</a></h1>
<p>This is an example of testing dialog boxes using the <strong>HardPy</strong> library.
The code for this example can be seen inside the hardpy package
<a href="https://github.com/everypinio/hardpy/tree/main/examples/dialog_box">Dialog Box</a>.</p>
<p>Contains some examples of valid tests for dialog boxes.
To test images, create an <code>assets</code> folder in the <code>dialog_box</code> folder with the image <code>test.png</code>.</p>
<h3 id="examples-dialog_box-how-to-start">how to start<a class="headerlink" href="#examples-dialog_box-how-to-start" title="Permanent link">&para;</a></h3>
<ol>
<li>Launch <code>hardpy init dialog_box</code>.</li>
<li>Launch <a href="#documentation-database-couchdb-instance">CouchDH instance</a>.</li>
<li>Modify the files described below.</li>
<li>Launch <code>hardpy run dialog_box</code>.</li>
</ol>
<h3 id="examples-dialog_box-test_1_base_boxpy">test_1_base_box.py<a class="headerlink" href="#examples-dialog_box-test_1_base_boxpy" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">from</span> <span class="nn">hardpy</span> <span class="kn">import</span> <span class="n">DialogBox</span><span class="p">,</span> <span class="n">HTMLComponent</span><span class="p">,</span> <span class="n">ImageComponent</span><span class="p">,</span> <span class="n">run_dialog_box</span>

<span class="n">pytestmark</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">module_name</span><span class="p">(</span><span class="s2">&quot;Base dialog box&quot;</span><span class="p">)</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">case_name</span><span class="p">(</span><span class="s2">&quot;Empty test before&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_before</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">case_name</span><span class="p">(</span><span class="s2">&quot;Base dialog box with image&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_base_dialog_box_with_image</span><span class="p">():</span>
    <span class="n">dbx</span> <span class="o">=</span> <span class="n">DialogBox</span><span class="p">(</span>
        <span class="n">title_bar</span><span class="o">=</span><span class="s2">&quot;Operator check&quot;</span><span class="p">,</span>
        <span class="n">dialog_text</span><span class="o">=</span><span class="s2">&quot;Press the Confirm button&quot;</span><span class="p">,</span>
        <span class="n">image</span><span class="o">=</span><span class="n">ImageComponent</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="s2">&quot;assets/test.png&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">border</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
        <span class="n">html</span><span class="o">=</span><span class="n">HTMLComponent</span><span class="p">(</span><span class="n">html</span><span class="o">=</span><span class="s2">&quot;https://everypinio.github.io/hardpy/&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">is_raw_html</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">run_dialog_box</span><span class="p">(</span><span class="n">dbx</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">response</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">case_name</span><span class="p">(</span><span class="s2">&quot;Empty test after&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_after</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>
</code></pre></div>
<h3 id="examples-dialog_box-test_2_input_fieldpy">test_2_input_field.py<a class="headerlink" href="#examples-dialog_box-test_2_input_fieldpy" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">from</span> <span class="nn">hardpy</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">DialogBox</span><span class="p">,</span>
    <span class="n">ImageComponent</span><span class="p">,</span>
    <span class="n">NumericInputWidget</span><span class="p">,</span>
    <span class="n">TextInputWidget</span><span class="p">,</span>
    <span class="n">run_dialog_box</span><span class="p">,</span>
    <span class="n">set_message</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">pytestmark</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">module_name</span><span class="p">(</span><span class="s2">&quot;Input field dialog boxes&quot;</span><span class="p">)</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">case_name</span><span class="p">(</span><span class="s2">&quot;Text input with image&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_text_input_with_image</span><span class="p">():</span>
    <span class="n">dbx</span> <span class="o">=</span> <span class="n">DialogBox</span><span class="p">(</span>
        <span class="n">dialog_text</span><span class="o">=</span><span class="s2">&quot;Type &#39;ok&#39; and press the Confirm button&quot;</span><span class="p">,</span>
        <span class="n">title_bar</span><span class="o">=</span><span class="s2">&quot;Example of text input&quot;</span><span class="p">,</span>
        <span class="n">widget</span><span class="o">=</span><span class="n">TextInputWidget</span><span class="p">(),</span>
        <span class="n">image</span><span class="o">=</span><span class="n">ImageComponent</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="s2">&quot;assets/test.png&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">50</span><span class="p">),</span>
        <span class="n">font_size</span><span class="o">=</span><span class="mi">18</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">run_dialog_box</span><span class="p">(</span><span class="n">dbx</span><span class="p">)</span>
    <span class="n">set_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Entered text </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">response</span> <span class="o">==</span> <span class="s2">&quot;ok&quot;</span><span class="p">,</span> <span class="s2">&quot;The entered text is not correct&quot;</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">case_name</span><span class="p">(</span><span class="s2">&quot;Numeric input&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_num_input</span><span class="p">():</span>
    <span class="n">test_num</span> <span class="o">=</span> <span class="mi">123</span>
    <span class="n">dbx</span> <span class="o">=</span> <span class="n">DialogBox</span><span class="p">(</span>
        <span class="n">dialog_text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Enter the number </span><span class="si">{</span><span class="n">test_num</span><span class="si">}</span><span class="s2"> and press the Confirm button&quot;</span><span class="p">,</span>
        <span class="n">title_bar</span><span class="o">=</span><span class="s2">&quot;Example of entering a number&quot;</span><span class="p">,</span>
        <span class="n">widget</span><span class="o">=</span><span class="n">NumericInputWidget</span><span class="p">(),</span>
    <span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">run_dialog_box</span><span class="p">(</span><span class="n">dbx</span><span class="p">))</span>
    <span class="n">set_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Entered number </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">response</span> <span class="o">==</span> <span class="n">test_num</span><span class="p">,</span> <span class="s2">&quot;The entered number is not correct&quot;</span>
</code></pre></div>
<h3 id="examples-dialog_box-test_3_choice_controlpy">test_3_choice_control.py<a class="headerlink" href="#examples-dialog_box-test_3_choice_controlpy" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">from</span> <span class="nn">hardpy</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">CheckboxWidget</span><span class="p">,</span>
    <span class="n">DialogBox</span><span class="p">,</span>
    <span class="n">RadiobuttonWidget</span><span class="p">,</span>
    <span class="n">run_dialog_box</span><span class="p">,</span>
    <span class="n">set_message</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">pytestmark</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">module_name</span><span class="p">(</span><span class="s2">&quot;Choice control dialog boxes&quot;</span><span class="p">)</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">case_name</span><span class="p">(</span><span class="s2">&quot;Test dialog box with radiobutton&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_radiobutton</span><span class="p">():</span>
    <span class="n">dbx</span> <span class="o">=</span> <span class="n">DialogBox</span><span class="p">(</span>
        <span class="n">dialog_text</span><span class="o">=</span><span class="s1">&#39;Select item &quot;one&quot; out of several and click Confirm.&#39;</span><span class="p">,</span>
        <span class="n">title_bar</span><span class="o">=</span><span class="s2">&quot;Radiobutton example&quot;</span><span class="p">,</span>
        <span class="n">widget</span><span class="o">=</span><span class="n">RadiobuttonWidget</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="s2">&quot;three&quot;</span><span class="p">]),</span>
    <span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">run_dialog_box</span><span class="p">(</span><span class="n">dbx</span><span class="p">)</span>
    <span class="n">set_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Selected item </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">response</span> <span class="o">==</span> <span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;The answer is not correct&quot;</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">case_name</span><span class="p">(</span><span class="s2">&quot;Test dialog box with checkbox&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_checkbox</span><span class="p">():</span>
    <span class="n">dbx</span> <span class="o">=</span> <span class="n">DialogBox</span><span class="p">(</span>
        <span class="n">dialog_text</span><span class="o">=</span><span class="s1">&#39;Select items &quot;one&quot; and &quot;two&quot; and click the Confirm button&#39;</span><span class="p">,</span>
        <span class="n">title_bar</span><span class="o">=</span><span class="s2">&quot;Checkbox example&quot;</span><span class="p">,</span>
        <span class="n">widget</span><span class="o">=</span><span class="n">CheckboxWidget</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="s2">&quot;three&quot;</span><span class="p">]),</span>
    <span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">run_dialog_box</span><span class="p">(</span><span class="n">dbx</span><span class="p">)</span>
    <span class="n">set_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Selected item </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">correct_answer</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">}</span>
    <span class="k">assert</span> <span class="nb">set</span><span class="p">(</span><span class="n">response</span><span class="p">)</span> <span class="o">==</span> <span class="n">correct_answer</span><span class="p">,</span> <span class="s2">&quot;The answer is not correct&quot;</span>
</code></pre></div>
<h3 id="examples-dialog_box-test_4_multiple_stepspy">test_4_multiple_steps.py<a class="headerlink" href="#examples-dialog_box-test_4_multiple_stepspy" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">from</span> <span class="nn">hardpy</span> <span class="kn">import</span> <span class="n">DialogBox</span><span class="p">,</span> <span class="n">HTMLComponent</span><span class="p">,</span> <span class="n">ImageComponent</span><span class="p">,</span> <span class="n">MultistepWidget</span><span class="p">,</span> <span class="n">StepWidget</span><span class="p">,</span> <span class="n">run_dialog_box</span>

<span class="n">pytestmark</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">module_name</span><span class="p">(</span><span class="s2">&quot;Multiple steps dialog box&quot;</span><span class="p">)</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">case_name</span><span class="p">(</span><span class="s2">&quot;Multistep&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_multiple_steps</span><span class="p">():</span>
    <span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">StepWidget</span><span class="p">(</span><span class="s2">&quot;Step 1&quot;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Content for step&quot;</span><span class="p">),</span>
        <span class="n">StepWidget</span><span class="p">(</span>
            <span class="s2">&quot;Step 2&quot;</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Content for step 2&quot;</span><span class="p">,</span>
            <span class="n">image</span><span class="o">=</span><span class="n">ImageComponent</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="s2">&quot;assets/test.png&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">50</span><span class="p">),</span>
        <span class="p">),</span>
        <span class="n">StepWidget</span><span class="p">(</span>
            <span class="s2">&quot;Step 3&quot;</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">html</span><span class="o">=</span><span class="n">HTMLComponent</span><span class="p">(</span><span class="n">html</span><span class="o">=</span><span class="s2">&quot;https://everypinio.github.io/hardpy/&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">is_raw_html</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
        <span class="p">),</span>
    <span class="p">]</span>
    <span class="n">dbx</span> <span class="o">=</span> <span class="n">DialogBox</span><span class="p">(</span>
        <span class="n">dialog_text</span><span class="o">=</span><span class="s2">&quot;Follow the steps and click Confirm&quot;</span><span class="p">,</span>
        <span class="n">widget</span><span class="o">=</span><span class="n">MultistepWidget</span><span class="p">(</span><span class="n">steps</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">run_dialog_box</span><span class="p">(</span><span class="n">dbx</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">response</span>
</code></pre></div>
<h3 id="examples-dialog_box-test_5_htmlpy">test_5_html.py<a class="headerlink" href="#examples-dialog_box-test_5_htmlpy" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pytest</span>

<span class="kn">from</span> <span class="nn">hardpy</span> <span class="kn">import</span> <span class="n">DialogBox</span><span class="p">,</span> <span class="n">HTMLComponent</span><span class="p">,</span> <span class="n">run_dialog_box</span>

<span class="n">pytestmark</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">module_name</span><span class="p">(</span><span class="s2">&quot;Dialog box with HTML&quot;</span><span class="p">)</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">case_name</span><span class="p">(</span><span class="s2">&quot;Base dialog box with html code&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_base_dialog_box_with_html_code</span><span class="p">():</span>
    <span class="n">test_html</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    &lt;!DOCTYPE html&gt;</span>
<span class="s2">    &lt;html&gt;</span>
<span class="s2">    &lt;body&gt;</span>

<span class="s2">    &lt;h1&gt;Test HTML Page&lt;/h1&gt;</span>

<span class="s2">    &lt;p&gt;It is testing page.&lt;/p&gt;</span>
<span class="s2">    &lt;p&gt;You can put anything on it.&lt;/p&gt;</span>

<span class="s2">    &lt;/body&gt;</span>
<span class="s2">    &lt;/html&gt;</span>
<span class="s2">    &quot;&quot;&quot;</span>
    <span class="n">dbx</span> <span class="o">=</span> <span class="n">DialogBox</span><span class="p">(</span>
        <span class="n">title_bar</span><span class="o">=</span><span class="s2">&quot;Operator check&quot;</span><span class="p">,</span>
        <span class="n">dialog_text</span><span class="o">=</span><span class="s2">&quot;Press the Confirm button&quot;</span><span class="p">,</span>
        <span class="n">html</span><span class="o">=</span><span class="n">HTMLComponent</span><span class="p">(</span><span class="n">html</span><span class="o">=</span><span class="n">test_html</span><span class="p">,</span> <span class="n">is_raw_html</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">50</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">run_dialog_box</span><span class="p">(</span><span class="n">dbx</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">response</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">case_name</span><span class="p">(</span><span class="s2">&quot;Base dialog box with html link&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_base_dialog_box_with_html_link</span><span class="p">():</span>
    <span class="n">dbx</span> <span class="o">=</span> <span class="n">DialogBox</span><span class="p">(</span>
        <span class="n">title_bar</span><span class="o">=</span><span class="s2">&quot;Operator check&quot;</span><span class="p">,</span>
        <span class="n">dialog_text</span><span class="o">=</span><span class="s2">&quot;Press the Confirm button&quot;</span><span class="p">,</span>
        <span class="n">html</span><span class="o">=</span><span class="n">HTMLComponent</span><span class="p">(</span>
            <span class="n">html</span><span class="o">=</span><span class="s2">&quot;https://everypinio.github.io/hardpy/&quot;</span><span class="p">,</span>
            <span class="n">is_raw_html</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">border</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">run_dialog_box</span><span class="p">(</span><span class="n">dbx</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">response</span>
</code></pre></div></section><section class="print-page" id="examples-dialog_box_plot"><h1 id="examples-dialog_box_plot-plot-in-the-dialog-box">Plot in the dialog box<a class="headerlink" href="#examples-dialog_box_plot-plot-in-the-dialog-box" title="Permanent link">&para;</a></h1>
<p>This example demonstrates how to create and display a plot within a dialog box using <code>matplotlib</code> and <code>mpld3</code>.
The plot is generated as an HTML component and embedded into a dialog box, which can be used for testing or user interaction purposes.</p>
<p>The process involves generating a plot using <code>matplotlib</code>, converting it to HTML using <code>mpld3</code>, and then embedding the HTML into a dialog box.
This approach is particularly useful for scenarios where visual data needs to be presented to the user or tester in an interactive manner.</p>
<h1 align="center">
    <a class="glightbox" href="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dialog_box_with_plot.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/dialog_box/dialog_box_with_plot.png" alt="plot"></a>
</h1>

<h3 id="examples-dialog_box_plot-how-to-start">how to start<a class="headerlink" href="#examples-dialog_box_plot-how-to-start" title="Permanent link">&para;</a></h3>
<ol>
<li>Launch <code>hardpy init html_plot</code>.</li>
<li>Install Required Packages <code>pip install matplotlib mpld3</code>.</li>
<li>Create your <code>test_plot.py</code> file with the test case.</li>
<li>Launch <a href="#documentation-database-couchdb-instance">CouchDH instance</a>.</li>
<li>Launch <code>hardpy run html_plot</code>.</li>
</ol>
<h3 id="examples-dialog_box_plot-test_plotpy">test_plot.py<a class="headerlink" href="#examples-dialog_box_plot-test_plotpy" title="Permanent link">&para;</a></h3>
<p>The following code demonstrates how to create a simple plot and display it in a dialog box:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">mpld3</span>
<span class="kn">import</span> <span class="nn">pytest</span>

<span class="kn">from</span> <span class="nn">hardpy</span> <span class="kn">import</span> <span class="n">DialogBox</span><span class="p">,</span> <span class="n">HTMLComponent</span><span class="p">,</span> <span class="n">run_dialog_box</span>

<span class="n">pytestmark</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">module_name</span><span class="p">(</span><span class="s2">&quot;Dialog box with HTML&quot;</span><span class="p">)</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">case_name</span><span class="p">(</span><span class="s2">&quot;Base dialog box with html code&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_dialog_box_with_html_code</span><span class="p">():</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">30</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;X-axis&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Y-axis&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Simple Plot&quot;</span><span class="p">)</span>

    <span class="n">test_html</span> <span class="o">=</span> <span class="n">mpld3</span><span class="o">.</span><span class="n">fig_to_html</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

    <span class="n">dbx</span> <span class="o">=</span> <span class="n">DialogBox</span><span class="p">(</span>
        <span class="n">title_bar</span><span class="o">=</span><span class="s2">&quot;Operator check&quot;</span><span class="p">,</span>
        <span class="n">dialog_text</span><span class="o">=</span><span class="s2">&quot;Press the Confirm button&quot;</span><span class="p">,</span>
        <span class="n">html</span><span class="o">=</span><span class="n">HTMLComponent</span><span class="p">(</span><span class="n">html</span><span class="o">=</span><span class="n">test_html</span><span class="p">,</span> <span class="n">is_raw_html</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">run_dialog_box</span><span class="p">(</span><span class="n">dbx</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">response</span>
</code></pre></div></section><section class="print-page" id="examples-hardpy_launch"><h1 id="examples-hardpy_launch-hardpy-launch">HardPy launch<a class="headerlink" href="#examples-hardpy_launch-hardpy-launch" title="Permanent link">&para;</a></h1>
<p><strong>HardPy</strong> can be started from either the operator panel or the terminal.
Below we will look at all the launch options.</p>
<h3 id="examples-hardpy_launch-how-to-start">how to start<a class="headerlink" href="#examples-hardpy_launch-how-to-start" title="Permanent link">&para;</a></h3>
<p>Initialize the <strong>HardPy</strong> project:</p>
<ol>
<li>Launch <code>hardpy init test_project</code>.</li>
<li>Launch <a href="#documentation-database-couchdb-instance">CouchDH instance</a>.</li>
</ol>
<h3 id="examples-hardpy_launch-launch-options">launch options<a class="headerlink" href="#examples-hardpy_launch-launch-options" title="Permanent link">&para;</a></h3>
<h4 id="examples-hardpy_launch-1-operator-panel">1. Operator panel<a class="headerlink" href="#examples-hardpy_launch-1-operator-panel" title="Permanent link">&para;</a></h4>
<ol>
<li>
<p>Launch operator panel:
   <div class="highlight"><pre><span></span><code>hardpy<span class="w"> </span>run<span class="w"> </span>test_project
</code></pre></div></p>
</li>
<li>
<p>Open the operator panel in your browser at: <a href="http://localhost:8000/">http://localhost:8000/</a>.</p>
</li>
<li>Click the <strong>Start</strong> button.</li>
</ol>
<h4 id="examples-hardpy_launch-2-start-command">2. Start command<a class="headerlink" href="#examples-hardpy_launch-2-start-command" title="Permanent link">&para;</a></h4>
<ol>
<li>Launch operator panel:
   <div class="highlight"><pre><span></span><code>hardpy<span class="w"> </span>run<span class="w"> </span>test_project
</code></pre></div></li>
<li>Run the tests by executing the following command in the terminal:
    <div class="highlight"><pre><span></span><code>hardpy<span class="w"> </span>start<span class="w"> </span>test_project
</code></pre></div></li>
</ol>
<h4 id="examples-hardpy_launch-3-pytest-in-console">3. Pytest in console<a class="headerlink" href="#examples-hardpy_launch-3-pytest-in-console" title="Permanent link">&para;</a></h4>
<p>Run the tests by executing the following command in the terminal:</p>
<div class="highlight"><pre><span></span><code>pytest<span class="w"> </span>test_project
</code></pre></div>
<h5 id="examples-hardpy_launch-31-pytest-in-console-with-launching-operator-panel">3.1. Pytest in console with launching operator panel<a class="headerlink" href="#examples-hardpy_launch-31-pytest-in-console-with-launching-operator-panel" title="Permanent link">&para;</a></h5>
<p>If the operator panel is running, the tests will start after the command in the terminal in the same way as by clicking on the <code>Start</code> button.</p>
<h5 id="examples-hardpy_launch-32-pytest-in-console-without-launching-operator-panel">3.2. Pytest in console without launching operator panel<a class="headerlink" href="#examples-hardpy_launch-32-pytest-in-console-without-launching-operator-panel" title="Permanent link">&para;</a></h5>
<p>If the operator panel has not been started, the tests will also run, but without visualization.</p>
<details class="warning" open="open">
<summary>Warning</summary>
<p>This method is only appropriate if you are not using any operator panel features such as operator messages and dialog boxes.</p>
</details>
<h4 id="examples-hardpy_launch-4-ide">4. IDE<a class="headerlink" href="#examples-hardpy_launch-4-ide" title="Permanent link">&para;</a></h4>
<p>An example of starting in vscode is as follows.
If you use other IDEs, explore the possibility of running tests in your environment.</p>
<ol>
<li>Open the <a href="https://code.visualstudio.com/docs/editor/testing">Testing</a> extension in VS Code.</li>
<li>Run the tests through the extension interface.</li>
</ol>
<h5 id="examples-hardpy_launch-41-pytest-in-testing-with-launching-operator-panel">4.1. Pytest in Testing with launching operator panel<a class="headerlink" href="#examples-hardpy_launch-41-pytest-in-testing-with-launching-operator-panel" title="Permanent link">&para;</a></h5>
<p>If the operator panel is running, the tests will start after launching in Testing in the same way as by clicking on the <code>Start</code> button.</p>
<h5 id="examples-hardpy_launch-42-pytest-in-testing-without-launching-operator-panel">4.2. Pytest in Testing without launching operator panel<a class="headerlink" href="#examples-hardpy_launch-42-pytest-in-testing-without-launching-operator-panel" title="Permanent link">&para;</a></h5>
<p>If the operator panel has not been started, the tests will also run, but without visualization.</p>
<details class="warning" open="open">
<summary>Warning</summary>
<p>This method is only appropriate if you are not using any operator panel features such as operator messages and dialog boxes.</p>
</details></section><section class="print-page" id="examples-hello_hardpy"><h1 id="examples-hello_hardpy-hello-hardpy">Hello hardpy<a class="headerlink" href="#examples-hello_hardpy-hello-hardpy" title="Permanent link">&para;</a></h1>
<p>This is the simplest example of using <strong>HardPy</strong>.
The code for this example can be seen inside the hardpy package <a href="https://github.com/everypinio/hardpy/tree/main/examples/hello_hardpy">Hello Hardpy</a>.</p>
<h3 id="examples-hello_hardpy-how-to-start">how to start<a class="headerlink" href="#examples-hello_hardpy-how-to-start" title="Permanent link">&para;</a></h3>
<ol>
<li>Launch <code>hardpy init hello_hardpy</code>.</li>
<li>Launch <a href="#documentation-database-couchdb-instance">CouchDH instance</a>.</li>
<li>Launch <code>hardpy run hello_hardpy</code>.</li>
</ol>
<h3 id="examples-hello_hardpy-test_1py">test_1.py<a class="headerlink" href="#examples-hello_hardpy-test_1py" title="Permanent link">&para;</a></h3>
<p>Contains the simplest example of a valid test.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">test_one</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>
</code></pre></div></section><section class="print-page" id="examples-launch_arguments"><h1 id="examples-launch_arguments-launch-arguments">Launch arguments<a class="headerlink" href="#examples-launch_arguments-launch-arguments" title="Permanent link">&para;</a></h1>
<p><strong>HardPy</strong> launches pytest tests.
User can add own arguments and options for test execution.
For example, user can write own script for <strong>HardPy</strong> to run with special arguments, such as device serial number, and use it in tests.</p>
<h3 id="examples-launch_arguments-how-to-start">how to start<a class="headerlink" href="#examples-launch_arguments-how-to-start" title="Permanent link">&para;</a></h3>
<ol>
<li>Launch <code>hardpy init launch_arg</code>.</li>
<li>Launch <a href="#documentation-database-couchdb-instance">CouchDH instance</a>.</li>
<li>Modify the files described below.</li>
<li>Launch <code>hardpy run launch_arg</code>.</li>
</ol>
<p>So that you can run <strong>HardPy</strong> in separate scripts that use the arguments, you can use pytest's built-in <code>addoption</code> method.
You can read more about it <a href="https://docs.pytest.org/en/stable/example/simple.html#how-to-change-command-line-options-defaults">here</a>.</p>
<h3 id="examples-launch_arguments-conftestpy">conftest.py<a class="headerlink" href="#examples-launch_arguments-conftestpy" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pytest_addoption</span><span class="p">(</span><span class="n">parser</span><span class="p">):</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">addoption</span><span class="p">(</span><span class="s2">&quot;--my-opt&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;add my opt&quot;</span><span class="p">)</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">my_opt</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;--my-opt&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="examples-launch_arguments-test_1py">test_1.py<a class="headerlink" href="#examples-launch_arguments-test_1py" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">test_custom_option_1</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">custom_value</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;--my-opt&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Custom option value: </span><span class="si">{</span><span class="n">custom_value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">custom_value</span> <span class="o">==</span> <span class="s2">&quot;hello&quot;</span>

<span class="k">def</span> <span class="nf">test_custom_option_2</span><span class="p">(</span><span class="n">my_opt</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Custom option value: </span><span class="si">{</span><span class="n">my_opt</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">my_opt</span> <span class="o">==</span> <span class="s2">&quot;hello&quot;</span>
</code></pre></div>
<h3 id="examples-launch_arguments-launch-test-with-your-parameter">launch test with your parameter<a class="headerlink" href="#examples-launch_arguments-launch-test-with-your-parameter" title="Permanent link">&para;</a></h3>
<p>You can launch tests with this command:</p>
<div class="highlight"><pre><span></span><code>pytest --my-opt hello
</code></pre></div>
<p>Alternatively, you can add the parameter <code>--my-opt hello</code> to the <code>pytest.ini</code> file.</p></section><section class="print-page" id="examples-logging"><h1 id="examples-logging-logging-in-tests">Logging in tests<a class="headerlink" href="#examples-logging-logging-in-tests" title="Permanent link">&para;</a></h1>
<p>How to add logging to your tests using Python's built-in <code>logging</code> package.</p>
<p>Python's built-in <code>logging</code> package provides a flexible way to add logging to your tests, which can help with debugging and monitoring test execution.</p>
<p>Logging in tests is valuable because it:</p>
<ul>
<li>Provides visibility into test execution flow</li>
<li>Helps diagnose failures by capturing context</li>
<li>Creates an audit trail of test operations</li>
<li>Enables performance monitoring</li>
<li>Facilitates troubleshooting in CI/CD pipelines</li>
</ul>
<p>The logs will be written to:</p>
<ul>
<li>Console output</li>
<li>CI/CD system logs if running in a pipeline</li>
</ul>
<p>While Python's <code>logging</code> package is versatile, <strong>HardPy</strong> offers additional specialized logging methods:</p>
<ul>
<li><a href="#features-features-database-logging-with-set_message">Database Logging with set_message</a></li>
<li><a href="#features-features-interactive-dialogs-with-run_dialog_box">Interactive Dialogs with run_dialog_box</a> </li>
<li><a href="#features-features-operator-messages-with-set_operator_message">Operator Messages with set_operator_message</a></li>
</ul>
<h2 id="examples-logging-how-to-implement-logging">How to implement logging<a class="headerlink" href="#examples-logging-how-to-implement-logging" title="Permanent link">&para;</a></h2>
<h3 id="examples-logging-basic-setup">Basic setup<a class="headerlink" href="#examples-logging-basic-setup" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Import the logging module where needed:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">logging</span>
</code></pre></div>
</li>
<li>
<p>Add a fixture to <code>conftest.py</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;module&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">module_log</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">pytest</span><span class="o">.</span><span class="n">FixtureRequest</span><span class="p">):</span>
    <span class="n">log_name</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="vm">__name__</span>
    <span class="k">yield</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">log_name</span><span class="p">)</span>
</code></pre></div>
</li>
</ol>
<h3 id="examples-logging-using-the-logger">Using the logger<a class="headerlink" href="#examples-logging-using-the-logger" title="Permanent link">&para;</a></h3>
<p>You can call logging commands anywhere in your tests:</p>
<div class="highlight"><pre><span></span><code><span class="bp">self</span><span class="o">.</span><span class="n">_log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Saving user credentials for registration test case&quot;</span><span class="p">)</span>
</code></pre></div>
<p>Example of logging in a test function:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">test_log</span><span class="p">(</span><span class="n">module_log</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span><span class="p">):</span>
    <span class="n">module_log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;DUT serial number logged&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="kc">True</span>
</code></pre></div>
<h2 id="examples-logging-configuration">Configuration<a class="headerlink" href="#examples-logging-configuration" title="Permanent link">&para;</a></h2>
<p>To configure logging parameters, add these settings to your <code>pytest.ini</code> file:</p>
<div class="highlight"><pre><span></span><code><span class="k">[pytest]</span>
<span class="na">log_cli</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">true</span>
<span class="na">log_cli_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">INFO</span>
<span class="na">log_cli_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">%(asctime)s [%(levelname)s] %(message)s</span>
<span class="na">log_cli_date_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">%H:%M:%S</span>
</code></pre></div>
<p>You can find the description in <a href="https://docs.pytest.org/en/latest/how-to/logging.html">How to manage logging</a></p>
<h3 id="examples-logging-explanation-of-configuration-options">Explanation of configuration options<a class="headerlink" href="#examples-logging-explanation-of-configuration-options" title="Permanent link">&para;</a></h3>
<ul>
<li><code>log_cli = true</code>: Enables logging output during test execution</li>
<li><code>log_cli_level = INFO</code>: Sets the minimum logging level to display</li>
<li><code>log_cli_format</code>: Defines the format of log messages:</li>
<li><code>%(asctime)s</code>: Timestamp</li>
<li><code>[%(levelname)s]</code>: Log level (INFO, WARNING, etc.)</li>
<li><code>%(message)s</code>: The actual log message</li>
<li><code>log_cli_date_format = %H:%M:%S</code>: Sets the timestamp format to hours:minutes:seconds</li>
</ul></section><section class="print-page" id="examples-minute_parity"><h1 id="examples-minute_parity-minute-parity">Minute parity<a class="headerlink" href="#examples-minute_parity-minute-parity" title="Permanent link">&para;</a></h1>
<p>This is an example of using <strong>pytest-hardpy</strong> functions, storing
the result to CouchDB and writing a simple driver.
The code for this example can be seen inside the hardpy package
<a href="https://github.com/everypinio/hardpy/tree/main/examples/minute_parity">Minute parity</a>.</p>
<h3 id="examples-minute_parity-how-to-start">how to start<a class="headerlink" href="#examples-minute_parity-how-to-start" title="Permanent link">&para;</a></h3>
<ol>
<li>Launch <code>hardpy init minute_parity</code>.</li>
<li>Launch <a href="#documentation-database-couchdb-instance">CouchDH instance</a>.</li>
<li>Modify the files described below.</li>
<li>Launch <code>hardpy run minute_parity</code>.</li>
</ol>
<h3 id="examples-minute_parity-conftestpy">conftest.py<a class="headerlink" href="#examples-minute_parity-conftestpy" title="Permanent link">&para;</a></h3>
<p>Contains settings and fixtures for all tests:</p>
<ul>
<li>The function of generating a report and recording it in the database <code>finish_executing</code>;</li>
<li>The example of devices used as a fixture in <code>driver_example</code>;</li>
<li>The list of actions that will be performed after testing is filled in function <code>fill_actions_after_test</code>;</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">from</span> <span class="nn">driver_example</span> <span class="kn">import</span> <span class="n">DriverExample</span>
<span class="kn">from</span> <span class="nn">hardpy</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">CouchdbConfig</span><span class="p">,</span>
    <span class="n">CouchdbLoader</span><span class="p">,</span>
    <span class="n">get_current_report</span><span class="p">,</span>
<span class="p">)</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">driver_example</span><span class="p">():</span>
    <span class="n">example</span> <span class="o">=</span> <span class="n">DriverExample</span><span class="p">()</span>
    <span class="k">yield</span> <span class="n">example</span>
    <span class="n">example</span><span class="o">.</span><span class="n">random_method</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">finish_executing</span><span class="p">():</span>
    <span class="n">report</span> <span class="o">=</span> <span class="n">get_current_report</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">report</span><span class="p">:</span>
        <span class="n">loader</span> <span class="o">=</span> <span class="n">CouchdbLoader</span><span class="p">(</span><span class="n">CouchdbConfig</span><span class="p">())</span>
        <span class="n">loader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">report</span><span class="p">)</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">,</span> <span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fill_actions_after_test</span><span class="p">(</span><span class="n">post_run_functions</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
    <span class="n">post_run_functions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">finish_executing</span><span class="p">)</span>
    <span class="k">yield</span>
</code></pre></div>
<h3 id="examples-minute_parity-driver_examplepy">driver_example.py<a class="headerlink" href="#examples-minute_parity-driver_examplepy" title="Permanent link">&para;</a></h3>
<p>An example of writing a simple device driver.
The driver returns the current minute in the OS.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">from</span> <span class="nn">hardpy</span> <span class="kn">import</span> <span class="n">set_operator_message</span>

<span class="k">class</span> <span class="nc">DriverExample</span><span class="p">:</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">current_minute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">current_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">current_time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%M&quot;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">random_method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</code></pre></div>
<h3 id="examples-minute_parity-test_1py">test_1.py<a class="headerlink" href="#examples-minute_parity-test_1py" title="Permanent link">&para;</a></h3>
<p>Contains tests related to preparation for the testing process:</p>
<ul>
<li>The name of the test module for the web interface is set to <code>pytest.mark.module_name</code>;</li>
<li>The name of the test cases for the web interface is set to <code>pytest.mark.case_name</code>;</li>
<li>The device under test (DUT) info is stored in the database in <code>test_dut_info</code>;</li>
<li>The test stand info is store in the database in <code>test_stand_info</code>;</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">uuid</span> <span class="kn">import</span> <span class="n">uuid4</span>
<span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">import</span> <span class="nn">hardpy</span>

<span class="n">pytestmark</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">module_name</span><span class="p">(</span><span class="s2">&quot;Testing preparation&quot;</span><span class="p">)</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">case_name</span><span class="p">(</span><span class="s2">&quot;DUT info&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_dut_info</span><span class="p">():</span>
    <span class="n">serial_number</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid4</span><span class="p">())[:</span><span class="mi">6</span><span class="p">]</span>
    <span class="n">hardpy</span><span class="o">.</span><span class="n">set_dut_serial_number</span><span class="p">(</span><span class="n">serial_number</span><span class="p">)</span>
    <span class="n">hardpy</span><span class="o">.</span><span class="n">set_dut_part_number</span><span class="p">(</span><span class="s2">&quot;part_number_1&quot;</span><span class="p">)</span>
    <span class="n">info</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;batch&quot;</span><span class="p">:</span> <span class="s2">&quot;test_batch&quot;</span><span class="p">,</span> <span class="s2">&quot;board_rev&quot;</span><span class="p">:</span> <span class="s2">&quot;rev_1&quot;</span><span class="p">}</span>
    <span class="n">hardpy</span><span class="o">.</span><span class="n">set_dut_info</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">case_name</span><span class="p">(</span><span class="s2">&quot;Test stand info&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_stand_info</span><span class="p">():</span>
    <span class="n">test_stand_name</span> <span class="o">=</span> <span class="s2">&quot;Stand 1&quot;</span>
    <span class="n">hardpy</span><span class="o">.</span><span class="n">set_stand_name</span><span class="p">(</span><span class="n">test_stand_name</span><span class="p">)</span>
    <span class="n">hardpy</span><span class="o">.</span><span class="n">set_stand_location</span><span class="p">(</span><span class="s2">&quot;Moon&quot;</span><span class="p">)</span>
    <span class="n">hardpy</span><span class="o">.</span><span class="n">set_stand_number</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">info</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;some_info&quot;</span><span class="p">:</span> <span class="s2">&quot;123&quot;</span><span class="p">,</span>
        <span class="s2">&quot;release&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0.0&quot;</span>
    <span class="p">}</span>
    <span class="n">hardpy</span><span class="o">.</span><span class="n">set_stand_info</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
    <span class="k">assert</span> <span class="kc">True</span>
</code></pre></div>
<h3 id="examples-minute_parity-test_2py">test_2.py<a class="headerlink" href="#examples-minute_parity-test_2py" title="Permanent link">&para;</a></h3>
<p>Contains basic tests:</p>
<ul>
<li>The name of the test module for the web interface is set to <code>pytest.mark.module_name</code>;</li>
<li>The name of the test cases for the web interface is set to <code>pytest.mark.case_name</code>;</li>
<li>An example of using a driver to get the current minute in <code>test_minute_parity</code>;</li>
<li>An example of saving a test case artifact to the database using <code>set_case_artifact</code>;</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">from</span> <span class="nn">driver_example</span> <span class="kn">import</span> <span class="n">DriverExample</span>
<span class="kn">import</span> <span class="nn">hardpy</span>

<span class="n">pytestmark</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">module_name</span><span class="p">(</span><span class="s2">&quot;Main tests&quot;</span><span class="p">)</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">case_name</span><span class="p">(</span><span class="s2">&quot;Minute check&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_minute_parity</span><span class="p">(</span><span class="n">driver_example</span><span class="p">:</span> <span class="n">DriverExample</span><span class="p">):</span>
    <span class="n">minute</span> <span class="o">=</span> <span class="n">driver_example</span><span class="o">.</span><span class="n">current_minute</span>
    <span class="n">hardpy</span><span class="o">.</span><span class="n">set_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Current minute </span><span class="si">{</span><span class="n">minute</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">minute</span> <span class="o">%</span> <span class="mi">2</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;minute&quot;</span><span class="p">:</span> <span class="n">minute</span><span class="p">}</span>
    <span class="n">hardpy</span><span class="o">.</span><span class="n">set_case_artifact</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;The test failed because </span><span class="si">{</span><span class="n">minute</span><span class="si">}</span><span class="s2"> is odd! Try again!&quot;</span>
</code></pre></div>
<h3 id="examples-minute_parity-test_3py">test_3.py<a class="headerlink" href="#examples-minute_parity-test_3py" title="Permanent link">&para;</a></h3>
<p>Contains the final tests of the testing process:</p>
<ul>
<li>The name of the test module for the web interface is set to <code>pytest.mark.module_name</code>;</li>
<li>The name of the test cases for the web interface is set to <code>pytest.mark.case_name</code>;</li>
<li>An example of setting and updating a message for a web interface using <code>set_message</code>;</li>
<li><code>test_3</code> depends on <code>test_minute_parity</code> from <code>test_2</code>.
Dependency is set to <code>pytest.mark.dependency</code>.
If <code>test_2::test_minute_parity</code> fails, <code>test_3</code> will be skipped</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>
<span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">import</span> <span class="nn">hardpy</span>

<span class="n">pytestmark</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">module_name</span><span class="p">(</span><span class="s2">&quot;End of testing&quot;</span><span class="p">),</span>
    <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">dependency</span><span class="p">(</span><span class="s2">&quot;test_2::test_minute_parity&quot;</span><span class="p">),</span>
<span class="p">]</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">case_name</span><span class="p">(</span><span class="s2">&quot;Final case&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_one</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">hardpy</span><span class="o">.</span><span class="n">set_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Time left until testing ends </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2"> s&quot;</span><span class="p">,</span> <span class="s2">&quot;updated_status&quot;</span><span class="p">)</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">hardpy</span><span class="o">.</span><span class="n">set_message</span><span class="p">(</span><span class="s2">&quot;Testing ended&quot;</span><span class="p">,</span> <span class="s2">&quot;updated_status&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="kc">True</span>
</code></pre></div></section><section class="print-page" id="examples-multiple_stands"><h1 id="examples-multiple_stands-multiple-stands">Multiple stands<a class="headerlink" href="#examples-multiple_stands-multiple-stands" title="Permanent link">&para;</a></h1>
<p>This is an example of running multiple stands on one PC.</p>
<p>The example implements the launch of two stands and three CouchDB Instances.</p>
<p>Each stand will record reports on the conducted testing in the CouchDB Instance
assigned to it in the <strong>runstore</strong> and <strong>statestore</strong> databases.
The third CouchDB Instance is needed to store reports in the <strong>report</strong>
database on each conducted test of each stand.</p>
<p>You can learn more about storing reports here
<a href="#documentation-database-couchdb-instance">Couchdb instance</a>.</p>
<h3 id="examples-multiple_stands-projects">projects<a class="headerlink" href="#examples-multiple_stands-projects" title="Permanent link">&para;</a></h3>
<ul>
<li>Create 2 separate projects.</li>
</ul>
<div class="highlight"><pre><span></span><code>hardpy<span class="w"> </span>init<span class="w"> </span>tests_1
</code></pre></div>
<div class="highlight"><pre><span></span><code>hardpy<span class="w"> </span>init<span class="w"> </span>tests_2<span class="w"> </span>--database-port<span class="w"> </span><span class="m">5985</span><span class="w"> </span>--frontend-port<span class="w"> </span><span class="m">8001</span>
</code></pre></div>
<h3 id="examples-multiple_stands-databases">databases<a class="headerlink" href="#examples-multiple_stands-databases" title="Permanent link">&para;</a></h3>
<p>For the third database, you can use <code>hardpy init</code> and delete
all files except the database folder and the <code>docker-compose.yaml</code> file.</p>
<div class="highlight"><pre><span></span><code>hardpy<span class="w"> </span>init<span class="w"> </span>third_database<span class="w"> </span>--database-port<span class="w"> </span><span class="m">5986</span>
</code></pre></div>
<h4 id="examples-multiple_stands-conftestpy">conftest.py<a class="headerlink" href="#examples-multiple_stands-conftestpy" title="Permanent link">&para;</a></h4>
<p>Modify <code>conftest.py</code> file in each project.
Contains settings and fixtures for all tests:</p>
<ul>
<li>The function of generating a report and recording it in the database <code>save_report_to_couchdb</code>;</li>
<li>The list of actions that will be performed after testing is filled in function <code>fill_actions_after_test</code>;</li>
</ul>
<p>To store reports from all booths in the third CouchDB Instance, specify the
port numbers of this CouchDB Instance in the file <code>conftest.py</code> in the folder of each stand.</p>
<div class="highlight"><pre><span></span><code>import<span class="w"> </span>pytest
from<span class="w"> </span>hardpy<span class="w"> </span>import<span class="w"> </span><span class="o">(</span>
<span class="w">    </span>CouchdbLoader,
<span class="w">    </span>CouchdbConfig,
<span class="w">    </span>get_current_report,
<span class="o">)</span>

def<span class="w"> </span>save_report_to_couchdb<span class="o">()</span>:
<span class="w">    </span><span class="nv">report</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>get_current_report<span class="o">()</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span>report:
<span class="w">        </span><span class="nv">loader</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>CouchdbLoader<span class="o">(</span>CouchdbConfig<span class="o">(</span><span class="nv">port</span><span class="o">=</span><span class="m">5986</span><span class="o">))</span>
<span class="w">        </span>loader.load<span class="o">(</span>report<span class="o">)</span>

@pytest.fixture<span class="o">(</span><span class="nv">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span>,<span class="w"> </span><span class="nv">autouse</span><span class="o">=</span>True<span class="o">)</span>
def<span class="w"> </span>fill_actions_after_test<span class="o">(</span>post_run_functions:<span class="w"> </span>list<span class="o">)</span>:
<span class="w">    </span>post_run_functions.append<span class="o">(</span>save_report_to_couchdb<span class="o">)</span>
<span class="w">    </span>yield
</code></pre></div>
<ul>
<li><code>5986</code> - port of the database with reports</li>
</ul>
<h3 id="examples-multiple_stands-how-to-start">how to start<a class="headerlink" href="#examples-multiple_stands-how-to-start" title="Permanent link">&para;</a></h3>
<ol>
<li>Start all databases via <strong>docker compose</strong>.</li>
<li>Launch both project via <code>hardpy run &lt;project_name&gt;</code>.</li>
</ol></section><section class="print-page" id="examples-operator_msg"><h1 id="examples-operator_msg-operator-message">Operator message<a class="headerlink" href="#examples-operator_msg-operator-message" title="Permanent link">&para;</a></h1>
<p>The <a href="#documentation-pytest_hardpy-set_operator_message">set_operator_message</a>
function is intended for sending messages to the operator.
Operator messages can be used before, after, and during tests.</p>
<p><strong>set_operator_message</strong> can be used in conjunction with images and html pages.
To do this, the user can set the argument <code>image</code> with the
<a href="#documentation-pytest_hardpy-imagecomponent">ImageComponent</a> class 
and the argument <code>html</code> with the <a href="#documentation-pytest_hardpy-htmlcomponent">HTMLComponent</a> class.</p>
<p>The default message to the operator blocks further execution of the code,
but the user can set the argument <code>block=False</code> and the function will display the message
and continue execution of the test.
In this case, the user can clear the operator message with the
<a href="#documentation-pytest_hardpy-clear_operator_message">clear_operator_message</a> function.</p>
<p>The <a href="#documentation-pytest_hardpy-clear_operator_message">clear_operator_message</a>
is intended for clearing current operator message.</p>
<h1 align="center">
    <a class="glightbox" href="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/operator_msg.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/operator_msg.png" alt="operator_msg"></a>
</h1>

<h3 id="examples-operator_msg-how-to-start">how to start<a class="headerlink" href="#examples-operator_msg-how-to-start" title="Permanent link">&para;</a></h3>
<ol>
<li>Launch <a href="#documentation-database-couchdb-instance">CouchDH instance</a>.</li>
<li>Create a directory <code>&lt;dir_name&gt;</code> with the files described below.</li>
<li>Launch <code>hardpy run &lt;dir_name&gt;</code>.</li>
</ol>
<h3 id="examples-operator_msg-conftestpy">conftest.py<a class="headerlink" href="#examples-operator_msg-conftestpy" title="Permanent link">&para;</a></h3>
<p>Contains settings and fixtures for all tests:</p>
<ul>
<li>The <code>finish_executing</code> function generates a report and saves it to the database;</li>
<li>The <code>test_end_message</code> function shows message about completing of testing;</li>
<li>The <code>fill_list_functions_after_test</code> function populates a list of actions to be performed post-test. You may rename this function as you want;</li>
</ul>
<p>If the report database doesn't exist, the report won't be saved, and an error message will be displayed to the operator. Otherwise, a success message will be shown indicating successful report saving.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">from</span> <span class="nn">hardpy</span> <span class="kn">import</span> <span class="n">CouchdbConfig</span><span class="p">,</span> <span class="n">CouchdbLoader</span><span class="p">,</span> <span class="n">get_current_report</span><span class="p">,</span> <span class="n">set_operator_message</span>

<span class="k">def</span> <span class="nf">finish_executing</span><span class="p">():</span>
    <span class="n">report</span> <span class="o">=</span> <span class="n">get_current_report</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">report</span><span class="p">:</span>
            <span class="n">loader</span> <span class="o">=</span> <span class="n">CouchdbLoader</span><span class="p">(</span><span class="n">CouchdbConfig</span><span class="p">(</span><span class="n">port</span><span class="o">=</span><span class="mi">5986</span><span class="p">))</span>
            <span class="n">loader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">report</span><span class="p">)</span>
            <span class="n">set_operator_message</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Saving report was successful&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Operator message&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">set_operator_message</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="s1">&#39;The report was not recorded with error: &quot;&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Operator message&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">test_end_message</span><span class="p">():</span>
    <span class="n">set_operator_message</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Testing completed&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Operator message&quot;</span><span class="p">)</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">,</span> <span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fill_list_functions_after_test</span><span class="p">(</span><span class="n">post_run_functions</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
    <span class="n">post_run_functions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">test_end_message</span><span class="p">)</span>
    <span class="n">post_run_functions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">finish_executing</span><span class="p">)</span>
    <span class="k">yield</span>
</code></pre></div>
<h3 id="examples-operator_msg-test_1py">test_1.py<a class="headerlink" href="#examples-operator_msg-test_1py" title="Permanent link">&para;</a></h3>
<p>Contains examples of how to use operator messages.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>
<span class="kn">from</span> <span class="nn">hardpy</span> <span class="kn">import</span> <span class="n">clear_operator_message</span><span class="p">,</span> <span class="n">set_message</span><span class="p">,</span> <span class="n">set_operator_message</span>

<span class="k">def</span> <span class="nf">test_block_operator_message</span><span class="p">():</span>
    <span class="n">set_operator_message</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Test blocking operator message&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Operator message&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">set_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Time left to complete test case </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2"> s&quot;</span><span class="p">,</span> <span class="s2">&quot;updated_status&quot;</span><span class="p">)</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">set_message</span><span class="p">(</span><span class="s2">&quot;Test case finished&quot;</span><span class="p">,</span> <span class="s2">&quot;updated_status&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="k">def</span> <span class="nf">test_not_block_operator_message</span><span class="p">():</span>
    <span class="n">set_operator_message</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Test not blocking operator message&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Operator message&quot;</span><span class="p">,</span> <span class="n">block</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">set_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Time left to complete test case </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2"> s&quot;</span><span class="p">,</span> <span class="s2">&quot;updated_status&quot;</span><span class="p">)</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">set_message</span><span class="p">(</span><span class="s2">&quot;Test case finished&quot;</span><span class="p">,</span> <span class="s2">&quot;updated_status&quot;</span><span class="p">)</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="k">def</span> <span class="nf">test_clear_operator_message</span><span class="p">():</span>
    <span class="n">set_operator_message</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Test clearing operator message&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Operator message&quot;</span><span class="p">,</span> <span class="n">block</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">set_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Time left to complete test case </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2"> s&quot;</span><span class="p">,</span> <span class="s2">&quot;updated_status&quot;</span><span class="p">)</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">clear_operator_message</span><span class="p">()</span>
    <span class="n">set_message</span><span class="p">(</span><span class="s2">&quot;Test case finished&quot;</span><span class="p">,</span> <span class="s2">&quot;updated_status&quot;</span><span class="p">)</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">assert</span> <span class="kc">True</span>
</code></pre></div>
<h3 id="examples-operator_msg-test_2py">test_2.py<a class="headerlink" href="#examples-operator_msg-test_2py" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>
<span class="kn">from</span> <span class="nn">hardpy</span> <span class="kn">import</span> <span class="n">ImageComponent</span><span class="p">,</span> <span class="n">clear_operator_message</span><span class="p">,</span> <span class="n">set_message</span><span class="p">,</span> <span class="n">set_operator_message</span>

<span class="k">def</span> <span class="nf">test_block_operator_message</span><span class="p">():</span>
    <span class="n">set_operator_message</span><span class="p">(</span>
        <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Test blocking operator message&quot;</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Operator message&quot;</span><span class="p">,</span>
        <span class="n">image</span><span class="o">=</span><span class="n">ImageComponent</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="s2">&quot;assets/test.png&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">set_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Time left to complete test case </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2"> s&quot;</span><span class="p">,</span> <span class="s2">&quot;updated_status&quot;</span><span class="p">)</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">set_message</span><span class="p">(</span><span class="s2">&quot;Test case finished&quot;</span><span class="p">,</span> <span class="s2">&quot;updated_status&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="k">def</span> <span class="nf">test_not_block_operator_message</span><span class="p">():</span>
    <span class="n">set_operator_message</span><span class="p">(</span>
        <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Test not blocking operator message&quot;</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Operator message&quot;</span><span class="p">,</span>
        <span class="n">image</span><span class="o">=</span><span class="n">ImageComponent</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="s2">&quot;assets/test.png&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">),</span>
        <span class="n">block</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">set_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Time left to complete test case </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2"> s&quot;</span><span class="p">,</span> <span class="s2">&quot;updated_status&quot;</span><span class="p">)</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">set_message</span><span class="p">(</span><span class="s2">&quot;Test case finished&quot;</span><span class="p">,</span> <span class="s2">&quot;updated_status&quot;</span><span class="p">)</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="k">def</span> <span class="nf">test_clear_operator_message</span><span class="p">():</span>
    <span class="n">set_operator_message</span><span class="p">(</span>
        <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Test clearing operator message&quot;</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Operator message&quot;</span><span class="p">,</span>
        <span class="n">image</span><span class="o">=</span><span class="n">ImageComponent</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="s2">&quot;assets/test.png&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">),</span>
        <span class="n">block</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">set_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Time left to complete test case </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2"> s&quot;</span><span class="p">,</span> <span class="s2">&quot;updated_status&quot;</span><span class="p">)</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">clear_operator_message</span><span class="p">()</span>
    <span class="n">set_message</span><span class="p">(</span><span class="s2">&quot;Test case finished&quot;</span><span class="p">,</span> <span class="s2">&quot;updated_status&quot;</span><span class="p">)</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">assert</span> <span class="kc">True</span>
</code></pre></div>
<h3 id="examples-operator_msg-test_3py">test_3.py<a class="headerlink" href="#examples-operator_msg-test_3py" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>
<span class="kn">from</span> <span class="nn">hardpy</span> <span class="kn">import</span> <span class="n">HTMLComponent</span><span class="p">,</span> <span class="n">set_message</span><span class="p">,</span> <span class="n">set_operator_message</span>

<span class="n">test_html</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">&lt;!DOCTYPE html&gt;</span>
<span class="s2">&lt;html&gt;</span>
<span class="s2">&lt;body&gt;</span>

<span class="s2">&lt;h1&gt;Test HTML Page&lt;/h1&gt;</span>

<span class="s2">&lt;p&gt;It is testing page.&lt;/p&gt;</span>
<span class="s2">&lt;p&gt;You can put anything on it.&lt;/p&gt;</span>

<span class="s2">&lt;/body&gt;</span>
<span class="s2">&lt;/html&gt;</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="k">def</span> <span class="nf">test_operator_message_with_html</span><span class="p">():</span>
    <span class="n">set_operator_message</span><span class="p">(</span>
        <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Test operator message with html&quot;</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Operator message&quot;</span><span class="p">,</span>
        <span class="n">html</span><span class="o">=</span><span class="n">HTMLComponent</span><span class="p">(</span><span class="n">html</span><span class="o">=</span><span class="n">test_html</span><span class="p">,</span> <span class="n">is_raw_html</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">set_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Time left to complete test case </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2"> s&quot;</span><span class="p">,</span> <span class="s2">&quot;updated_status&quot;</span><span class="p">)</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">set_message</span><span class="p">(</span><span class="s2">&quot;Test case finished&quot;</span><span class="p">,</span> <span class="s2">&quot;updated_status&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="k">def</span> <span class="nf">test_operator_message_with_html_and_border</span><span class="p">():</span>
    <span class="n">set_operator_message</span><span class="p">(</span>
        <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Test operator message with html&quot;</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Operator message&quot;</span><span class="p">,</span>
        <span class="n">html</span><span class="o">=</span><span class="n">HTMLComponent</span><span class="p">(</span><span class="n">html</span><span class="o">=</span><span class="n">test_html</span><span class="p">,</span> <span class="n">is_raw_html</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">border</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">20</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">set_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Time left to complete test case </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2"> s&quot;</span><span class="p">,</span> <span class="s2">&quot;updated_status&quot;</span><span class="p">)</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">set_message</span><span class="p">(</span><span class="s2">&quot;Test case finished&quot;</span><span class="p">,</span> <span class="s2">&quot;updated_status&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="kc">True</span>
</code></pre></div></section><section class="print-page" id="examples-frontend_remote_access"><h1 id="examples-frontend_remote_access-enabling-mobile-device-access-to-the-frontend">Enabling mobile device access to the frontend<a class="headerlink" href="#examples-frontend_remote_access-enabling-mobile-device-access-to-the-frontend" title="Permanent link">&para;</a></h1>
<p>To allow other devices to connect to the frontend remotely, follow these steps:</p>
<h2 id="examples-frontend_remote_access-1-determine-ip-address">1. Determine IP address<a class="headerlink" href="#examples-frontend_remote_access-1-determine-ip-address" title="Permanent link">&para;</a></h2>
<p>Determine your computer's IP address. For Linux, you can use the <code>ifconfig</code> command:</p>
<div class="highlight"><pre><span></span><code>ifconfig<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;inet &quot;</span>
</code></pre></div>
<p>Look for an address in the format <code>192.168.x.x</code> or <code>10.x.x.x</code> (this is your local network IP).</p>
<h2 id="examples-frontend_remote_access-2-configure-ports-in-project-files">2. Configure ports in project files<a class="headerlink" href="#examples-frontend_remote_access-2-configure-ports-in-project-files" title="Permanent link">&para;</a></h2>
<h3 id="examples-frontend_remote_access-hardpytoml-configuration"><code>hardpy.toml</code> configuration<a class="headerlink" href="#examples-frontend_remote_access-hardpytoml-configuration" title="Permanent link">&para;</a></h3>
<p>Edit the file to include your computer's network address:</p>
<div class="highlight"><pre><span></span><code><span class="k">[database]</span>
<span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;dev&quot;</span>
<span class="n">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;dev&quot;</span>
<span class="n">host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;{YOUR_COMPUTER_NETWORK_ADDRESS}&quot;</span><span class="w">  </span><span class="c1"># Replace with address from step 2</span>
<span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5984</span>

<span class="k">[frontend]</span>
<span class="n">host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;{YOUR_COMPUTER_NETWORK_ADDRESS}&quot;</span><span class="w">  </span><span class="c1"># Replace with the address from step 2 or insert &quot;0.0.0.0&quot;</span>
<span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8000</span>
<span class="n">language</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;en&quot;</span>
</code></pre></div>
<h2 id="examples-frontend_remote_access-3-launch-the-frontend">3. Launch the frontend<a class="headerlink" href="#examples-frontend_remote_access-3-launch-the-frontend" title="Permanent link">&para;</a></h2>
<p>You can start the frontend using <code>hardpy run</code>.</p>
<h2 id="examples-frontend_remote_access-verification-steps">Verification steps<a class="headerlink" href="#examples-frontend_remote_access-verification-steps" title="Permanent link">&para;</a></h2>
<ol>
<li>On your mobile device, ensure it's connected to the same network as your computer</li>
<li>Open a browser and navigate to: <code>http://[YOUR_COMPUTER_ADDRESS]:8000</code></li>
<li>Verify you can see the frontend interface</li>
</ol>
<h2 id="examples-frontend_remote_access-troubleshooting">Troubleshooting<a class="headerlink" href="#examples-frontend_remote_access-troubleshooting" title="Permanent link">&para;</a></h2>
<p>If connection fails:</p>
<ul>
<li><a href="#examples-frontend_remote_access-open-required-ports-on-your-computer">Open required ports</a> on your computer.</li>
<li>Check all services are running (CouchDB, frontend).</li>
<li>Ensure no other devices are using the same ports.</li>
<li>Verify your mobile device and computer are on the same network.</li>
</ul>
<h3 id="examples-frontend_remote_access-open-required-ports-on-your-computer">Open required ports on your computer<a class="headerlink" href="#examples-frontend_remote_access-open-required-ports-on-your-computer" title="Permanent link">&para;</a></h3>
<h4 id="examples-frontend_remote_access-for-linux-using-ufw-firewall">For Linux (using <code>ufw</code> firewall)<a class="headerlink" href="#examples-frontend_remote_access-for-linux-using-ufw-firewall" title="Permanent link">&para;</a></h4>
<p>Run the following commands in your terminal:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>ufw<span class="w"> </span>allow<span class="w"> </span><span class="m">5984</span><span class="w">  </span><span class="c1"># Allows CouchDB connections</span>
sudo<span class="w"> </span>ufw<span class="w"> </span>allow<span class="w"> </span><span class="m">8000</span><span class="w">  </span><span class="c1"># Allows frontend access</span>
sudo<span class="w"> </span>ufw<span class="w"> </span><span class="nb">enable</span><span class="w">     </span><span class="c1"># Enable the firewall if not already active</span>
sudo<span class="w"> </span>ufw<span class="w"> </span>status<span class="w">     </span><span class="c1"># Verify the ports are open</span>
</code></pre></div></section><section class="print-page" id="examples-skip_test"><h1 id="examples-skip_test-skip-test">Skip test<a class="headerlink" href="#examples-skip_test-skip-test" title="Permanent link">&para;</a></h1>
<p>This is an example of using the <strong>pytest-hardpy</strong> functions with a test dependency
on another test and skipping tests.</p>
<h3 id="examples-skip_test-how-to-start">how to start<a class="headerlink" href="#examples-skip_test-how-to-start" title="Permanent link">&para;</a></h3>
<ol>
<li>Launch <code>hardpy init skip_test</code>.</li>
<li>Launch <a href="#documentation-database-couchdb-instance">CouchDH instance</a>.</li>
<li>Modify the files described below.</li>
<li>Launch <code>hardpy run skip_test</code>.</li>
</ol>
<h3 id="examples-skip_test-description">description<a class="headerlink" href="#examples-skip_test-description" title="Permanent link">&para;</a></h3>
<p>If a test case/module that a test case/module depends on fails, errors or is skipped, the dependent test case/module will also be skipped.
A module is considered passed only if all module tests passed.
If these dependencies are incorrect, the tests will not run.</p>
<p>To use:</p>
<ul>
<li>Add the line <code>@pytest.mark.dependency()</code> before independent tests.</li>
<li>Add the line <code>@pytest.mark.dependency(test_1::test_a)</code> before the dependent test,
if a test that a test depends on is in the same file.</li>
<li>Add the line <code>@pytest.mark.dependency(test_1)</code>
before the dependent test, if the test depends on the module.</li>
</ul>
<p>Test/module name formats:</p>
<ul>
<li><code>test_1</code> - if depends on the test module</li>
<li><code>test_1::test_a</code> - if depends on the test case</li>
</ul>
<h4 id="examples-skip_test-case-by-case-dependence">case by case dependence<a class="headerlink" href="#examples-skip_test-case-by-case-dependence" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pytest</span>

<span class="k">def</span> <span class="nf">test_a</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">False</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">dependency</span><span class="p">(</span><span class="s2">&quot;test_1::test_a&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_b</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">False</span>
</code></pre></div>
<p><code>test_a</code> is marked as a dependency for <code>test_b</code> using <code>@pytest.mark.dependency("test_1::test_a")</code>.
If <code>test_a</code>, then <code>test_b</code> will be skipped.</p>
<h4 id="examples-skip_test-module-by-module-dependence">module by module dependence<a class="headerlink" href="#examples-skip_test-module-by-module-dependence" title="Permanent link">&para;</a></h4>
<h5 id="examples-skip_test-test_1py">test_1.py<a class="headerlink" href="#examples-skip_test-test_1py" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">test_a</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">False</span>
</code></pre></div>
<h5 id="examples-skip_test-test_2py">test_2.py<a class="headerlink" href="#examples-skip_test-test_2py" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pytest</span>

<span class="n">pytestmark</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">dependency</span><span class="p">(</span><span class="s2">&quot;test_1&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">test_a</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>
</code></pre></div>
<p>Module <code>test_2</code> depends on module <code>test_1</code>.
If an error occurs in module <code>test_1</code>, all tests in module <code>test_2</code> will be skipped.</p>
<h4 id="examples-skip_test-multiple-test-dependencies-example">multiple test dependencies example<a class="headerlink" href="#examples-skip_test-multiple-test-dependencies-example" title="Permanent link">&para;</a></h4>
<p>You can specify multiple dependencies for a single test or module.
The test will only run if ALL specified dependencies are successful.
If any dependency fails, the test will be skipped.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pytest</span>

<span class="k">def</span> <span class="nf">test_a</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="k">def</span> <span class="nf">test_b</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">False</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">dependency</span><span class="p">(</span><span class="s2">&quot;test_1::test_a&quot;</span><span class="p">)</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">dependency</span><span class="p">(</span><span class="s2">&quot;test_1::test_b&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_c</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>
</code></pre></div>
<p>In this case, <code>test_c</code> depends on two other tests.
Since <code>test_b</code> fails, <code>test_c</code> will be skipped.</p>
<h4 id="examples-skip_test-multiple-module-dependencies-example">multiple module dependencies example<a class="headerlink" href="#examples-skip_test-multiple-module-dependencies-example" title="Permanent link">&para;</a></h4>
<h5 id="examples-skip_test-test_1py_1">test_1.py<a class="headerlink" href="#examples-skip_test-test_1py_1" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">test_a</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>
</code></pre></div>
<h5 id="examples-skip_test-test_2py_1">test_2.py<a class="headerlink" href="#examples-skip_test-test_2py_1" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">test_b</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">False</span>
</code></pre></div>
<h5 id="examples-skip_test-test_3py">test_3.py<a class="headerlink" href="#examples-skip_test-test_3py" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pytest</span>

<span class="n">pytestmark</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">dependency</span><span class="p">(</span><span class="s2">&quot;test_1&quot;</span><span class="p">),</span>
    <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">dependency</span><span class="p">(</span><span class="s2">&quot;test_2&quot;</span><span class="p">),</span>
<span class="p">]</span>

<span class="k">def</span> <span class="nf">test_c</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>
</code></pre></div>
<p>Here, the entire <code>test_3</code> module depends on both <code>test_1</code> and <code>test_2</code> modules.
Since <code>test_2</code> fails, all tests in <code>test_3</code> will be skipped.</p>
<h4 id="examples-skip_test-incorrect-dependency-names">incorrect dependency names<a class="headerlink" href="#examples-skip_test-incorrect-dependency-names" title="Permanent link">&para;</a></h4>
<h5 id="examples-skip_test-test_1py_2">test_1.py<a class="headerlink" href="#examples-skip_test-test_1py_2" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pytest</span>

<span class="k">def</span> <span class="nf">test_a</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">dependency</span><span class="p">(</span><span class="s2">&quot;test_1::a&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_b</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>
</code></pre></div>
<p>In this case, the test <code>test_b</code> has no dependencies because the 
<code>test_1::a</code> dependency is incorrect.</p></section><section class="print-page" id="examples-stand_cloud"><h1 id="examples-stand_cloud-standcloud">StandCloud<a class="headerlink" href="#examples-stand_cloud-standcloud" title="Permanent link">&para;</a></h1>
<p>This is an example of using <strong>pytest-hardpy</strong> functions, storing
the result to <a href="#documentation-stand_cloud">StandCloud</a>.
This example is similar to <a href="#examples-minute_parity">Minute parity</a>,
but the test results are stored in StandCloud instead of CouchDB.
The code for this example can be seen inside the hardpy package
<a href="https://github.com/everypinio/hardpy/tree/main/examples/stand_cloud">StandCloud</a>.</p>
<h3 id="examples-stand_cloud-how-to-start">how to start<a class="headerlink" href="#examples-stand_cloud-how-to-start" title="Permanent link">&para;</a></h3>
<ol>
<li>Get your own <strong>StandCloud</strong> service address by contacting <strong><a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#105;&#110;&#102;&#111;&#64;&#101;&#118;&#101;&#114;&#121;&#112;&#105;&#110;&#46;&#105;&#111;">&#105;&#110;&#102;&#111;&#64;&#101;&#118;&#101;&#114;&#121;&#112;&#105;&#110;&#46;&#105;&#111;</a></strong>, e.g. <code>demo.standcloud.localhost</code>.</li>
<li>Launch <code>hardpy init stand_cloud --sc-address demo.standcloud.localhost --sc-connection-only</code>.</li>
<li>Launch <a href="#documentation-database-couchdb-instance">CouchDH instance</a>.</li>
<li>Modify the files described below.</li>
<li>You can remove <code>connection_only = true</code> if you don't want to check the
    <strong>StandCloud</strong> connection before each <strong>HardPy</strong> start.</li>
<li>
<p>Login in the <strong>StandCloud</strong>:</p>
<div class="highlight"><pre><span></span><code>hardpy<span class="w"> </span>sc-login<span class="w"> </span>demo.standcloud.localhost
</code></pre></div>
<p>The duration of the authorization is defined in the <strong>StandCloud</strong> service itself.
Registration must be completed once, then you can check authorization
using the command:</p>
<div class="highlight"><pre><span></span><code>hardpy sc-login --check demo.standcloud.localhost
</code></pre></div>
<p>Learn more in the <a href="#documentation-stand_cloud">StandCloud</a> section.</p>
</li>
<li>
<p>Launch <code>hardpy run stand_cloud</code>.</p>
</li>
</ol>
<h3 id="examples-stand_cloud-conftestpy">conftest.py<a class="headerlink" href="#examples-stand_cloud-conftestpy" title="Permanent link">&para;</a></h3>
<p>Contains settings and fixtures for all tests:</p>
<ul>
<li>The function to generate a report and record it in the <strong>StandCloud</strong> <code>finish_executing</code>;</li>
<li>The example of devices used as a fixture in <code>driver_example</code>;</li>
<li>The list of actions that will be performed after testing is filled in function <code>fill_actions_after_test</code>;</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">http</span> <span class="kn">import</span> <span class="n">HTTPStatus</span>

<span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">from</span> <span class="nn">driver_example</span> <span class="kn">import</span> <span class="n">DriverExample</span>

<span class="kn">from</span> <span class="nn">hardpy</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">StandCloudError</span><span class="p">,</span>
    <span class="n">StandCloudLoader</span><span class="p">,</span>
    <span class="n">get_current_report</span><span class="p">,</span>
    <span class="n">set_operator_message</span><span class="p">,</span>
<span class="p">)</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">driver_example</span><span class="p">():</span>
    <span class="n">example</span> <span class="o">=</span> <span class="n">DriverExample</span><span class="p">()</span>
    <span class="k">yield</span> <span class="n">example</span>

<span class="k">def</span> <span class="nf">finish_executing</span><span class="p">():</span>
    <span class="n">report</span> <span class="o">=</span> <span class="n">get_current_report</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">report</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">loader</span> <span class="o">=</span> <span class="n">StandCloudLoader</span><span class="p">()</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">report</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="n">HTTPStatus</span><span class="o">.</span><span class="n">CREATED</span><span class="p">:</span>
                <span class="n">set_operator_message</span><span class="p">(</span>
                    <span class="s2">&quot;Report not uploaded to StandCloud, &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;status code: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">, text: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="p">)</span>
        <span class="k">except</span> <span class="n">StandCloudError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
            <span class="n">set_operator_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">exc</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">,</span> <span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fill_actions_after_test</span><span class="p">(</span><span class="n">post_run_functions</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
    <span class="n">post_run_functions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">finish_executing</span><span class="p">)</span>
    <span class="k">yield</span>
</code></pre></div>
<h3 id="examples-stand_cloud-driver_examplepy">driver_example.py<a class="headerlink" href="#examples-stand_cloud-driver_examplepy" title="Permanent link">&para;</a></h3>
<p>An example of writing a simple device driver.
The driver returns the current minute in the OS.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">datetime</span>

<span class="k">class</span> <span class="nc">DriverExample</span><span class="p">:</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">current_minute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">current_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">current_time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%M&quot;</span><span class="p">))</span>
</code></pre></div>
<h3 id="examples-stand_cloud-test_1py">test_1.py<a class="headerlink" href="#examples-stand_cloud-test_1py" title="Permanent link">&para;</a></h3>
<p>Contains tests related to preparation for the testing process:</p>
<ul>
<li>The name of the test module for the web interface is set to <code>pytest.mark.module_name</code>;</li>
<li>The name of the test cases for the web interface is set to <code>pytest.mark.case_name</code>;</li>
<li>The device under test (DUT) info is stored in the database in <code>test_dut_info</code>;</li>
<li>The test stand info is store in the database in <code>test_stand_info</code>;</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">uuid</span> <span class="kn">import</span> <span class="n">uuid4</span>
<span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">import</span> <span class="nn">hardpy</span>

<span class="n">pytestmark</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">module_name</span><span class="p">(</span><span class="s2">&quot;Testing preparation&quot;</span><span class="p">)</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">case_name</span><span class="p">(</span><span class="s2">&quot;DUT info&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_dut_info</span><span class="p">():</span>
    <span class="n">serial_number</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid4</span><span class="p">())[:</span><span class="mi">6</span><span class="p">]</span>
    <span class="n">hardpy</span><span class="o">.</span><span class="n">set_dut_serial_number</span><span class="p">(</span><span class="n">serial_number</span><span class="p">)</span>
    <span class="n">hardpy</span><span class="o">.</span><span class="n">set_dut_part_number</span><span class="p">(</span><span class="s2">&quot;part_number_1&quot;</span><span class="p">)</span>
    <span class="n">info</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;batch&quot;</span><span class="p">:</span> <span class="s2">&quot;test_batch&quot;</span><span class="p">,</span> <span class="s2">&quot;board_rev&quot;</span><span class="p">:</span> <span class="s2">&quot;rev_1&quot;</span><span class="p">}</span>
    <span class="n">hardpy</span><span class="o">.</span><span class="n">set_dut_info</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
    <span class="k">assert</span> <span class="kc">True</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">case_name</span><span class="p">(</span><span class="s2">&quot;Test stand info&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_stand_info</span><span class="p">():</span>
    <span class="n">test_stand_name</span> <span class="o">=</span> <span class="s2">&quot;Stand 1&quot;</span>
    <span class="n">hardpy</span><span class="o">.</span><span class="n">set_stand_name</span><span class="p">(</span><span class="n">test_stand_name</span><span class="p">)</span>
    <span class="n">hardpy</span><span class="o">.</span><span class="n">set_stand_location</span><span class="p">(</span><span class="s2">&quot;Moon&quot;</span><span class="p">)</span>
    <span class="n">hardpy</span><span class="o">.</span><span class="n">set_stand_number</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">info</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;some_info&quot;</span><span class="p">:</span> <span class="s2">&quot;123&quot;</span><span class="p">}</span>
    <span class="n">hardpy</span><span class="o">.</span><span class="n">set_stand_info</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
    <span class="k">assert</span> <span class="kc">True</span>
</code></pre></div>
<h3 id="examples-stand_cloud-test_2py">test_2.py<a class="headerlink" href="#examples-stand_cloud-test_2py" title="Permanent link">&para;</a></h3>
<p>Contains basic tests:</p>
<ul>
<li>The name of the test module for the web interface is set to <code>pytest.mark.module_name</code>;</li>
<li>The name of the test cases for the web interface is set to <code>pytest.mark.case_name</code>;</li>
<li>An example of using a driver to get the current minute in <code>test_minute_parity</code>;</li>
<li>An example of saving a test case artifact to the database using <code>set_case_artifact</code>;</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">from</span> <span class="nn">driver_example</span> <span class="kn">import</span> <span class="n">DriverExample</span>
<span class="kn">import</span> <span class="nn">hardpy</span>

<span class="n">pytestmark</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">module_name</span><span class="p">(</span><span class="s2">&quot;Main tests&quot;</span><span class="p">)</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">case_name</span><span class="p">(</span><span class="s2">&quot;Minute check&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_minute_parity</span><span class="p">(</span><span class="n">driver_example</span><span class="p">:</span> <span class="n">DriverExample</span><span class="p">):</span>
    <span class="n">minute</span> <span class="o">=</span> <span class="n">driver_example</span><span class="o">.</span><span class="n">current_minute</span>
    <span class="n">hardpy</span><span class="o">.</span><span class="n">set_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Current minute </span><span class="si">{</span><span class="n">minute</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">minute</span> <span class="o">%</span> <span class="mi">2</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;minute&quot;</span><span class="p">:</span> <span class="n">minute</span><span class="p">}</span>
    <span class="n">hardpy</span><span class="o">.</span><span class="n">set_case_artifact</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;The test failed because </span><span class="si">{</span><span class="n">minute</span><span class="si">}</span><span class="s2"> is odd! Try again!&quot;</span>
</code></pre></div>
<h3 id="examples-stand_cloud-test_3py">test_3.py<a class="headerlink" href="#examples-stand_cloud-test_3py" title="Permanent link">&para;</a></h3>
<p>Contains the final tests of the testing process:</p>
<ul>
<li>The name of the test module for the web interface is set to <code>pytest.mark.module_name</code>;</li>
<li>The name of the test cases for the web interface is set to <code>pytest.mark.case_name</code>;</li>
<li>An example of setting and updating a message for a web interface using <code>set_message</code>;</li>
<li><code>test_3</code> depends on <code>test_minute_parity</code> from <code>test_2</code>.
Dependency is set to <code>pytest.mark.dependency</code>.
If <code>test_2::test_minute_parity</code> fails, <code>test_3</code> will be skipped</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>
<span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">import</span> <span class="nn">hardpy</span>

<span class="n">pytestmark</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">module_name</span><span class="p">(</span><span class="s2">&quot;End of testing&quot;</span><span class="p">),</span>
    <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">dependency</span><span class="p">(</span><span class="s2">&quot;test_2::test_minute_parity&quot;</span><span class="p">),</span>
<span class="p">]</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">case_name</span><span class="p">(</span><span class="s2">&quot;Final case&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_one</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">hardpy</span><span class="o">.</span><span class="n">set_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Time left until testing ends </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2"> s&quot;</span><span class="p">,</span> <span class="s2">&quot;updated_status&quot;</span><span class="p">)</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">hardpy</span><span class="o">.</span><span class="n">set_message</span><span class="p">(</span><span class="s2">&quot;Testing ended&quot;</span><span class="p">,</span> <span class="s2">&quot;updated_status&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="kc">True</span>
</code></pre></div></section><section class="print-page" id="examples-stand_cloud_reader"><h1 id="examples-stand_cloud_reader-standcloud-reader">StandCloud reader<a class="headerlink" href="#examples-stand_cloud_reader-standcloud-reader" title="Permanent link">&para;</a></h1>
<p><strong>HardPy</strong> allows you to read test data from the <strong>StandCloud</strong>.
For this purpose, the <a href="#documentation-pytest_hardpy-standcloudreader">StandCloudReader</a>
class is available in <strong>HardPy</strong>, which provides access to the REST API of the <strong>StandCloud</strong> service.
To read data from the <strong>StandCloud</strong>, the user must log in to the <strong>StandCloud</strong>
using the <a href="#documentation-cli-sc-login">hardpy sc-login</a>.</p>
<p>To view the REST API documentation, the user can navigate to the format page
<a href="https://service_name/integration/api/v1/docs">https://service_name/integration/api/v1/docs</a>,
where <code>service_name</code> is the address of the <strong>StandCloud</strong> client.</p>
<p>Example of documentation page address: <a href="https://demo.standcloud.io/integration/api/v1/docs">https://demo.standcloud.io/integration/api/v1/docs</a></p>
<p>To access <strong>StandCloud</strong>, contact <strong><a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#105;&#110;&#102;&#111;&#64;&#101;&#118;&#101;&#114;&#121;&#112;&#105;&#110;&#46;&#105;&#111;">&#105;&#110;&#102;&#111;&#64;&#101;&#118;&#101;&#114;&#121;&#112;&#105;&#110;&#46;&#105;&#111;</a></strong>.</p>
<h2 id="examples-stand_cloud_reader-functions">Functions<a class="headerlink" href="#examples-stand_cloud_reader-functions" title="Permanent link">&para;</a></h2>
<h3 id="examples-stand_cloud_reader-test_run">test_run<a class="headerlink" href="#examples-stand_cloud_reader-test_run" title="Permanent link">&para;</a></h3>
<p>Provides access to 2 endpoints: <code>/test_run/{test_run_id}</code> and <code>/test_run</code>.
This function does not allow two arguments to be used at the same time.
The argument must be either <code>run_id</code> or the filter <code>params</code>.</p>
<p><strong>run_id</strong></p>
<p>Allows the user to retrieve data about a specific test run by its id from <code>/test_run</code> URL.
User can get id from <a href="#documentation-pytest_hardpy-standcloudloader">StandCloudLoader.load()</a>
function.</p>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">hardpy</span>

<span class="n">sc_connector</span> <span class="o">=</span> <span class="n">hardpy</span><span class="o">.</span><span class="n">StandCloudConnector</span><span class="p">(</span><span class="n">addr</span><span class="o">=</span><span class="s2">&quot;demo.standcloud.io&quot;</span><span class="p">)</span>
<span class="n">reader</span> <span class="o">=</span> <span class="n">hardpy</span><span class="o">.</span><span class="n">StandCloudReader</span><span class="p">(</span><span class="n">sc_connector</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">test_run</span><span class="p">(</span><span class="n">run_id</span><span class="o">=</span><span class="s2">&quot;0196434d-e8f7-7ce1-81f7-e16f20487494&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div>
<p>Request URL of this example:</p>
<div class="highlight"><pre><span></span><code>https://demo.standcloud.io/hardpy/api/v1/test_run/0196434d-e8f7-7ce1-81f7-e16f20487494
</code></pre></div>
<p>REST API documentation page of this example:</p>
<div class="highlight"><pre><span></span><code>https://demo.standcloud.io/integration/api/v1/docs
</code></pre></div>
<p><strong>Response data example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;test_run_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0196434d-e8f7-7ce1-81f7-e16f20487494&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;test_plan_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Test Plan A&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;serial_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SN-98765&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;part_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PN-54321AB&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FAIL&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;status_icon&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;❌&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;number_of_attempt&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;start_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-02-20T14:23:45Z&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;stop_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-02-20T14:23:45Z&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;duration&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;00:12:34&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;test_stand_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EMC Chamber #2&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;test_stand_hw_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TS-CH45&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;test_run_artifact&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;test_run_parameter&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;test_run_value&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;test_stand_info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;calibration_date&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025-01-15&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;dut_info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;manufacturer&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ABC Corp&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>params</strong></p>
<p>Allows the user to retrieve data about a test run by filters from <code>/test_run</code> URL.
Filters are specified as parameters. A special place is occupied by the filter by field <code>dut.info</code>,
which allows to add fields <code>dut.info</code> as keys for the filter in the parameters.</p>
<p>The difference between the test run with filters and the tested DUT is described in the
<a href="#documentation-pytest_hardpy-standcloudreader">StandCloudReader</a> documentation.</p>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">hardpy</span>

<span class="n">sc_connector</span> <span class="o">=</span> <span class="n">hardpy</span><span class="o">.</span><span class="n">StandCloudConnector</span><span class="p">(</span><span class="n">addr</span><span class="o">=</span><span class="s2">&quot;demo.standcloud.io&quot;</span><span class="p">)</span>
<span class="n">reader</span> <span class="o">=</span> <span class="n">hardpy</span><span class="o">.</span><span class="n">StandCloudReader</span><span class="p">(</span><span class="n">sc_connector</span><span class="p">)</span>

<span class="n">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;part_number&quot;</span><span class="p">:</span> <span class="s2">&quot;PN-54321AB&quot;</span><span class="p">,</span>
    <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;pass&quot;</span><span class="p">,</span>
    <span class="s2">&quot;manufacturer&quot;</span><span class="p">:</span> <span class="s2">&quot;ABC_Corp&quot;</span><span class="p">,</span>
    <span class="s2">&quot;number_of_attempt&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">test_run</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="n">param</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div>
<p>Request URL of this example:</p>
<div class="highlight"><pre><span></span><code>https://demo.standcloud.io/hardpy/api/v1/test_run?part_number<span class="o">=</span>PN-54321AB<span class="p">&amp;</span><span class="nv">status</span><span class="o">=</span>pass<span class="p">&amp;</span><span class="nv">manufacturer</span><span class="o">=</span>ABC_Corp<span class="p">&amp;</span><span class="nv">number_of_attempt</span><span class="o">=</span><span class="m">2</span>
</code></pre></div>
<p>REST API documentation page of this example:</p>
<div class="highlight"><pre><span></span><code>https://demo.standcloud.io/integration/api/v1/docs
</code></pre></div>
<p><strong>Response data example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;test_run_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0196434d-e8f7-7ce1-81f7-e16f20487494&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;test_plan_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Test Plan A&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;serial_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SN-98765&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;part_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PN-54321AB&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FAIL&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;status_icon&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;❌&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;number_of_attempt&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;start_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-02-20T14:23:45Z&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;stop_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-02-20T14:23:45Z&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;duration&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;00:12:34&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;test_stand_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EMC Chamber #2&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;test_stand_hw_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TS-CH45&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;test_run_artifact&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;test_run_parameter&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;test_run_value&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;test_stand_info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;calibration_date&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025-01-15&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;dut_info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;serial_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SN-98765&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;part_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PN-54321AB&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;manufacturer&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ABC Corp&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="examples-stand_cloud_reader-tested_dut">tested_dut<a class="headerlink" href="#examples-stand_cloud_reader-tested_dut" title="Permanent link">&para;</a></h3>
<p>Allows the user to retrieve data about the <strong>last</strong> tested dut's by filters from <code>/tested_dut</code> URL.
Filters are specified as parameters. A special place is occupied by the filter by field <code>dut.info</code>,
which allows to add fields <code>dut.info</code> as keys for the filter in the parameters.</p>
<p>The difference between the test run with filters and the tested DUT is described in the
<a href="#documentation-pytest_hardpy-standcloudreader">StandCloudReader</a> documentation.</p>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">hardpy</span>

<span class="n">sc_connector</span> <span class="o">=</span> <span class="n">hardpy</span><span class="o">.</span><span class="n">StandCloudConnector</span><span class="p">(</span><span class="n">addr</span><span class="o">=</span><span class="s2">&quot;demo.standcloud.io&quot;</span><span class="p">)</span>
<span class="n">reader</span> <span class="o">=</span> <span class="n">hardpy</span><span class="o">.</span><span class="n">StandCloudReader</span><span class="p">(</span><span class="n">sc_connector</span><span class="p">)</span>

<span class="n">param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;part_number&quot;</span><span class="p">:</span> <span class="s2">&quot;PN-54321AB&quot;</span><span class="p">,</span>
    <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;pass&quot;</span><span class="p">,</span>
    <span class="s2">&quot;manufacturer&quot;</span><span class="p">:</span> <span class="s2">&quot;ABC_Corp&quot;</span><span class="p">,</span>
    <span class="s2">&quot;attempt_count&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">tested_dut</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div>
<p>Request URL of this example:</p>
<div class="highlight"><pre><span></span><code>https://demo.standcloud.io/hardpy/api/v1/tested_dut?part_number<span class="o">=</span>PN-54321AB<span class="p">&amp;</span><span class="nv">status</span><span class="o">=</span>pass<span class="p">&amp;</span><span class="nv">manufacturer</span><span class="o">=</span>ABC_Corp<span class="p">&amp;</span><span class="nv">attempt_count</span><span class="o">=</span><span class="m">3</span>
</code></pre></div>
<p>REST API documentation page of this example:</p>
<div class="highlight"><pre><span></span><code>https://demo.standcloud.io/integration/api/v1/docs
</code></pre></div>
<p><strong>Response data example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">[</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;test_plan_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Test run #A&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;serial_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SN-12345&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;part_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PN-54321AB&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pass&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;status_icon&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;✅&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;attempt_count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;start_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025-03-28T09:34:05Z&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;finish_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025-03-28T09:34:55Z&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;duration&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PT50S&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;test_stand_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EMC Chamber #2&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;test_stand_hw_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TS-CH45&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;dut_info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;manufacturer&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ABC_Corp&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;test_stand_info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;calibration_date&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025-01-15&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;test_run_artifact&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;test_run_parameter&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;test_run_value&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;test_plan_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Test run #B&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;serial_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SN-98766&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;part_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PN-54321AB&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pass&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;status_icon&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;✅&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;attempt_count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;start_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025-03-28T09:35:05Z&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;finish_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025-03-28T09:35:55Z&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;duration&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PT50S&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;test_stand_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EMC Chamber #2&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;test_stand_hw_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TS-CH45&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;dut_info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;manufacturer&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ABC_Corp&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;test_stand_info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;calibration_date&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025-01-15&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;test_run_artifact&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;test_run_parameter&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;test_run_value&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">]</span>
</code></pre></div></section><section class="print-page" id="examples-stand_cloud_thirdparty_auth"><h1 id="examples-stand_cloud_thirdparty_auth-standcloud-third-party-authorization">StandCloud third party authorization<a class="headerlink" href="#examples-stand_cloud_thirdparty_auth-standcloud-third-party-authorization" title="Permanent link">&para;</a></h1>
<p>This documentation describes how to authorize a <strong>HardPy</strong> application on a
<strong>StandCloud</strong> system using the OAuth 2.0 Device Authorization Flow process.</p>
<h2 id="examples-stand_cloud_thirdparty_auth-authorization-process">Authorization process<a class="headerlink" href="#examples-stand_cloud_thirdparty_auth-authorization-process" title="Permanent link">&para;</a></h2>
<ol>
<li>The application requests the device code from the authorization server.</li>
<li>The server returns:<ul>
<li><code>device_code</code></li>
<li><code>user_code</code></li>
<li><code>verification_uri</code> (authorization URL)</li>
<li><code>verification_uri_complete</code> (the URL with the pre-filled code)</li>
<li><code>expires_in</code> (code lifetime)</li>
<li><code>interval</code> (status polling interval)</li>
</ul>
</li>
<li>The user follows the link and confirms authorization.</li>
<li>The application periodically polls the token server.</li>
<li>After confirmation, the server returns an access token and a refresh token.</li>
</ol>
<h2 id="examples-stand_cloud_thirdparty_auth-code-example">Code example<a class="headerlink" href="#examples-stand_cloud_thirdparty_auth-code-example" title="Permanent link">&para;</a></h2>
<p>The code samples are in Python, but they use simple constructs that are available in
most programming languages.
To implement the authorization process for a third-party
application in a different language, use the general approach demonstrated in these scripts.
Reading <a href="https://datatracker.ietf.org/doc/html/rfc8628">RFC6749</a>,
which describes the OAuth 2.0 device flow, is also recommended.
The above examples do not display the QR code to the user; rather, they display a link for authorization.</p>
<h2 id="examples-stand_cloud_thirdparty_auth-authorization-example">Authorization example<a class="headerlink" href="#examples-stand_cloud_thirdparty_auth-authorization-example" title="Permanent link">&para;</a></h2>
<p><strong>auth_flow.py</strong> is an example of a simple authorization script written in Python.
The script requires the installation of the <code>requests</code> package.
The only thing that needs to be changed to make it work is the
<strong>StandCloud</strong> address in the <code>BASE_URL</code> variable.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># This script demonstrates the StandCloud authentication process.</span>
<span class="c1"># Change the URL to your StandCloud address, nothing else needs to be changed.</span>

<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1">########################################</span>
<span class="c1"># Change URL to your StandCloud address</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s2">&quot;https://demo.standcloud.io&quot;</span>
<span class="c1">########################################</span>

<span class="c1"># Confugirable parameters, False if the server is self-signed</span>
<span class="n">SSL_VERIFY</span> <span class="o">=</span> <span class="kc">True</span>

<span class="c1"># OAuth client configuration</span>
<span class="c1"># client_id must be &quot;hardpy-report-uploader&quot;</span>
<span class="n">CLIENT_ID</span> <span class="o">=</span> <span class="s2">&quot;hardpy-report-uploader&quot;</span>

<span class="c1"># API endpoints</span>
<span class="n">API_URL</span> <span class="o">=</span> <span class="n">BASE_URL</span> <span class="o">+</span> <span class="s2">&quot;/hardpy/api/v1&quot;</span>
<span class="n">DEVICE_AUTHORIZATION_URL</span> <span class="o">=</span> <span class="n">BASE_URL</span> <span class="o">+</span> <span class="s2">&quot;/auth/api/oidc/device-authorization&quot;</span>
<span class="n">TOKEN_URL</span> <span class="o">=</span> <span class="n">BASE_URL</span> <span class="o">+</span> <span class="s2">&quot;/auth/api/oidc/token&quot;</span>


<span class="c1"># Device authorization aequest</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;client_id&quot;</span><span class="p">:</span> <span class="n">CLIENT_ID</span><span class="p">,</span>
    <span class="s2">&quot;scope&quot;</span><span class="p">:</span> <span class="s2">&quot;offline_access authelia.bearer.authz&quot;</span><span class="p">,</span>
    <span class="s2">&quot;audience&quot;</span><span class="p">:</span> <span class="n">API_URL</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">req</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">DEVICE_AUTHORIZATION_URL</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="n">SSL_VERIFY</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">req</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
<span class="n">verification_uri_complete</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;verification_uri_complete&quot;</span><span class="p">]</span>
<span class="n">interval</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;interval&quot;</span><span class="p">]</span>

<span class="c1"># Token request</span>
<span class="k">if</span> <span class="s2">&quot;error&quot;</span> <span class="ow">in</span> <span class="n">response</span><span class="p">:</span>
    <span class="n">error</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;error&quot;</span><span class="p">]</span>
    <span class="n">error_description</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;error_description&quot;</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">error_description</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Verification URI: </span><span class="si">{</span><span class="n">verification_uri_complete</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;client_id&quot;</span><span class="p">:</span> <span class="n">CLIENT_ID</span><span class="p">,</span>
    <span class="s2">&quot;grant_type&quot;</span><span class="p">:</span> <span class="s2">&quot;urn:ietf:params:oauth:grant-type:device_code&quot;</span><span class="p">,</span>
    <span class="s2">&quot;device_code&quot;</span><span class="p">:</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;device_code&quot;</span><span class="p">],</span>
<span class="p">}</span>

<span class="c1"># Token response</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">req</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">TOKEN_URL</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="n">SSL_VERIFY</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">req</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s2">&quot;access_token&quot;</span> <span class="ow">in</span> <span class="n">response</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Token info:&quot;</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
        <span class="k">break</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>

<span class="c1"># Test API call</span>
<span class="n">header</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;Authorization&quot;</span><span class="p">:</span> <span class="s2">&quot;Bearer </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s2">&quot;access_token&quot;</span><span class="p">]),</span>
    <span class="s2">&quot;Content-type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Accept&quot;</span><span class="p">:</span> <span class="s2">&quot;text/plain&quot;</span><span class="p">,</span>
<span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">header: &quot;</span><span class="p">,</span> <span class="n">header</span><span class="p">)</span>

<span class="n">USER_INFO_URL</span> <span class="o">=</span> <span class="n">API_URL</span> <span class="o">+</span> <span class="s2">&quot;/healthcheck&quot;</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">USER_INFO_URL</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">header</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="n">SSL_VERIFY</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">OAuth Authenticated and Authorized API access&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="examples-stand_cloud_thirdparty_auth-1-introduction">1. Introduction<a class="headerlink" href="#examples-stand_cloud_thirdparty_auth-1-introduction" title="Permanent link">&para;</a></h3>
<p>The script facilitates a secure way for devices with limited input capabilities
(like command-line applications) to authenticate with <strong>StandCloud</strong>.
It leverages the OAuth 2.0 Device Flow, which allows a user to authorize a device
by visiting a URL on a separate, input-rich device (e.g., a web browser on a computer or smartphone).</p>
<h3 id="examples-stand_cloud_thirdparty_auth-2-key-concepts-oauth-20-device-authorization-grant-flow">2. Key concepts: OAuth 2.0 device authorization grant flow<a class="headerlink" href="#examples-stand_cloud_thirdparty_auth-2-key-concepts-oauth-20-device-authorization-grant-flow" title="Permanent link">&para;</a></h3>
<p>The OAuth 2.0 Device Authorization Grant Flow is designed for devices that cannot easily
display a browser or accept direct user input (like typing a username and password).
The flow generally involves the following steps:</p>
<ol>
<li><strong>Device Authorization Request</strong>: The client (this script) requests a device code and a
   verification URI from the authorization server.</li>
<li><strong>User Interaction</strong>: The user takes the verification URI and a user code
    (provided by the authorization server) and enters them into a browser on a
    separate device to authorize the client.</li>
<li><strong>Token Request Polling</strong>: The client repeatedly polls the authorization server's
    token endpoint with the device code until the user completes the authorization.</li>
<li><strong>Token Response</strong>: Once authorized, the client receives access tokens and (optionally) refresh tokens.</li>
<li><strong>API Access</strong>: The client uses the obtained access token to make authenticated calls to the protected API resources.</li>
</ol>
<p>For a deeper understanding of the OAuth 2.0 Device Authorization Grant, refer to the official specification:
<a href="https://datatracker.ietf.org/doc/html/rfc8628">RFC 8628 - OAuth 2.0 Device Authorization Grant</a>.</p>
<h3 id="examples-stand_cloud_thirdparty_auth-3-script-breakdown">3. Script breakdown<a class="headerlink" href="#examples-stand_cloud_thirdparty_auth-3-script-breakdown" title="Permanent link">&para;</a></h3>
<p>The script performs the following sequence of operations:</p>
<h4 id="examples-stand_cloud_thirdparty_auth-31-configuration">3.1. Configuration<a class="headerlink" href="#examples-stand_cloud_thirdparty_auth-31-configuration" title="Permanent link">&para;</a></h4>
<ul>
<li><strong><code>BASE_URL</code></strong>: This variable must be changed to your specific <strong>StandCloud</strong> instance URL.<ul>
<li><strong>Example</strong>: <code>https://company_name.standcloud.io</code></li>
</ul>
</li>
<li><strong><code>SSL_VERIFY</code></strong>: A boolean flag (<code>True</code> by default) indicating whether SSL certificate verification should be performed.
    Set to <code>False</code> if your server uses a self-signed certificate.</li>
<li><strong><code>CLIENT_ID</code></strong>: The OAuth client identifier, which is fixed as <code>hardpy-report-uploader</code>.
    This identifies the client application to the <strong>StandCloud</strong> authentication system.</li>
</ul>
<h4 id="examples-stand_cloud_thirdparty_auth-32-api-endpoints">3.2. API endpoints<a class="headerlink" href="#examples-stand_cloud_thirdparty_auth-32-api-endpoints" title="Permanent link">&para;</a></h4>
<p>The script defines several critical API endpoints based on the <code>BASE_URL</code>:</p>
<ul>
<li><strong><code>API_URL</code></strong>: The base URL for the <strong>StandCloud</strong> API (<code>/hardpy/api/v1</code>).</li>
<li><strong><code>DEVICE_AUTHORIZATION_URL</code></strong>: The endpoint for initiating the device authorization flow (<code>/auth/api/oidc/device-authorization</code>).</li>
<li><strong><code>TOKEN_URL</code></strong>: The endpoint for requesting tokens after device authorization (<code>/auth/api/oidc/token</code>).</li>
</ul>
<h4 id="examples-stand_cloud_thirdparty_auth-33-device-authorization-request">3.3. Device authorization request<a class="headerlink" href="#examples-stand_cloud_thirdparty_auth-33-device-authorization-request" title="Permanent link">&para;</a></h4>
<p>The script first makes a <code>POST</code> request to the <code>DEVICE_AUTHORIZATION_URL</code> with the following parameters:</p>
<ul>
<li><strong><code>client_id</code></strong>: The <code>CLIENT_ID</code> defined above.</li>
<li><strong><code>scope</code></strong>: Defines the permissions requested.<ul>
<li><code>offline_access</code>: Allows the client to request refresh tokens,
    enabling long-term access without re-authorization.</li>
<li><code>authelia.bearer.authz</code>: A specific scope related to Authelia
    (an open-source authentication and authorization server often used with OpenID Connect)
    for bearer token authorization.</li>
</ul>
</li>
<li><strong><code>audience</code></strong>: Specifies the intended recipient of the access token, which is the <code>API_URL</code>.</li>
</ul>
<p>Upon a successful response, the script extracts:</p>
<ul>
<li><strong><code>verification_uri_complete</code></strong>: The full URL the user needs to visit in their browser to authorize the device.</li>
<li><strong><code>interval</code></strong>: The recommended polling interval (in seconds) for subsequent token requests.</li>
<li><strong><code>device_code</code></strong>: A code representing the authorization request, used in subsequent token polling.</li>
</ul>
<p>The script then prints the <code>verification_uri_complete</code> for the user to access.
It includes basic error handling for the device authorization request.</p>
<h4 id="examples-stand_cloud_thirdparty_auth-34-token-request-polling">3.4. Token request (polling)<a class="headerlink" href="#examples-stand_cloud_thirdparty_auth-34-token-request-polling" title="Permanent link">&para;</a></h4>
<p>After initiating the device authorization, the script enters a loop to poll
the <code>TOKEN_URL</code> until authorization is granted by the user.
Each <code>POST</code> request to the <code>TOKEN_URL</code> includes:</p>
<ul>
<li><strong><code>client_id</code></strong>: The <code>CLIENT_ID</code>.</li>
<li><strong><code>grant_type</code></strong>: Set to <code>"urn:ietf:params:oauth:grant-type:device_code"</code>, indicating the Device Flow grant type.</li>
<li><strong><code>device_code</code></strong>: The <code>device_code</code> obtained from the initial device authorization request.</li>
</ul>
<p>The script pauses for the <code>interval</code> period between each poll.
Once the <code>access_token</code> is present in the response, the polling loop breaks, and the script proceeds.</p>
<h4 id="examples-stand_cloud_thirdparty_auth-35-test-api-call">3.5. Test API call<a class="headerlink" href="#examples-stand_cloud_thirdparty_auth-35-test-api-call" title="Permanent link">&para;</a></h4>
<p>Finally, the script demonstrates how to use the obtained <code>access_token</code> to make an authenticated API call.</p>
<ul>
<li>An <code>Authorization</code> header is constructed with the format <code>"Bearer &lt;access_token&gt;"</code>.</li>
<li>A <code>GET</code> request is made to the <code>API_URL</code> + <code>/healthcheck</code> endpoint.
    This is a simple endpoint to verify successful authentication and authorization.</li>
</ul>
<p>If the API call returns a <code>200 OK</code> status, it confirms that the OAuth authentication and
authorization process was successful, and the client can now access protected resources.
Any other status code indicates an issue, and the response text is printed for debugging.</p>
<h3 id="examples-stand_cloud_thirdparty_auth-4-replicating-in-other-languages">4. Replicating in other languages<a class="headerlink" href="#examples-stand_cloud_thirdparty_auth-4-replicating-in-other-languages" title="Permanent link">&para;</a></h3>
<p>To implement this authentication flow in a different programming language, you will need to:</p>
<ol>
<li><strong>HTTP Client Library</strong>: Use an HTTP client library available in your chosen language
    (e.g., <code>requests</code> for Python, <code>HttpClient</code> for C#, <code>fetch</code> for JavaScript, <code>OkHttp</code> for Java, <code>net/http</code> for Go).</li>
<li><strong>JSON Parsing</strong>: Implement JSON parsing to handle the responses from the authorization and token endpoints.</li>
<li><strong>URL Construction</strong>: Construct the <code>DEVICE_AUTHORIZATION_URL</code>, <code>TOKEN_URL</code>, and <code>API_URL</code>
    correctly based on your <strong>StandCloud</strong> instance.</li>
<li><strong>Request Parameters</strong>: Ensure that the <code>client_id</code>, <code>scope</code>, <code>audience</code>, <code>grant_type</code>,
    and <code>device_code</code> parameters are correctly included in your <code>POST</code> request bodies, typically as form-urlencoded data.</li>
<li><strong>Polling Logic</strong>: Implement a polling mechanism with appropriate delays to wait for user authorization.</li>
<li><strong>Bearer Token</strong>: Correctly format the <code>Authorization: Bearer &lt;access_token&gt;</code> header for protected API calls.</li>
</ol>
<h2 id="examples-stand_cloud_thirdparty_auth-authorization-example-with-token-update">Authorization example with token update<a class="headerlink" href="#examples-stand_cloud_thirdparty_auth-authorization-example-with-token-update" title="Permanent link">&para;</a></h2>
<p><strong>token_update.py</strong> is a more complex version of the <strong>auth_flow.py</strong> script,
which rotates access and refresh tokens.
This script stores these tokens in a file.
However, this simplified token storage model should not be used in a production
environment for security reasons.
The only thing that needs to be changed to make it work is the
<strong>StandCloud</strong> address in the <code>BASE_URL</code> variable.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># This script demonstrates the StandCloud authentication process with</span>
<span class="c1"># token updating. Don&#39;t use the save as file option, it&#39;s insecure.</span>
<span class="c1"># Change the URL to your StandCloud address, nothing else needs to be changed.</span>

<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1">########################################</span>
<span class="c1"># Change URL to your StandCloud address</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s2">&quot;https://demo.standcloud.io&quot;</span>
<span class="c1">########################################</span>

<span class="c1"># Configurable parameters, False if the server is self-signed</span>
<span class="n">SSL_VERIFY</span> <span class="o">=</span> <span class="kc">True</span>

<span class="c1"># OAuth client configuration</span>
<span class="c1"># client_id must be &quot;hardpy-report-uploader&quot;</span>
<span class="n">CLIENT_ID</span> <span class="o">=</span> <span class="s2">&quot;hardpy-report-uploader&quot;</span>

<span class="c1"># API endpoints</span>
<span class="n">API_URL</span> <span class="o">=</span> <span class="n">BASE_URL</span> <span class="o">+</span> <span class="s2">&quot;/hardpy/api/v1&quot;</span>
<span class="n">DEVICE_AUTHORIZATION_URL</span> <span class="o">=</span> <span class="n">BASE_URL</span> <span class="o">+</span> <span class="s2">&quot;/auth/api/oidc/device-authorization&quot;</span>
<span class="n">TOKEN_URL</span> <span class="o">=</span> <span class="n">BASE_URL</span> <span class="o">+</span> <span class="s2">&quot;/auth/api/oidc/token&quot;</span>
<span class="n">HEALTHCHECK_URL</span> <span class="o">=</span> <span class="n">API_URL</span> <span class="o">+</span> <span class="s2">&quot;/healthcheck&quot;</span>
<span class="n">TOKEN_FILE</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;token_info.json&quot;</span>


<span class="k">def</span> <span class="nf">authenticate</span><span class="p">():</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;client_id&quot;</span><span class="p">:</span> <span class="n">CLIENT_ID</span><span class="p">,</span>
        <span class="s2">&quot;scope&quot;</span><span class="p">:</span> <span class="s2">&quot;offline_access authelia.bearer.authz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;audience&quot;</span><span class="p">:</span> <span class="n">API_URL</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">req</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
        <span class="n">DEVICE_AUTHORIZATION_URL</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="n">SSL_VERIFY</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span>
    <span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

    <span class="k">if</span> <span class="s2">&quot;error&quot;</span> <span class="ow">in</span> <span class="n">response</span><span class="p">:</span>
        <span class="n">error</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;error&quot;</span><span class="p">]</span>
        <span class="n">error_description</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;error_description&quot;</span><span class="p">]</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">error_description</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">verification_uri_complete</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;verification_uri_complete&quot;</span><span class="p">]</span>
    <span class="n">interval</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;interval&quot;</span><span class="p">]</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Verification URI: </span><span class="si">{</span><span class="n">verification_uri_complete</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;client_id&quot;</span><span class="p">:</span> <span class="n">CLIENT_ID</span><span class="p">,</span>
        <span class="s2">&quot;grant_type&quot;</span><span class="p">:</span> <span class="s2">&quot;urn:ietf:params:oauth:grant-type:device_code&quot;</span><span class="p">,</span>
        <span class="s2">&quot;device_code&quot;</span><span class="p">:</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;device_code&quot;</span><span class="p">],</span>
    <span class="p">}</span>

    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">req</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">TOKEN_URL</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="n">SSL_VERIFY</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">if</span> <span class="s2">&quot;access_token&quot;</span> <span class="ow">in</span> <span class="n">response</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Authentication successful&quot;</span><span class="p">)</span>
            <span class="k">break</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>

    <span class="c1"># Calculate expiration time</span>
    <span class="n">expires_at</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">+</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;expires_in&quot;</span><span class="p">]</span>
    <span class="n">token_info</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;access_token&quot;</span><span class="p">:</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;access_token&quot;</span><span class="p">],</span>
        <span class="s2">&quot;refresh_token&quot;</span><span class="p">:</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;refresh_token&quot;</span><span class="p">],</span>
        <span class="s2">&quot;expires_at&quot;</span><span class="p">:</span> <span class="n">expires_at</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">token_info</span>


<span class="k">def</span> <span class="nf">refresh_tokens</span><span class="p">(</span><span class="n">refresh_token_value</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;client_id&quot;</span><span class="p">:</span> <span class="n">CLIENT_ID</span><span class="p">,</span>
        <span class="s2">&quot;grant_type&quot;</span><span class="p">:</span> <span class="s2">&quot;refresh_token&quot;</span><span class="p">,</span>
        <span class="s2">&quot;refresh_token&quot;</span><span class="p">:</span> <span class="n">refresh_token_value</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">req</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">TOKEN_URL</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="n">SSL_VERIFY</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

        <span class="k">if</span> <span class="s2">&quot;access_token&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">response</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;Token refresh failed. Error:&quot;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;error&quot;</span><span class="p">,</span> <span class="s2">&quot;unknown error&quot;</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">expires_at</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">+</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;expires_in&quot;</span><span class="p">]</span>
        <span class="n">token_info</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;access_token&quot;</span><span class="p">:</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;access_token&quot;</span><span class="p">],</span>
            <span class="s2">&quot;expires_at&quot;</span><span class="p">:</span> <span class="n">expires_at</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="c1"># Update refresh token if new one is provided</span>
        <span class="k">if</span> <span class="s2">&quot;refresh_token&quot;</span> <span class="ow">in</span> <span class="n">response</span><span class="p">:</span>
            <span class="n">token_info</span><span class="p">[</span><span class="s2">&quot;refresh_token&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;refresh_token&quot;</span><span class="p">]</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Access and refresh tokens updated&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Access token updated&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">token_info</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Token refresh failed:&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="k">return</span> <span class="kc">None</span>


<span class="k">def</span> <span class="nf">healthcheck</span><span class="p">(</span><span class="n">access_token</span><span class="p">):</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;Authorization&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Bearer </span><span class="si">{</span><span class="n">access_token</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Content-type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Accept&quot;</span><span class="p">:</span> <span class="s2">&quot;text/plain&quot;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">HEALTHCHECK_URL</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="n">SSL_VERIFY</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Healthcheck successful&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Healthcheck failed: HTTP </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Healthcheck error:&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="k">return</span> <span class="kc">False</span>


<span class="k">def</span> <span class="nf">save_token_info</span><span class="p">(</span><span class="n">token_info</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">Path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">TOKEN_FILE</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">token_info</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">load_token_info</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">Path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">TOKEN_FILE</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">FileNotFoundError</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONDecodeError</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">None</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">token_info</span> <span class="o">=</span> <span class="n">load_token_info</span><span class="p">()</span>

    <span class="c1"># If no tokens exist or file is corrupted</span>
    <span class="k">if</span> <span class="p">(</span>
        <span class="ow">not</span> <span class="n">token_info</span>
        <span class="ow">or</span> <span class="s2">&quot;access_token&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">token_info</span>
        <span class="ow">or</span> <span class="s2">&quot;refresh_token&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">token_info</span>
    <span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No valid tokens found. Starting authentication...&quot;</span><span class="p">)</span>
        <span class="n">token_info</span> <span class="o">=</span> <span class="n">authenticate</span><span class="p">()</span>
        <span class="n">save_token_info</span><span class="p">(</span><span class="n">token_info</span><span class="p">)</span>
        <span class="n">healthcheck</span><span class="p">(</span><span class="n">token_info</span><span class="p">[</span><span class="s2">&quot;access_token&quot;</span><span class="p">])</span>
        <span class="k">return</span>

    <span class="c1"># Check access token expiration with 10-second buffer</span>
    <span class="n">current_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">current_time</span> <span class="o">&lt;</span> <span class="n">token_info</span><span class="p">[</span><span class="s2">&quot;expires_at&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="mi">10</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Access token is valid&quot;</span><span class="p">)</span>
        <span class="n">healthcheck</span><span class="p">(</span><span class="n">token_info</span><span class="p">[</span><span class="s2">&quot;access_token&quot;</span><span class="p">])</span>
        <span class="k">return</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Access token expired. Refreshing tokens...&quot;</span><span class="p">)</span>
    <span class="n">new_token_info</span> <span class="o">=</span> <span class="n">refresh_tokens</span><span class="p">(</span><span class="n">token_info</span><span class="p">[</span><span class="s2">&quot;refresh_token&quot;</span><span class="p">])</span>

    <span class="k">if</span> <span class="n">new_token_info</span><span class="p">:</span>
        <span class="c1"># Preserve existing refresh token if not updated</span>
        <span class="k">if</span> <span class="s2">&quot;refresh_token&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">new_token_info</span><span class="p">:</span>
            <span class="n">new_token_info</span><span class="p">[</span><span class="s2">&quot;refresh_token&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">token_info</span><span class="p">[</span><span class="s2">&quot;refresh_token&quot;</span><span class="p">]</span>

        <span class="n">save_token_info</span><span class="p">(</span><span class="n">new_token_info</span><span class="p">)</span>
        <span class="n">healthcheck</span><span class="p">(</span><span class="n">new_token_info</span><span class="p">[</span><span class="s2">&quot;access_token&quot;</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Refresh token invalid. Starting re-authentication...&quot;</span><span class="p">)</span>
        <span class="n">token_info</span> <span class="o">=</span> <span class="n">authenticate</span><span class="p">()</span>
        <span class="n">save_token_info</span><span class="p">(</span><span class="n">token_info</span><span class="p">)</span>
        <span class="n">healthcheck</span><span class="p">(</span><span class="n">token_info</span><span class="p">[</span><span class="s2">&quot;access_token&quot;</span><span class="p">])</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
<h3 id="examples-stand_cloud_thirdparty_auth-1-script-breakdown">1. Script breakdown<a class="headerlink" href="#examples-stand_cloud_thirdparty_auth-1-script-breakdown" title="Permanent link">&para;</a></h3>
<p>This script extends the previous basic authentication by adding functions for token management.</p>
<h4 id="examples-stand_cloud_thirdparty_auth-11-configuration-and-endpoints">1.1. Configuration and endpoints<a class="headerlink" href="#examples-stand_cloud_thirdparty_auth-11-configuration-and-endpoints" title="Permanent link">&para;</a></h4>
<p>Most configurations are similar to the previous script:</p>
<ul>
<li><strong><code>BASE_URL</code></strong>: <strong>StandCloud</strong> instance URL.</li>
<li><strong><code>SSL_VERIFY</code></strong>: For SSL certificate validation.</li>
<li><strong><code>CLIENT_ID</code></strong>: Fixed as <code>"hardpy-report-uploader"</code>.</li>
<li><strong><code>API_URL</code></strong>: Base URL for API calls.</li>
<li><strong><code>DEVICE_AUTHORIZATION_URL</code></strong>: Endpoint for initiating device flow.</li>
<li><strong><code>TOKEN_URL</code></strong>: Endpoint for token requests (both initial and refresh).</li>
<li><strong><code>HEALTHCHECK_URL</code></strong>: A specific endpoint used to test API access.</li>
<li><strong><code>TOKEN_FILE</code></strong>: A <code>Path</code> object pointing to <code>token_info.json</code> in the same
    directory as the script. This file is used to store token information for persistence.
    <strong>(Remember the security warning regarding file storage)</strong>.</li>
</ul>
<h4 id="examples-stand_cloud_thirdparty_auth-12-authenticate-function">1.2. <code>authenticate()</code> function<a class="headerlink" href="#examples-stand_cloud_thirdparty_auth-12-authenticate-function" title="Permanent link">&para;</a></h4>
<p>This function encapsulates the <strong>initial OAuth 2.0 Device Authorization Grant Flow</strong>,
identical to the previous script's main logic.</p>
<ol>
<li>It initiates a <code>POST</code> request to <code>DEVICE_AUTHORIZATION_URL</code> with <code>client_id</code>,
    <code>scope</code> (<code>offline_access</code> is crucial here for getting a refresh token), and <code>audience</code>.</li>
<li>It handles the user interaction step, printing the <code>verification_uri_complete</code>.</li>
<li>It polls the <code>TOKEN_URL</code> using the <code>device_code</code> until an <code>access_token</code>
    (and importantly, a <code>refresh_token</code>) is received.</li>
<li>It calculates the <code>expires_at</code> timestamp based on <code>expires_in</code> and the current time,
    then returns a dictionary (<code>token_info</code>) containing <code>access_token</code>, <code>refresh_token</code>, and <code>expires_at</code>.</li>
</ol>
<h4 id="examples-stand_cloud_thirdparty_auth-13-refresh_tokens-function">1.3. <code>refresh_tokens()</code> function<a class="headerlink" href="#examples-stand_cloud_thirdparty_auth-13-refresh_tokens-function" title="Permanent link">&para;</a></h4>
<p>This new function handles the <strong>refresh token grant type</strong>.</p>
<ol>
<li>It constructs a <code>POST</code> request to the <code>TOKEN_URL</code> with:<ul>
<li><strong><code>client_id</code></strong>: Your client identifier.</li>
<li><strong><code>grant_type</code></strong>: Set to <code>"refresh_token"</code>.</li>
<li><strong><code>refresh_token</code></strong>: The <code>refresh_token_value</code> obtained from a previous authentication or refresh.</li>
</ul>
</li>
<li>Upon a successful response, it extracts the <code>access_token</code> and its new <code>expires_at</code> timestamp.</li>
<li>Crucially, it checks if a <em>new</em> <code>refresh_token</code> is provided in the response.
    If so, it updates the stored refresh token. Some authorization servers issue new
    refresh tokens with each refresh; others do not.
    Best practice is to use the newest one if provided.</li>
<li>It returns the <code>token_info</code> dictionary.
    If the refresh fails, it prints an error and returns <code>None</code>.</li>
</ol>
<h4 id="examples-stand_cloud_thirdparty_auth-14-healthcheck-function">1.4. <code>healthcheck()</code> function<a class="headerlink" href="#examples-stand_cloud_thirdparty_auth-14-healthcheck-function" title="Permanent link">&para;</a></h4>
<p>This helper function tests the validity of an <code>access_token</code> by making a <code>GET</code> request to the <code>HEALTHCHECK_URL</code>.</p>
<ol>
<li>It sets the <code>Authorization</code> header with the <code>Bearer</code> token.</li>
<li>It returns <code>True</code> if the response status is <code>200 OK</code>,
    indicating successful API access, and <code>False</code> otherwise.</li>
</ol>
<h4 id="examples-stand_cloud_thirdparty_auth-15-save_token_info-and-load_token_info-functions">1.5. <code>save_token_info()</code> and <code>load_token_info()</code> functions<a class="headerlink" href="#examples-stand_cloud_thirdparty_auth-15-save_token_info-and-load_token_info-functions" title="Permanent link">&para;</a></h4>
<p>These functions handle the <strong>persistence of token information</strong> to and from a local JSON file (<code>token_info.json</code>).</p>
<ul>
<li><strong><code>save_token_info</code></strong>: Writes the <code>token_info</code> dictionary to the <code>TOKEN_FILE</code>.</li>
<li><strong><code>load_token_info</code></strong>: Reads the <code>token_info</code> from the <code>TOKEN_FILE</code>.
    It includes error handling for <code>FileNotFoundError</code> or <code>json.JSONDecodeError</code>
    if the file doesn't exist or is corrupted, returning <code>None</code> in such cases.</li>
</ul>
<h4 id="examples-stand_cloud_thirdparty_auth-16-main">1.6. <code>main()</code><a class="headerlink" href="#examples-stand_cloud_thirdparty_auth-16-main" title="Permanent link">&para;</a></h4>
<p>This function orchestrates the script's logic.</p>
<ol>
<li><strong>Load Existing Tokens</strong>: It first attempts to <code>load_token_info()</code> from the file.</li>
<li><strong>Initial Authentication</strong>: If no valid tokens are found (file doesn't exist,
    is corrupted, or essential keys are missing), it calls <code>authenticate()</code>
    to start a new device flow, then <code>save_token_info()</code> and performs a <code>healthcheck</code>.</li>
<li><strong>Check Token Expiration</strong>: If tokens are loaded, it checks if the <code>access_token</code>
    is still valid (with a 10-second buffer before actual expiration).<ul>
<li>If valid, it performs a <code>healthcheck</code> directly.</li>
</ul>
</li>
<li><strong>Token Refresh</strong>: If the <code>access_token</code> has expired or is about to expire,
    it calls <code>refresh_tokens()</code> using the stored <code>refresh_token</code>.<ul>
<li>If the refresh is successful, it updates the <code>token_info</code>
   (preserving the refresh token if a new one wasn't issued), <code>save_token_info()</code>, and performs a <code>healthcheck</code>.</li>
<li>If the refresh fails (e.g., refresh token is revoked or expired),
   it falls back to starting a new full <code>authenticate()</code> flow.</li>
</ul>
</li>
</ol>
<h3 id="examples-stand_cloud_thirdparty_auth-2-replicating-in-other-languages">2. Replicating in other languages<a class="headerlink" href="#examples-stand_cloud_thirdparty_auth-2-replicating-in-other-languages" title="Permanent link">&para;</a></h3>
<p>To implement this robust authentication and token refresh logic in another programming language, you'll need to:</p>
<ol>
<li><strong>HTTP Client</strong>: Utilize your language's HTTP client for making <code>POST</code> and <code>GET</code> requests.</li>
<li><strong>JSON Handling</strong>: Parse JSON responses for token information and API results.</li>
<li><strong>Time Management</strong>: Accurately calculate token expiration times using timestamps.</li>
<li><strong>Token Storage</strong>: Implement a <strong>secure</strong> method to store <code>access_token</code> and especially
    <code>refresh_token</code> between application runs. Avoid plain text files in production. Consider:<ul>
<li>Environment variables (for secrets, typically during deployment).</li>
<li>Operating system's credential manager (e.g., macOS Keychain, Windows Credential Manager).</li>
<li>Encrypted database or file storage.</li>
<li>Secure vaults (e.g., HashiCorp Vault, AWS Secrets Manager).</li>
</ul>
</li>
<li><strong>Flow Logic</strong>:<ul>
<li><strong>Initial Authentication</strong>: Implement the Device Flow as described in the previous documentation.</li>
<li><strong>Token Expiration Check</strong>: Before making an API call, always check if the access token is near expiration.</li>
<li><strong>Token Refresh Logic</strong>: If expired, make a <code>POST</code> request to the <code>TOKEN_URL</code> with <code>grant_type=refresh_token</code> and the <code>refresh_token</code>.</li>
<li><strong>Fallback to Re-authentication</strong>: If the refresh token fails, initiate the full Device Flow again.</li>
</ul>
</li>
<li><strong>Error Handling</strong>: Implement robust error handling for network issues,
    invalid responses, and authentication failures at each step.</li>
</ol></section><h1 class='nav-section-title-end'>Ended: Examples</h1>
                        <h1 class='nav-section-title' id='section-about'>
                            About <a class='headerlink' href='#section-about' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="about-development"><h1 id="about-development-development">Development<a class="headerlink" href="#about-development-development" title="Permanent link">&para;</a></h1>
<h2 id="about-development-environment">Environment<a class="headerlink" href="#about-development-environment" title="Permanent link">&para;</a></h2>
<h3 id="about-development-requirements">Requirements<a class="headerlink" href="#about-development-requirements" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>python</strong> version must be equal to or greater than  <strong>3.10</strong>;</li>
<li><strong>yarn</strong> version must be equal to 4.0.1;</li>
<li><strong>node.js</strong> version must be equal to or greater than <strong>16.10.0</strong>;</li>
<li><strong>CouchDB</strong> version must be equal to or greater than <strong>3.2.0</strong>;</li>
</ul>
<h3 id="about-development-conda">Conda<a class="headerlink" href="#about-development-conda" title="Permanent link">&para;</a></h3>
<p>Create a conda.yaml file if you prefer to work through <strong>Anaconda</strong> or <strong>Miniconda</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hardpy</span>
<span class="nt">channels</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">defaults</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">conda-forge</span>
<span class="nt">dependencies</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python=3.10</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pip&gt;=22</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nodejs=20</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yarn=4.0.1</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pip</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-r requirements.txt</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-r requirements-doc.txt</span>
</code></pre></div>
<p>create environment:</p>
<div class="highlight"><pre><span></span><code>conda<span class="w"> </span>env<span class="w"> </span>create<span class="w"> </span>-f<span class="w"> </span>conda.yaml
</code></pre></div>
<p>Activate:</p>
<div class="highlight"><pre><span></span><code>conda<span class="w"> </span>activate<span class="w"> </span>hardpy
</code></pre></div>
<h3 id="about-development-venv">venv<a class="headerlink" href="#about-development-venv" title="Permanent link">&para;</a></h3>
<p>If you prefer to work through <strong>venv</strong>:</p>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>venv
</code></pre></div>
<p>Activate:</p>
<div class="highlight"><pre><span></span><code><span class="nb">source</span><span class="w"> </span>venv/bin/activate
</code></pre></div>
<p>Install dependencies:</p>
<div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements-doc.txt
</code></pre></div>
<h2 id="about-development-frontend">Frontend<a class="headerlink" href="#about-development-frontend" title="Permanent link">&para;</a></h2>
<h3 id="about-development-overview">Overview<a class="headerlink" href="#about-development-overview" title="Permanent link">&para;</a></h3>
<p>The frontend of the project can be developed, debugged, and built using Visual Studio Code (VSCode) or command-line tools.
Below are the steps to run, debug, and build the frontend application.</p>
<p><strong>node.js</strong> and <strong>yarn</strong> are required to build the frontend.</p>
<h3 id="about-development-1-running-the-frontend-for-hardpy-debugging">1. Running the frontend for Hardpy debugging<a class="headerlink" href="#about-development-1-running-the-frontend-for-hardpy-debugging" title="Permanent link">&para;</a></h3>
<p>To run the frontend application for debugging purposes, you can use the <strong>Run Frontend</strong> configuration in VSCode or execute commands manually.</p>
<h4 id="about-development-using-vscode">Using VSCode<a class="headerlink" href="#about-development-using-vscode" title="Permanent link">&para;</a></h4>
<ol>
<li>Open the "Run and Debug" in VSCode.</li>
<li>Select the <strong>Run Frontend</strong> configuration.</li>
<li>Click the "Run" button (or press <code>F5</code>).</li>
</ol>
<p>This will:</p>
<ul>
<li>Launch <code>yarn</code>.</li>
<li>Start the frontend application in development mode with debugging enabled.</li>
</ul>
<h4 id="about-development-manually">Manually<a class="headerlink" href="#about-development-manually" title="Permanent link">&para;</a></h4>
<p>Navigate to the frontend directory and run the following commands:</p>
<div class="highlight"><pre><span></span><code>npm<span class="w"> </span>install<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>npm<span class="w"> </span>run<span class="w"> </span>dev
</code></pre></div>
<p>You can specify your own port by adding it as an environment variable:</p>
<div class="highlight"><pre><span></span><code><span class="nv">PORT</span><span class="o">=</span><span class="m">4000</span>
</code></pre></div>
<p>By default, the frontend opens on port 3000 at the address <a href="http://localhost:3000/">http://localhost:3000/</a>.</p>
<h3 id="about-development-2-debugging-the-frontend">2. Debugging the frontend<a class="headerlink" href="#about-development-2-debugging-the-frontend" title="Permanent link">&para;</a></h3>
<p>To debug the frontend application in the Chrome browser, use the <strong>Debug Frontend</strong> configuration in VSCode.</p>
<h4 id="about-development-using-vscode_1">Using VSCode<a class="headerlink" href="#about-development-using-vscode_1" title="Permanent link">&para;</a></h4>
<ol>
<li>Ensure the frontend is running (use the <strong>Run Frontend</strong> configuration or manually start it).</li>
<li>Open the "Run and Debug" in VSCode.</li>
<li>Select the <strong>Debug Frontend</strong> configuration.</li>
<li>Click the "Run" button (or press <code>F5</code>).</li>
</ol>
<p>This will:</p>
<ul>
<li>Launch Chrome and attach the debugger to the running frontend application at <code>http://localhost:3000</code>.</li>
<li>Enable source maps for easier debugging.</li>
</ul>
<h4 id="about-development-manually_1">Manually<a class="headerlink" href="#about-development-manually_1" title="Permanent link">&para;</a></h4>
<ol>
<li>Start the frontend application (as described in the <strong>Run Frontend</strong> section).</li>
<li>Open Chrome and navigate to <code>http://localhost:3000</code>.</li>
<li>Use Chrome DevTools (<code>F12</code>) to debug the application.</li>
</ol>
<h3 id="about-development-3-building-the-frontend-for-hardpy-package">3. Building the frontend for Hardpy package<a class="headerlink" href="#about-development-3-building-the-frontend-for-hardpy-package" title="Permanent link">&para;</a></h3>
<p>To build the frontend and include it in the Hardpy package, you can use the provided scripts or run the commands manually.</p>
<p>Use the <code>compile_front.sh</code> script from <code>scripts</code> folder
or run the scripts manually:</p>
<div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
python<span class="w"> </span>-m<span class="w"> </span>build
</code></pre></div>
<p>For frontend rebuilding use the <code>recompile_front.sh</code> from <code>scripts</code> folder
or run the scripts manually:</p>
<div class="highlight"><pre><span></span><code>pip<span class="w"> </span>uninstall<span class="w"> </span><span class="nv">$PRJ</span><span class="w"> </span>-y

rm<span class="w"> </span>-rf<span class="w"> </span>hardpy/hardpy_panel/frontend/dist
rm<span class="w"> </span>-rf<span class="w"> </span>hardpy/hardpy_panel/frontend/node_modules
rm<span class="w"> </span>-rf<span class="w"> </span>*.egg-info
rm<span class="w"> </span>-rf<span class="w"> </span>dist
rm<span class="w"> </span>-rf<span class="w"> </span>__pycache__

pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
python<span class="w"> </span>-m<span class="w"> </span>build
</code></pre></div>
<h3 id="about-development-4-setting-the-debug_frontend-variable">4. Setting the <code>DEBUG_FRONTEND</code> variable<a class="headerlink" href="#about-development-4-setting-the-debug_frontend-variable" title="Permanent link">&para;</a></h3>
<p>To enable debugging for the frontend application, you must set the <code>DEBUG_FRONTEND</code> environment variable.
Without this variable, the frontend will not run in debug mode, and the <strong>Run Frontend</strong> and <strong>Debug Frontend</strong> configurations will not work as expected.</p>
<h4 id="about-development-option-1-setting-debug_frontend-in-vscode-configuration">Option 1: setting <code>DEBUG_FRONTEND</code> in VSCode configuration<a class="headerlink" href="#about-development-option-1-setting-debug_frontend-in-vscode-configuration" title="Permanent link">&para;</a></h4>
<p>You can specify the <code>DEBUG_FRONTEND</code> variable directly in the VSCode launch configuration.
Here's an example of how to include it in a test configuration:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Python: Example Dialog box&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;debugpy&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;request&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;launch&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;module&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;hardpy.cli.cli&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;console&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integratedTerminal&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;env&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;DEBUG_FRONTEND&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;run&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;examples/dialog_box&quot;</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>This configuration ensures that the frontend runs in debug mode when the test is executed.</p>
<h4 id="about-development-option-2-setting-debug_frontend-in-env-file">Option 2: setting <code>DEBUG_FRONTEND</code> in <code>.env</code> file<a class="headerlink" href="#about-development-option-2-setting-debug_frontend-in-env-file" title="Permanent link">&para;</a></h4>
<p>Alternatively, you can define the <code>DEBUG_FRONTEND</code> variable in a <code>.env</code> file located in the root of your project. </p>
<ol>
<li>Create a <code>.env</code> file in the root directory of your project (if it doesn't already exist).</li>
<li>Add the following line to the <code>.env</code> file:</li>
</ol>
<div class="highlight"><pre><span></span><code>DEBUG_FRONTEND=1
</code></pre></div>
<ol>
<li>Ensure your VSCode or runtime environment loads the <code>.env</code> file. Many tools and frameworks (e.g., <code>python-dotenv</code>) automatically load variables from <code>.env</code>.</li>
</ol>
<h2 id="about-development-adding-translations">Adding Translations<a class="headerlink" href="#about-development-adding-translations" title="Permanent link">&para;</a></h2>
<p>To add or modify translations for the HardPy operator panel:</p>
<ol>
<li>
<p>Navigate to the translations directory:
   <div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>hardpy/hardpy_panel/frontend/public/locales/
</code></pre></div></p>
</li>
<li>
<p>Create a new folder for your language using its ISO 639 code (e.g., <code>en</code> for English, <code>ru</code> for Russian, <code>fr</code> for French).</p>
</li>
<li>
<p>Inside the language folder, create a <code>translation.json</code> file with the following structure:
   <div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;app&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;HardPy Operator Panel&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;lastLaunch&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Last launch:&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;duration&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Duration&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;s&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;soundOn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Turn on the sound&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;soundOff&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Turn off the sound&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;debugOn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Turn on the debug mode&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;debugOff&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Turn off the debug mode&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;connection&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Establishing a connection... 🧐🔎&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;dbError&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Database connection error. 🙅🏽‍♀️🚫&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;noEntries&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;No entries in the database 🙅🏽‍♀️🚫&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;ready&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ready&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;run&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;run&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;passed&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pass&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;failed&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;fail&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;stopped&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;stopped&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;unknown&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;unknown&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;button&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;start&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Start&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;stop&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Stop&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;confirm&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Confirm&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;error&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;dbConnectionTitle&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Database Connection Error&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;dbConnectionMessage&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Failed to establish connection with the database&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;operatorDialog&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;defaultTitle&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Message&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;imageAlt&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Operator message image&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;htmlCodeTitle&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;HTML Code&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;htmlLinkTitle&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;HTML Link&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;enterAnswer&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Enter answer&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;fieldNotEmpty&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The field must not be empty&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;notificationTitle&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Notification&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;notificationDesc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The window was closed. Tests stopped.&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;numericInputError&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Please enter a number&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;radioButtonError&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Please select one option&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;checkboxError&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Please select at least one option&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;suiteList&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;loadingTests&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Loading tests... 🤔&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;refreshHint&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Try refreshing the page.&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;standName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Stand name&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Status&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;startTime&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Start time&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;finishTime&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Finish time&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;alert&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Alert&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;testSuite&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;nameColumn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Name&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;dataColumn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Data&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;loading&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Loading...&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;stubName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Test Suite&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
</li>
<li>
<p>Translate all values while keeping the same JSON structure and keys.</p>
</li>
</ol>
<p>Note: Always use valid ISO 639 language codes for folder names.</p>
<h2 id="about-development-launch">Launch<a class="headerlink" href="#about-development-launch" title="Permanent link">&para;</a></h2>
<ol>
<li>Install dependencies or create environment.</li>
<li>Compile frontend if it's the first launch.</li>
<li>Launch <code>hardpy init</code> with path to tests folder.</li>
<li>Launch <strong>CouchDB</strong> instance.</li>
<li>Launch <code>hardpy run</code> with path to tests folder.</li>
</ol>
<p>Addresses:</p>
<ul>
<li>HardPy panel: <a href="http://localhost:8000/">http://localhost:8000/</a></li>
<li>CouchDB: <a href="http://localhost:5984/_utils/">http://localhost:5984/_utils/</a></li>
</ul>
<h2 id="about-development-documentation">Documentation<a class="headerlink" href="#about-development-documentation" title="Permanent link">&para;</a></h2>
<h3 id="about-development-server">Server<a class="headerlink" href="#about-development-server" title="Permanent link">&para;</a></h3>
<p>Documentation server command is:</p>
<div class="highlight"><pre><span></span><code>mkdocs<span class="w"> </span>serve
</code></pre></div>
<p>Documentation address: <a href="http://localhost:8000/">http://localhost:8000/</a></p>
<h3 id="about-development-build">Build<a class="headerlink" href="#about-development-build" title="Permanent link">&para;</a></h3>
<p>Documentation building command is:</p>
<div class="highlight"><pre><span></span><code>mkdocs<span class="w"> </span>build
</code></pre></div>
<p>The result is in the folder <code>public</code>.</p></section><section class="print-page" id="about-fronted_sync"><h1 id="about-fronted_sync-frontend-data-synchronization">Frontend data synchronization<a class="headerlink" href="#about-fronted_sync-frontend-data-synchronization" title="Permanent link">&para;</a></h1>
<p>Data synchronization uses the replication mechanism of CouchDB and PouchDB.</p>
<ul>
<li>The <strong>statestore</strong> database contains the document <strong>current</strong>, which is a JSON
object that stores the current state of the test run without artifacts.
The plugin updates the document as testing progresses using the <strong>StateStore</strong> class.</li>
<li>The <a href="#documentation-database-runstore-scheme">runstore</a> database contains the document
<strong>current</strong>, which is a JSON object that stores the current state of the test run with
artifacts - a report on the current test run.</li>
</ul>
<h2 id="about-fronted_sync-statestore-scheme">Statestore scheme<a class="headerlink" href="#about-fronted_sync-statestore-scheme" title="Permanent link">&para;</a></h2>
<h1 align="center">
    <a class="glightbox" href="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/database/statestore.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://raw.githubusercontent.com/everypinio/hardpy/main/docs/img/database/statestore.png" alt="statestore_scheme"></a>
</h1>

<p>The <strong>runstore</strong> database is similar to <strong>statestore</strong> database, but there are differences:</p>
<ul>
<li><strong>runstore</strong> contains the <strong>artifact</strong> field for test run, module, and case.</li>
<li><strong>runstore</strong> does not contain some fields: <strong>progress</strong>, <strong>dialog_box</strong>, <strong>attempt</strong>,
  <strong>alert</strong>, <strong>operator_data</strong>, <strong>operator_msg</strong>.</li>
</ul>
<p>The <strong>current</strong> document of the <strong>statestore</strong> database contains some section.</p>
<h4 id="about-fronted_sync-main">main<a class="headerlink" href="#about-fronted_sync-main" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>_rev</strong>: a CouchDB <a href="https://docs.couchdb.org/en/stable/api/document/common.html">revision MVCC</a> token;
  The variable is assigned automatically.</li>
<li><strong>_id</strong>: unique document identifier.
  The variable is assigned automatically.</li>
<li><strong>progress</strong>: test run progress.
  The variable is assigned automatically.</li>
<li><strong>stop_time</strong>: the end time of the test in Unix seconds. The variable is assigned automatically.</li>
<li><strong>start_time</strong>: the start time of the test in Unix seconds. The variable is assigned automatically.</li>
<li><strong>status</strong>: test execution status from <strong>pytest</strong>: <strong>passed</strong>, <strong>failed</strong>, <strong>skipped</strong>, <strong>stopped</strong>.
  The variable is assigned automatically.</li>
<li><strong>name</strong>: the name of the test suite. It is displayed in the header of the operator panel.
  The user can specify the name using the <code>tests_name</code> variable in the <strong>hardpy.toml</strong> file.
  If this variable is not set, the name will be taken from the directory name containing the tests.</li>
<li><strong>dut</strong>: DUT information. See the <a href="#about-fronted_sync-dut">dut</a> section for more information.</li>
<li><strong>test_stand</strong>: test stand information. See the <a href="#about-fronted_sync-test_stand">test_stand</a> section for more information.</li>
<li><strong>modules</strong>: module (pytest files) information. See the <a href="#about-fronted_sync-modules">modules</a> section for more information.</li>
<li><strong>alert</strong>: operator panel alert information.
  Alert information is displayed at the top of the operator panel.
  The variable is assigned automatically.</li>
<li><strong>operator_data</strong> operator panel data for operator message.
  This is filled in when the <a href="#documentation-pytest_hardpy-set_operator_message">set_operator_message</a> function is called.</li>
<li><strong>operator_msg</strong>: text of an operator message.
  This is filled in when the <a href="#documentation-pytest_hardpy-set_operator_message">set_operator_message</a> or
  <a href="#documentation-pytest_hardpy-clear_operator_message">clear_operator_message</a> functions is called.</li>
</ul>
<h4 id="about-fronted_sync-test_stand">test_stand<a class="headerlink" href="#about-fronted_sync-test_stand" title="Permanent link">&para;</a></h4>
<p>The <strong>test_stand</strong> section contains information about the test stand.
It is a computer on which <strong>HardPy</strong> is running and to which the DUT test equipment is connected.</p>
<ul>
<li><strong>name</strong> - test stand name. It can only be set once per test run.
  The user can specify the stand name by using <a href="#documentation-pytest_hardpy-set_stand_name">set_stand_name</a> function.</li>
<li><strong>drivers</strong>: information about drivers in the form of a dictionary, including test equipment and test equipment software.
  The user can specify the driver info by using <a href="#documentation-pytest_hardpy-set_driver_info">set_driver_info</a> function.</li>
<li><strong>info</strong>: dictionary containing additional information about the test stand.
  The user can specify the additional info by using <a href="#documentation-pytest_hardpy-set_stand_info">set_stand_info</a> function.</li>
<li><strong>timezone</strong>: timezone of test stand as a string. The variable is assigned automatically.</li>
<li><strong>location</strong>: the location of the test stand, e.g., the country, city, or laboratory number.
  It can only be set once per test run. The user can specify the location by using
  <a href="#documentation-pytest_hardpy-set_stand_location">set_stand_location</a> function.</li>
<li><strong>number</strong>: test stand number. Some stands may have the same name and
  run on the same computer but have different numbers. It can only be set once per test run.
  The user can specify the stand number by using <a href="#documentation-pytest_hardpy-set_stand_number">set_stand_number</a> function.</li>
<li><strong>hw_id</strong>: test stand machine id (GUID) or host name. The variable is assigned automatically by
  the <a href="https://pypi.org/project/py-machineid/">py-machineid</a> package</li>
</ul>
<h4 id="about-fronted_sync-dut">dut<a class="headerlink" href="#about-fronted_sync-dut" title="Permanent link">&para;</a></h4>
<p>The device under test section contains information about the DUT.</p>
<ul>
<li><strong>serial_number</strong>: DUT serial number. This identifier is unique to the testing device or board.
  It can only be set once per test run.
  The user can specify the DUT serial number by using <a href="#documentation-pytest_hardpy-set_dut_serial_number">set_dut_serial_number</a> function.</li>
<li><strong>part_number</strong>: DUT part number. This identifier of a particular part design, board or device.
  It can only be set once per test run.
  The user can specify the DUT part number by using <a href="#documentation-pytest_hardpy-set_dut_part_number">set_dut_part_number</a> function.</li>
<li><strong>info</strong>: dictionary containing additional information about the the DUT, such as batch, board revision, etc.
  The user can specify the additional info by using <a href="#documentation-pytest_hardpy-set_dut_info">set_dut_info</a> function.</li>
</ul>
<h4 id="about-fronted_sync-operator_msg">operator_msg<a class="headerlink" href="#about-fronted_sync-operator_msg" title="Permanent link">&para;</a></h4>
<p>The <strong>operator_msg</strong> section contains operator message data.
The user can open a operator message box by using the <a href="#documentation-pytest_hardpy-set_operator_message">set_operator_message</a> function.
The user can close a operator message box by using the <a href="#documentation-pytest_hardpy-clear_operator_message">clear_operator_message</a> function.</p>
<ul>
<li><strong>msg</strong>: message for operator.</li>
<li><strong>title</strong>: the title of operator message dialog box.</li>
<li><strong>visible</strong>: should a message be displayed on the operator panel.</li>
<li><strong>id</strong>: operator message id.</li>
<li><strong>font_size</strong>: operator message font size.</li>
<li><strong>image</strong>: information about image.</li>
<li><strong>address</strong>: image address.</li>
<li><strong>width</strong>: image width in percent.</li>
<li><strong>border</strong>: image border in pixels.</li>
<li><strong>base64</strong>: image in base64 code.</li>
<li><strong>html</strong>: information about html.</li>
<li><strong>code_or_url</strong>: html code or link.</li>
<li><strong>is_raw_html</strong>: is html code is raw.</li>
<li><strong>width</strong>: html width in percent.</li>
<li><strong>border</strong>: html border in pixels.</li>
</ul>
<h4 id="about-fronted_sync-modules">modules<a class="headerlink" href="#about-fronted_sync-modules" title="Permanent link">&para;</a></h4>
<p>The <strong>modules</strong> section contains the information about tests.
Each module contains information from a single test file.
The module's name is the same as the file's name.</p>
<ul>
<li><strong>test_{module_name}</strong>: an object containing information about a specific module.
  The <code>{module_name}</code> variable is assigned automatically.
  Contains the following fields:</li>
<li><strong>status</strong>: module test execution status. The variable is assigned automatically.</li>
<li><strong>name</strong>: module name, by default the same as module_id.
    The user can specify the module name by using <a href="#documentation-pytest_hardpy-module_name">module_name</a> marker.</li>
<li><strong>start_time</strong>: start time of module testing in Unix seconds. The variable is assigned automatically.</li>
<li><strong>stop_time</strong>: end time of module testing in Unix seconds. The variable is assigned automatically.</li>
<li><strong>cases</strong>: an object that contains information about each test case within the module.<ul>
<li><strong>test_{case_name}</strong>: an object containing information about a specific case.
  The <code>{case_name}</code> variable is assigned automatically.
  Contains the following fields:</li>
<li><strong>status</strong>: test case execution status. The variable is assigned automatically.</li>
<li><strong>name</strong>: case name, by default the same as case_id.
    The user can specify the case name by using <a href="#documentation-pytest_hardpy-case_name">case_name</a> marker.</li>
<li><strong>start_time</strong>: start time of case testing in Unix seconds. The variable is assigned automatically.</li>
<li><strong>stop_time</strong>: end time of case testing in Unix seconds. The variable is assigned automatically.</li>
<li><strong>assertion_msg</strong>: assert or error message if the test case fails. The variable is assigned automatically.
    However, the user can write their own message in case of an assertion, which will be written to this variable.
    For example:
    <div class="highlight"><pre><span></span><code><span class="k">assert</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;This is an example&quot;</span>
</code></pre></div>
    The <strong>assertion_msg</strong> is displayed in the operator panel next to the test case in which it was called.</li>
<li><strong>msg</strong>: the log message is displayed in the operator panel next to the test case in which it was called.
    The user can specify and update current message by using <a href="#documentation-pytest_hardpy-set_message">set_message</a> function.</li>
<li><strong>attempt</strong>: number of attempts per successful test case.
    The user can specify the case name by using <a href="#documentation-pytest_hardpy-attempt">attempt</a> marker.</li>
<li><strong>dialog_box</strong>: information about dialog box.
    The user can open a dialog box within a test case by using the <a href="#documentation-pytest_hardpy-run_dialog_box">run_dialog_box</a> function.
    Data from the dialog box is passed through the <a href="#documentation-pytest_hardpy-DialogBox">DialogBox</a> class.<ul>
<li><strong>title_bar</strong>: title bar of the dialog box.</li>
<li><strong>dialog_text</strong>: text displayed in the dialog box.</li>
<li><strong>widget</strong>: information about the widget.</li>
<li><strong>info</strong>: widget additional information.</li>
<li><strong>type</strong>: type of the widget.</li>
<li><strong>image</strong>: information about image.</li>
<li><strong>address</strong>: image address.</li>
<li><strong>width</strong>: image width in percent.</li>
<li><strong>border</strong>: image border in pixels.</li>
<li><strong>base64</strong>: image in base64 code.</li>
<li><strong>html</strong>: information about html.</li>
<li><strong>code_or_url</strong>: html code or link.</li>
<li><strong>is_raw_html</strong>: is html code is raw.</li>
<li><strong>width</strong>: html width in percent.</li>
<li><strong>border</strong>: html border in pixels.</li>
<li><strong>visible</strong>: should a dialog box be displayed on the operator panel.</li>
<li><strong>id</strong>: dialog box id.</li>
<li><strong>font_size</strong>: dialog box font size.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Example of a <strong>current</strong> document:</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;_rev&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;44867-3888ae85c19c428cc46685845953b483&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;current&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;progress&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;stop_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1695817266</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;start_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1695817263</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;failed&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;alert&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;operator_data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;dialog&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;hardpy-stand&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;dut&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;serial_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;92c5a4bb-ecb0-42c5-89ac-e0caca0919fd&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;part_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;part_1&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;batch&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;test_batch&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;board_rev&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;rev_1&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;test_stand&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;hw_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;840982098ca2459a7b22cc608eff65d4&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;test_stand_1&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;geo&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Belgrade&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;timezone&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Europe/Belgrade&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;drivers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;driver_1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;driver info&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;driver_2&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;state&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;active&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;port&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">8000</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;location&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Belgrade_1&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;number&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;operator_msg&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;msg&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Operator message&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Message&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;visible&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;f45ac1e7-2ce8-4a6b-bb9d-8863e30bcc78&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;modules&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;test_1_a&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;failed&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Module 1&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;start_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1695816884</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;stop_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1695817265</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;cases&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;test_dut_info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;passed&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DUT info &quot;</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;start_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1695817263</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;stop_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1695817264</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;assertion_msg&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;msg&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;attempt&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;dialog_box&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;title_bar&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Example of text input&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;dialog_text&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Type some text and press the Confirm button&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;widget&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;text&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;some text&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;textinput&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;image&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;assets/test.png&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;width&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;border&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;html&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;code_or_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://everypinio.github.io/hardpy/&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;width&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;border&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;is_raw_html&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;visible&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;b57ab1e7-8cf8-4a6a-bb9d-8863ea0bcc78&quot;</span>
<span class="w">              </span><span class="p">}</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;test_minute_parity&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;failed&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Test 1&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;start_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1695817264</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;stop_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1695817264</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;assertion_msg&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The test failed because minute 21 is odd! Try again!&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;attempt&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;msg&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="s2">&quot;Current minute 21&quot;</span>
<span class="w">              </span><span class="p">]</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div></section><h1 class='nav-section-title-end'>Ended: About</h1><section class="print-page" id="changelog"><h1 id="changelog-changelog">Changelog<a class="headerlink" href="#changelog-changelog" title="Permanent link">&para;</a></h1>
<p>Versions follow <a href="https://semver.org/">Semantic Versioning</a>: <code>&lt;major&gt;.&lt;minor&gt;.&lt;patch&gt;</code>.</p>
<h2 id="changelog-hardpy-0140">HardPy 0.14.0<a class="headerlink" href="#changelog-hardpy-0140" title="Permanent link">&para;</a></h2>
<ul>
<li>Add status display in words depending on the testing status.
  [<a href="https://github.com/everypinio/hardpy/pull/165">PR-165</a>]</li>
<li>Add a timeout to the <code>load</code> function of the <code>StandCloudLoader</code> class.
  [<a href="https://github.com/everypinio/hardpy/pull/166">PR-166</a>]</li>
<li>Fix logic for processing spacebar pressing.
  [<a href="https://github.com/everypinio/hardpy/pull/164">PR-164</a>]</li>
<li>Fix the display of the module duration after the operator panel has been restarted.
  [<a href="https://github.com/everypinio/hardpy/pull/163">PR-163</a>]</li>
<li>Add the display of last test run duration.
  [<a href="https://github.com/everypinio/hardpy/pull/163">PR-163</a>]</li>
<li>Add the option to translate the HardPy operator panel using ISO 639 language codes.
  [<a href="https://github.com/everypinio/hardpy/pull/159">PR-159</a>]</li>
</ul>
<h2 id="changelog-hardpy-0130">HardPy 0.13.0<a class="headerlink" href="#changelog-hardpy-0130" title="Permanent link">&para;</a></h2>
<ul>
<li>Change CI settings, add testing of tests on different versions of packages.
  [<a href="https://github.com/everypinio/hardpy/pull/157">PR-157</a>]</li>
<li>Add an alert to operator panel when the following are called not from tests:
  <code>set_message</code>, <code>set_case_artifact</code>, <code>set_module_artifact</code>, <code>run_dialog_box</code>,
  and <code>get_current_attempt</code>.
  [<a href="https://github.com/everypinio/hardpy/pull/154">PR-154</a>]</li>
<li>Update the status of the test case and module when the test stops.
  Only one case and one module receive the "stopped" status, while the rest are marked as "skipped."
  [<a href="https://github.com/everypinio/hardpy/pull/154">PR-154</a>]</li>
<li>Change <strong>StandCloud</strong> authorization process to OAuth2 Device Flow by
  <a href="https://datatracker.ietf.org/doc/html/rfc8628">RFC8628</a>.
  [<a href="https://github.com/everypinio/hardpy/pull/152">PR-152</a>]</li>
</ul>
<h2 id="changelog-hardpy-0121">HardPy 0.12.1<a class="headerlink" href="#changelog-hardpy-0121" title="Permanent link">&para;</a></h2>
<ul>
<li>Fix the situation in which the module and case stop times stop updating when the user stops the tests.
  [<a href="https://github.com/everypinio/hardpy/pull/149">PR-149</a>]</li>
</ul>
<h2 id="changelog-hardpy-0120">HardPy 0.12.0<a class="headerlink" href="#changelog-hardpy-0120" title="Permanent link">&para;</a></h2>
<ul>
<li>Update <code>test_run</code> <strong>StandCloudReader</strong> function.
  The <code>test_run</code> function provides access to 2 endpoints: <code>/test_run/{test_run_id}</code> and <code>/test_run</code>.
  [<a href="https://github.com/everypinio/hardpy/pull/145">PR-145</a>]</li>
<li>Update database scheme description.
  [<a href="https://github.com/everypinio/hardpy/pull/140">PR-140</a>]</li>
<li>Add test stand number by using <code>set_stand_number</code> function.
  [<a href="https://github.com/everypinio/hardpy/pull/140">PR-140</a>]</li>
<li>Add prohibition to run tests on the port if the port is busy.
  [<a href="https://github.com/everypinio/hardpy/pull/136">PR-136</a>]</li>
<li>Add marker <strong>critical</strong>.
  [<a href="https://github.com/everypinio/hardpy/pull/135">PR-135</a>],
  [<a href="https://github.com/everypinio/hardpy/pull/142">PR-142</a>],
  [<a href="https://github.com/everypinio/hardpy/pull/143">PR-143</a>]</li>
<li>Change dependency behaviour when a case or module name does not exist.
  Such a test or module will be executed.
  [<a href="https://github.com/everypinio/hardpy/pull/130">PR-130</a>]</li>
<li>Add the ability to add dependency from multiple tests.
  [<a href="https://github.com/everypinio/hardpy/pull/130">PR-130</a>]</li>
<li>Transfer frontend from CRA to Vite.
  [<a href="https://github.com/everypinio/hardpy/pull/122">PR-122</a>]</li>
<li>Remove bug with scrolling tests with operator messages.
  [<a href="https://github.com/everypinio/hardpy/pull/122">PR-122</a>]</li>
<li>Logging to <strong>pytest.ini</strong> is no longer configured during <strong>HardPy</strong> project initialization by <code>hardpy init</code>.
  [<a href="https://github.com/everypinio/hardpy/pull/122">PR-122</a>]</li>
</ul>
<h2 id="changelog-hardpy-0112">HardPy 0.11.2<a class="headerlink" href="#changelog-hardpy-0112" title="Permanent link">&para;</a></h2>
<ul>
<li>Fix StandCloud login support in version 3.12+.
  [<a href="https://github.com/everypinio/hardpy/pull/134">PR-134</a>]</li>
</ul>
<h2 id="changelog-hardpy-0111">HardPy 0.11.1<a class="headerlink" href="#changelog-hardpy-0111" title="Permanent link">&para;</a></h2>
<ul>
<li>Change <strong>StandCloud</strong> URL for publish test report to <code>/test_report</code>.
  [<a href="https://github.com/everypinio/hardpy/pull/131">PR-131</a>]</li>
<li>Add <code>StandCloudReader</code> class for reading data from <strong>StandCloud</strong>.
  [<a href="https://github.com/everypinio/hardpy/pull/131">PR-131</a>]</li>
<li>Fix the behavior with empty module start time with skipped test.
  [<a href="https://github.com/everypinio/hardpy/pull/131">PR-131</a>]</li>
<li>Fix the behavior with empty module stop time with skipped test.
  [<a href="https://github.com/everypinio/hardpy/pull/129">PR-129</a>]</li>
<li>Add Stand info to Operator panel.
  [<a href="https://github.com/everypinio/hardpy/pull/127">PR-127</a>]</li>
<li>Add the <code>tests_name</code> field to <strong>hardpy.toml</strong>.
  The <code>tests_name</code> allows to name the test suite in the operator panel.
  [<a href="https://github.com/everypinio/hardpy/pull/126">PR-126</a>]</li>
<li>Add CLI commands: <code>hardpy start</code>, <code>hardpy stop</code> and <code>hardpy status</code>.
  [<a href="https://github.com/everypinio/hardpy/pull/126">PR-126</a>]</li>
<li>Change the StandCloud API address to <code>/hardpy/api</code>.
  [<a href="https://github.com/everypinio/hardpy/pull/125">PR-125</a>]</li>
</ul>
<h2 id="changelog-hardpy-0110">HardPy 0.11.0<a class="headerlink" href="#changelog-hardpy-0110" title="Permanent link">&para;</a></h2>
<ul>
<li>Remove the internal <strong>HardPy</strong> socket on port 6525. Pytest plugin arguments <code>--hardpy-sh</code> and <code>--hardpy-sp</code>
  are left for backward compatibility with version below 0.10.1.
  [<a href="https://github.com/everypinio/hardpy/pull/114">PR-114</a>]</li>
<li>Add the ability to add HTML pages using <code>HTMLComponent</code> to dialog boxes and operator messages.
  [<a href="https://github.com/everypinio/hardpy/pull/104">PR-104</a>]</li>
</ul>
<h2 id="changelog-hardpy-0101">HardPy 0.10.1<a class="headerlink" href="#changelog-hardpy-0101" title="Permanent link">&para;</a></h2>
<ul>
<li>Fix <strong>StandCloud</strong> authorization process in Windows.
  [<a href="https://github.com/everypinio/hardpy/pull/110">PR-110</a>]</li>
</ul>
<h2 id="changelog-hardpy-0100">HardPy 0.10.0<a class="headerlink" href="#changelog-hardpy-0100" title="Permanent link">&para;</a></h2>
<ul>
<li>Add the <code>[stand_cloud]</code> section to the <strong>hardpy.toml</strong> configuration file.
  [<a href="https://github.com/everypinio/hardpy/pull/85">PR-85</a>]</li>
<li>Add the <code>StandCloudLoader</code> class to append the test result to the <strong>StandCloud</strong>.
  [<a href="https://github.com/everypinio/hardpy/pull/85">PR-85</a>]</li>
<li>Add support for <strong>StandCloud</strong> login and logout with <code>sc-login</code> and <code>sc-logout</code> commands.
  [<a href="https://github.com/everypinio/hardpy/pull/85">PR-85</a>]</li>
<li>Add <strong>alert</strong> field in <strong>statestore</strong> database.
  [<a href="https://github.com/everypinio/hardpy/pull/85">PR-85</a>]</li>
<li>Add alert to control panel by calling <code>set_alert</code> method in <code>HardpyPlugin</code>.
  [<a href="https://github.com/everypinio/hardpy/pull/85">PR-85</a>]</li>
</ul>
<h2 id="changelog-hardpy-090">HardPy 0.9.0<a class="headerlink" href="#changelog-hardpy-090" title="Permanent link">&para;</a></h2>
<ul>
<li>Add the ability to add images to operator messages like a dialog box.
  [<a href="https://github.com/everypinio/hardpy/pull/95">PR-95</a>]</li>
<li>Add non-blocking mode for operator message.
  [<a href="https://github.com/everypinio/hardpy/pull/95">PR-95</a>]</li>
<li>Add <code>clear_operator_message</code> function for closing operator message.
  [<a href="https://github.com/everypinio/hardpy/pull/95">PR-95</a>]</li>
<li>Add <strong>font_size</strong> parameter for operator message and dialog box text.
  [<a href="https://github.com/everypinio/hardpy/pull/97">PR-97</a>]</li>
<li>Add a 1 second pause between attempts in the <code>attempt</code> marker.
  [<a href="https://github.com/everypinio/hardpy/pull/98">PR-98</a>]</li>
<li>Fix an issue where operator messages and dialog boxes sometimes did not
  open before the browser page reloaded.
  [<a href="https://github.com/everypinio/hardpy/pull/98">PR-98</a>]</li>
</ul>
<h2 id="changelog-hardpy-080">HardPy 0.8.0<a class="headerlink" href="#changelog-hardpy-080" title="Permanent link">&para;</a></h2>
<ul>
<li>Modify API for dialog boxes with images.
  [<a href="https://github.com/everypinio/hardpy/pull/84">PR-84</a>]</li>
<li>Add the ability to add images to all widgets.
  [<a href="https://github.com/everypinio/hardpy/pull/84">PR-84</a>]</li>
<li>Add ability to add borders to images.
  [<a href="https://github.com/everypinio/hardpy/pull/84">PR-84</a>]</li>
<li>Fix timezone format using the <strong>tzlocal</strong> package.
  [<a href="https://github.com/everypinio/hardpy/pull/79">PR-79</a>]</li>
<li>Add ability to close <code>set_operator_message</code> with <code>Escape</code> button.
  [<a href="https://github.com/everypinio/hardpy/pull/84">PR-84</a>]</li>
<li>Fix skipped test case and module status. Now skipped test status is <strong>skipped</strong>, not <strong>ready</strong>.
  [<a href="https://github.com/everypinio/hardpy/pull/77">PR-77</a>]</li>
<li>Add an exception when entering the same selection items or step names in dialog boxes.
  [<a href="https://github.com/everypinio/hardpy/pull/86">PR-86</a>]</li>
<li>Add the ability to clear the <strong>runstore</strong> database before running hardpy
  using the the <code>--hardpy-clear-database</code> option of the <strong>pytest-hardpy</strong> plugin.
  [<a href="https://github.com/everypinio/hardpy/pull/83">PR-83</a>]</li>
</ul>
<h2 id="changelog-hardpy-070">HardPy 0.7.0<a class="headerlink" href="#changelog-hardpy-070" title="Permanent link">&para;</a></h2>
<ul>
<li>Add an <strong>attempt</strong> marker to indicate the number of attempts to run a test before it passes successfully.
  [<a href="https://github.com/everypinio/hardpy/pull/65">PR-65</a>]</li>
<li>Add a <strong>get_current_attempt</strong> method to get the current attempt number.
  [<a href="https://github.com/everypinio/hardpy/pull/65">PR-65</a>]</li>
<li>Add the ability to run multiple dialog boxes in a single test.
  [<a href="https://github.com/everypinio/hardpy/pull/65">PR-65</a>]</li>
<li>Fix the problem of freezing the dialog box in some test cases.
  [<a href="https://github.com/everypinio/hardpy/pull/65">PR-65</a>]</li>
<li>Add autofocus on dialog boxes (on the <strong>Confirm</strong> button or the first item in the list).
  [<a href="https://github.com/everypinio/hardpy/pull/65">PR-65</a>]</li>
<li>Remove the <strong>progress</strong> field from the <strong>runstore</strong> database.
  [<a href="https://github.com/everypinio/hardpy/pull/66">PR-66</a>]</li>
<li>Add the <strong>hw_id</strong> variable to the <strong>test_stand</strong> field in the database obtained from the stand computer.
  [<a href="https://github.com/everypinio/hardpy/pull/67">PR-67</a>]</li>
<li>Add the <strong>location</strong> variables to the <strong>test_stand</strong> field in the database.
  [<a href="https://github.com/everypinio/hardpy/pull/66">PR-66</a>]</li>
<li>Move the <strong>timezone</strong> and <strong>driver</strong> database variables to the <strong>test_stand</strong> field.
  [<a href="https://github.com/everypinio/hardpy/pull/66">PR-66</a>]</li>
<li>Add a schema version. The schema version is fixed to version 1.
  [<a href="https://github.com/everypinio/hardpy/pull/66">PR-66</a>]</li>
<li>Change <strong>timezone</strong> from two strings to one string.
  [<a href="https://github.com/everypinio/hardpy/pull/69">PR-69</a>]</li>
<li>Replace the <strong>Flake8</strong> linter with a <strong>Ruff</strong> linter.
  [<a href="https://github.com/everypinio/hardpy/pull/58">PR-58</a>]</li>
</ul>
<h2 id="changelog-hardpy-061">HardPy 0.6.1<a class="headerlink" href="#changelog-hardpy-061" title="Permanent link">&para;</a></h2>
<ul>
<li>Fix running tests with a simple <code>pytest</code> command.
  [<a href="https://github.com/everypinio/hardpy/pull/60">PR-60</a>]</li>
</ul>
<h2 id="changelog-hardpy-060">HardPy 0.6.0<a class="headerlink" href="#changelog-hardpy-060" title="Permanent link">&para;</a></h2>
<p>In HardPy, the startup principle has changed compared to version 0.5.0 and lower.
The <code>hardpy-panel</code> command is no longer available.</p>
<p>The HardPy project of version 0.6.0 or later must contain the file <strong>hardpy.toml</strong>.</p>
<ul>
<li>Add the ability to clear the <strong>statestore</strong> database before running hardpy
  using the the <code>--hardpy-clear-database</code> option of the <strong>pytest-hardpy</strong> plugin.
  [<a href="https://github.com/everypinio/hardpy/pull/49">PR-49</a>]</li>
<li>Add the <strong>name</strong> and <strong>info</strong> fields to <strong>test_stand</strong> in the database schema.
  [<a href="https://github.com/everypinio/hardpy/pull/49">PR-49</a>]</li>
<li>Add the <strong>part_number</strong> field to <strong>dut</strong> in the database schema.
  [<a href="https://github.com/everypinio/hardpy/pull/49">PR-49</a>]</li>
<li>Add the <strong>attempt</strong> field to the test case in the database schema.
  [<a href="https://github.com/everypinio/hardpy/pull/54">PR-54</a>]</li>
<li>Add <code>set_stand_name</code> and <code>set_dut_part_number</code> functions.
  [<a href="https://github.com/everypinio/hardpy/pull/49">PR-49</a>]</li>
<li>Add a hardpy template project using the <code>hardpy init</code> command.
  [<a href="https://github.com/everypinio/hardpy/pull/44">PR-44</a>]</li>
<li>Add a hardpy config .toml file - <strong>hardpy.toml</strong>.
  [<a href="https://github.com/everypinio/hardpy/pull/44">PR-44</a>]</li>
<li>Refactor <strong>pytest-hardpy</strong> plugin options.
  [<a href="https://github.com/everypinio/hardpy/pull/44">PR-44</a>]</li>
<li>Add CLI to hardpy as an entry point. The <code>hardpy-panel</code> command is no longer available.
  [<a href="https://github.com/everypinio/hardpy/pull/44">PR-44</a>]</li>
<li>Fix use of special characters in dialog boxes. ASCII symbols are passed from frontend to backend.
  [<a href="https://github.com/everypinio/hardpy/pull/40">PR-40</a>]</li>
<li>Fix status of stopped tests.
  [<a href="https://github.com/everypinio/hardpy/pull/45">PR-45</a>]</li>
<li>Fix progress bar for skipped tests. Progress bar fills to the end when tests are skipped.
  [<a href="https://github.com/everypinio/hardpy/pull/43">PR-43</a>]</li>
<li>Add report name generation when serial number is missing.
  [<a href="https://github.com/everypinio/hardpy/pull/47">PR-47</a>]</li>
</ul>
<h2 id="changelog-hardpy-051">HardPy 0.5.1<a class="headerlink" href="#changelog-hardpy-051" title="Permanent link">&para;</a></h2>
<ul>
<li>Add the ability to work with cloud couchdb via couchdb config.
  [<a href="https://github.com/everypinio/hardpy/pull/51">PR-51</a>]</li>
</ul>
<h2 id="changelog-hardpy-050">HardPy 0.5.0<a class="headerlink" href="#changelog-hardpy-050" title="Permanent link">&para;</a></h2>
<ul>
<li>Refactor dialog box API.
  [<a href="https://github.com/everypinio/hardpy/pull/33">PR-33</a>]</li>
<li>Add conda.yaml example.
  [<a href="https://github.com/everypinio/hardpy/pull/32">PR-32</a>]</li>
<li>Add .vscode folder.
  [<a href="https://github.com/everypinio/hardpy/pull/32">PR-32</a>]</li>
<li>Fix catching exceptions and displaying them in the operator panel.
  [<a href="https://github.com/everypinio/hardpy/pull/32">PR-32</a>]</li>
<li>Add dialog box with radiobutton, checkbox, image, multiple steps.
  [<a href="https://github.com/everypinio/hardpy/pull/29">PR-29</a>]
  [<a href="https://github.com/everypinio/hardpy/pull/31">PR-31</a>]
  [<a href="https://github.com/everypinio/hardpy/pull/31">PR-31</a>]</li>
</ul>
<h2 id="changelog-hardpy-040">HardPy 0.4.0<a class="headerlink" href="#changelog-hardpy-040" title="Permanent link">&para;</a></h2>
<ul>
<li>Add base dialog box, text input and numeric input.
  [<a href="https://github.com/everypinio/hardpy/pull/24">PR-24</a>]</li>
<li>Add dialog box invocation functionality.
  [<a href="https://github.com/everypinio/hardpy/pull/25">PR-25</a>]</li>
<li>Add a socket mechanism to transfer data from the uvicorn server to the pytest subprocess.
  [<a href="https://github.com/everypinio/hardpy/pull/25">PR-25</a>]</li>
</ul>
<h2 id="changelog-hardpy-030">HardPy 0.3.0<a class="headerlink" href="#changelog-hardpy-030" title="Permanent link">&para;</a></h2>
<ul>
<li>Add implementation of test dependencies without using third-party plugins.
  [<a href="https://github.com/everypinio/hardpy/pull/15">PR-15</a>]</li>
<li>Reduce the number of database calls.
  [<a href="https://github.com/everypinio/hardpy/pull/12">PR-12</a>]</li>
<li>Speed up test collection.
  [<a href="https://github.com/everypinio/hardpy/pull/12">PR-12</a>]</li>
</ul>
<h2 id="changelog-hardpy-020">HardPy 0.2.0<a class="headerlink" href="#changelog-hardpy-020" title="Permanent link">&para;</a></h2>
<ul>
<li>Add documentation page.
  [<a href="https://github.com/everypinio/hardpy/pull/5">PR-5</a>]</li>
<li>Remove the ability to access the <code>HardPyPlugin</code>.
  Users can now only register via the ini file.
  [<a href="https://github.com/everypinio/hardpy/pull/6">PR-6</a>]</li>
</ul>
<h2 id="changelog-hardpy-010">HardPy 0.1.0<a class="headerlink" href="#changelog-hardpy-010" title="Permanent link">&para;</a></h2>
<ul>
<li>Add pytest-hardpy and hardpy panel to the package.
  [<a href="https://github.com/everypinio/hardpy/pull/1">PR-1</a>]</li>
<li>Add frontend data synchronization via CouchDB data replication to PouchDB.
  [<a href="https://github.com/everypinio/hardpy/pull/1">PR-1</a>]</li>
<li>Add documentation.
  [<a href="https://github.com/everypinio/hardpy/pull/1">PR-1</a>]</li>
<li>CouchDB is the main database.
  [<a href="https://github.com/everypinio/hardpy/pull/1">PR-1</a>]</li>
</ul></section></div>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "/hardpy/", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.path", "navigation.top", "navigation.expand", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.8fd75fb4.min.js"></script>
      
        <script src="../js/print-site.js"></script>
      
    
  </body>
</html>